name: Deploy Apple

on:
  workflow_call:
    inputs:
      edition:
        description: 'App edition (lite or pro)'
        required: true
        type: string
  workflow_dispatch:
    inputs:
      edition:
        description: 'App edition (lite or pro)'
        required: true
        type: choice
        options:
          - lite
          - pro

jobs:
  deploy-ios:
    name: Deploy iOS - ${{ inputs.edition }}
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Download iOS artifacts
        uses: actions/download-artifact@v4
        with:
          pattern: ${{ inputs.edition }}-ios-*
          merge-multiple: true

      - name: Deploy to App Store (iOS)
        run: |
          echo "ğŸš€ éƒ¨ç½²iOSåº”ç”¨åˆ°App Store..."
          # TODO: å®ç°App Store iOSéƒ¨ç½²
          # éœ€è¦ä½¿ç”¨fastlaneæˆ–app-store-connect-api
          echo "App Store iOSéƒ¨ç½²åŠŸèƒ½å¾…å®ç°"

  deploy-macos:
    name: Deploy macOS - ${{ inputs.edition }}
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Download macOS artifacts
        uses: actions/download-artifact@v4
        with:
          pattern: ${{ inputs.edition }}-macos-*
          merge-multiple: true

      - name: Create DMG
        run: |
          echo "ğŸ“¦ åˆ›å»ºDMGæ–‡ä»¶..."
          # TODO: å®ç°DMGåˆ›å»º
          echo "DMGåˆ›å»ºåŠŸèƒ½å¾…å®ç°"

      - name: Deploy to App Store (macOS)
        run: |
          echo "ğŸš€ éƒ¨ç½²macOSåº”ç”¨åˆ°App Store..."
          # TODO: å®ç°App Store macOSéƒ¨ç½²
          echo "App Store macOSéƒ¨ç½²åŠŸèƒ½å¾…å®ç°"

