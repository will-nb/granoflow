# 种子导入问题修复计划

## 问题分析

1. **项目重复导入（10个项目）**
   - 原因：种子导入时没有检查项目的 `seedSlug` 是否已存在
   - 状态：✅ 已修复（添加了 `seedSlug` 检查）

2. **任务未导入（0个任务）**
   - 可能原因：
     - 任务创建时出错但没有日志
     - `wasImported` 返回 true 但实际数据不存在，导致跳过导入
     - 任务创建逻辑有问题
   - 状态：需要进一步调试

3. **标签筛选抖动**
   - 可能原因：
     - 状态更新导致的无限重建
     - Provider 监听问题
     - UI 更新逻辑问题
   - 状态：需要检查标签筛选相关的代码

## 修复计划

### 阶段 1：修复任务重复导入问题 ✅
- [x] 添加 `ProjectService.listAll()` 方法
- [x] 在项目导入时检查 `seedSlug` 是否已存在
- [x] 添加 `ProjectUpdate.seedSlug` 支持
- [ ] 实现 `ObjectBoxTaskRepository.findBySlug()` 方法
- [ ] 在任务导入时检查 `seedSlug` 是否已存在

### 阶段 2：修复任务未导入问题
- [ ] 检查任务创建逻辑，添加详细日志
- [ ] 检查 `wasImported` 逻辑，确保数据存在性检查正确
- [ ] 检查任务创建时的错误处理

### 阶段 3：修复标签筛选抖动问题
- [ ] 检查标签筛选相关的 Provider
- [ ] 检查状态更新逻辑
- [ ] 检查 UI 重建逻辑

### 阶段 4：测试和验证
- [ ] 运行 `scripts/anz test:macos` 测试
- [ ] 验证项目不再重复导入
- [ ] 验证任务正确导入
- [ ] 验证标签筛选不再抖动
