meta:
  id: "251201-tasks-inline-edit"
  title: "ä»»åŠ¡åˆ—è¡¨å†…è”ç¼–è¾‘ä¼˜åŒ– - æ ‡ç­¾å’Œæˆªæ­¢æ—¥æœŸå¿«é€Ÿæ“ä½œ"
  status: draft
  owner: "AI Assistant"
  created: "2025-12-01"

background:
  problem: |
    å½“å‰çš„ä»»åŠ¡åˆ—è¡¨ï¼ˆTasksï¼‰å’Œæ”¶è—å¤¹ï¼ˆInboxï¼‰å­˜åœ¨ä»¥ä¸‹äº¤äº’æ•ˆç‡é—®é¢˜ï¼š
    1. ä¿®æ”¹ä»»åŠ¡æ ‡ç­¾éœ€è¦å¤šæ­¥æ“ä½œï¼šç‚¹å‡»ä»»åŠ¡ â†’ è¿›å…¥è¯¦æƒ…é¡µ â†’ é€‰æ‹©æ ‡ç­¾ â†’ è¿”å›
    2. æ ‡ç­¾åªè¯»æ˜¾ç¤ºï¼Œæ— æ³•å¿«é€Ÿæ·»åŠ æˆ–åˆ é™¤
    3. æˆªæ­¢æ—¥æœŸæ˜¾ç¤ºå†—ä½™ï¼š"æˆªæ­¢æ—¥æœŸï¼šæ˜å¤©ä¸‹åˆ 3:00"ï¼Œå ç”¨ç©ºé—´
    4. ä»»åŠ¡ä¿¡æ¯éœ€è¦å±•å¼€/æ”¶èµ·æ‰èƒ½çœ‹åˆ°ï¼Œå¢åŠ ç‚¹å‡»æ¬¡æ•°
    5. ç”¨æˆ·æ— æ³•åœ¨åˆ—è¡¨è§†å›¾ä¸­å¿«é€Ÿæµè§ˆå’Œæ‰¹é‡ä¿®æ”¹ä»»åŠ¡å±æ€§
    6. ä¸ç¬¦åˆç°ä»£ä»»åŠ¡ç®¡ç†åº”ç”¨çš„"ç›´æ¥æ“ä½œ"è®¾è®¡åŸåˆ™
  
  goal: |
    é‡‡ç”¨å†…è”ç¼–è¾‘ï¼ˆInline Editingï¼‰è®¾è®¡ï¼Œæå‡ä»»åŠ¡åˆ—è¡¨çš„æ“ä½œæ•ˆç‡ï¼š
    1. æ ‡ç­¾å¯ç‚¹å‡»åˆ é™¤ï¼ˆÃ— å›¾æ ‡ï¼‰
    2. æ ‡ç­¾å¯å¿«é€Ÿæ·»åŠ ï¼ˆä¸‹æ‹‰èœå•ï¼ŒæŒ‰ç»„æ˜¾ç¤ºï¼ŒåŒç»„äº’æ–¥ï¼‰
    3. æˆªæ­¢æ—¥æœŸç®€æ´æ˜¾ç¤ºï¼ˆå›¾æ ‡ + æ—¶é—´ï¼Œå¯ç‚¹å‡»ç¼–è¾‘ï¼‰
    4. æ‰€æœ‰å…³é”®ä¿¡æ¯ç›´æ¥å±•ç¤ºåœ¨åˆ—è¡¨é¡¹ä¸­ï¼Œå‡å°‘å±•å¼€/æ”¶èµ·æ“ä½œ
    5. ä¿ç•™å­ä»»åŠ¡çš„å±•å¼€/æ”¶èµ·åŠŸèƒ½ï¼ˆé¿å…åˆ—è¡¨è¿‡é•¿ï¼‰
    6. ç¬¦åˆ Notionã€Linearã€ClickUp ç­‰ç°ä»£åº”ç”¨çš„äº¤äº’ä¹ æƒ¯

user_flows:
  - name: "åˆ é™¤ä»»åŠ¡æ ‡ç­¾"
    steps:
      - "ç”¨æˆ·åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­çœ‹åˆ°ä»»åŠ¡ï¼Œæ ‡ç­¾å·²é€‰ä¸­ï¼ˆå¦‚ [ç´§æ€¥ Ã—]ï¼‰"
      - "ç‚¹å‡»æ ‡ç­¾å³ä¾§çš„ Ã— å›¾æ ‡"
      - "æ ‡ç­¾ç«‹å³ä»ä»»åŠ¡ä¸­ç§»é™¤ï¼Œæ— éœ€ç¡®è®¤"
      - "UI å®æ—¶æ›´æ–°ï¼Œæ ‡ç­¾æ¶ˆå¤±"
      - "å¦‚æœè¯¥æ ‡ç­¾æ˜¯å”¯ä¸€çš„åŒç»„æ ‡ç­¾ï¼Œ[+ æ ‡ç­¾ â–¼] æŒ‰é’®å‡ºç°"
  
  - name: "æ·»åŠ ä»»åŠ¡æ ‡ç­¾"
    steps:
      - "ç”¨æˆ·çœ‹åˆ°ä»»åŠ¡çš„æ ‡ç­¾è¡Œï¼Œæ˜¾ç¤º [ç´§æ€¥ Ã—] [é‡è¦ Ã—] [+ æ ‡ç­¾ â–¼]"
      - "ç‚¹å‡» [+ æ ‡ç­¾ â–¼] æŒ‰é’®"
      - "å¼¹å‡ºä¸‹æ‹‰èœå•ï¼ŒæŒ‰ç»„æ˜¾ç¤ºæœªé€‰æ‹©çš„æ ‡ç­¾ç»„"
      - "ç”¨æˆ·é€‰æ‹© 'å¼€å‘' æ ‡ç­¾"
      - "ä¸‹æ‹‰èœå•å…³é—­ï¼Œæ ‡ç­¾ç«‹å³æ·»åŠ åˆ°ä»»åŠ¡"
      - "æ ‡ç­¾è¡Œæ›´æ–°ä¸º [ç´§æ€¥ Ã—] [é‡è¦ Ã—] [å¼€å‘ Ã—]"
  
  - name: "æ›¿æ¢åŒç»„æ ‡ç­¾"
    steps:
      - "ç”¨æˆ·çœ‹åˆ°ä»»åŠ¡æ ‡ç­¾ [ç´§æ€¥ Ã—] [é‡è¦ Ã—]"
      - "ç‚¹å‡» [+ æ ‡ç­¾ â–¼]ï¼Œé€‰æ‹© 'ä¸ç´§æ€¥'ï¼ˆä¸ 'ç´§æ€¥' åŒç»„ï¼‰"
      - "ç³»ç»Ÿè‡ªåŠ¨ç§»é™¤ [ç´§æ€¥]ï¼Œæ·»åŠ  [ä¸ç´§æ€¥]"
      - "æ ‡ç­¾è¡Œæ›´æ–°ä¸º [ä¸ç´§æ€¥ Ã—] [é‡è¦ Ã—]"
  
  - name: "ç¼–è¾‘æˆªæ­¢æ—¥æœŸ"
    steps:
      - "ç”¨æˆ·çœ‹åˆ°æˆªæ­¢æ—¥æœŸæ˜¾ç¤ºï¼šğŸ“… æ˜å¤© 15:00"
      - "ç‚¹å‡»æˆªæ­¢æ—¥æœŸæ–‡æœ¬"
      - "æ‰“å¼€æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨"
      - "ç”¨æˆ·é€‰æ‹©æ–°çš„æ—¥æœŸå’Œæ—¶é—´"
      - "ç¡®è®¤åï¼Œæˆªæ­¢æ—¥æœŸç«‹å³æ›´æ–°"
  
  - name: "è®¾ç½®æˆªæ­¢æ—¥æœŸï¼ˆæ— æˆªæ­¢æ—¥æœŸï¼‰"
    steps:
      - "ç”¨æˆ·çœ‹åˆ°ä»»åŠ¡æ²¡æœ‰æˆªæ­¢æ—¥æœŸï¼Œæ˜¾ç¤º [+ è®¾ç½®æˆªæ­¢æ—¥æœŸ]"
      - "ç‚¹å‡»æŒ‰é’®"
      - "æ‰“å¼€æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨"
      - "ç”¨æˆ·é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´"
      - "ç¡®è®¤åï¼Œæ˜¾ç¤ºä¸º ğŸ“… XXæœˆXXæ—¥ XX:XX"

ui_behavior:
  layout: |
    ä»»åŠ¡åˆ—è¡¨é¡¹ï¼ˆå½“å‰è®¾è®¡ï¼‰ï¼š
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â˜ ä»»åŠ¡æ ‡é¢˜                          [â–¼]    â”‚ â† éœ€è¦ç‚¹å‡»å±•å¼€
    â”‚   æˆªæ­¢æ—¥æœŸï¼šæ˜å¤©ä¸‹åˆ 3:00                   â”‚ â† å†—ä½™æ–‡æœ¬
    â”‚   [ç´§æ€¥] [é‡è¦] [å¼€å‘]                     â”‚ â† åªè¯»æ ‡ç­¾
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    ä»»åŠ¡åˆ—è¡¨é¡¹ï¼ˆæ–°è®¾è®¡ï¼‰ï¼š
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â˜ ğŸ”§ ä»»åŠ¡æ ‡é¢˜                              â”‚ â† ç¬¬ä¸€è¡Œï¼šçŠ¶æ€ + å›¾æ ‡ + æ ‡é¢˜
    â”‚ [ç´§æ€¥ Ã—] [é‡è¦ Ã—] [å¼€å‘ Ã—] [+ æ ‡ç­¾ â–¼]      â”‚ â† ç¬¬äºŒè¡Œï¼šå¯æ“ä½œæ ‡ç­¾
    â”‚ ğŸ“… æ˜å¤© 15:00                              â”‚ â† ç¬¬ä¸‰è¡Œï¼šç®€æ´æˆªæ­¢æ—¥æœŸ
    â”‚ â”€ â˜ å­ä»»åŠ¡ 1  [â–¼]                         â”‚ â† å¯é€‰å±•å¼€å­ä»»åŠ¡
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    æ ‡ç­¾ä¸‹æ‹‰èœå•ï¼ˆæŒ‰ç»„æ˜¾ç¤ºï¼‰ï¼š
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç´§æ€¥ç¨‹åº¦                    â”‚
    â”‚   â—‹ ç´§æ€¥                   â”‚
    â”‚   â—‹ ä¸ç´§æ€¥                 â”‚
    â”‚                            â”‚
    â”‚ é‡è¦ç¨‹åº¦                    â”‚
    â”‚   â—‹ é‡è¦                   â”‚
    â”‚   â—‹ ä¸é‡è¦                 â”‚
    â”‚                            â”‚
    â”‚ æ‰§è¡Œæ–¹å¼                    â”‚
    â”‚   â—‹ å¼€å‘                   â”‚
    â”‚   â—‹ è®¾è®¡                   â”‚
    â”‚   â—‹ æ²Ÿé€š                   â”‚
    â”‚   ...                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  
  components:
    - name: "InlineEditableTag"
      purpose: "å¯åˆ é™¤çš„æ ‡ç­¾ï¼Œæ˜¾ç¤ºæ ‡ç­¾å + Ã— å›¾æ ‡"
      interactions: ["æ‚¬åœé«˜äº®", "ç‚¹å‡» Ã— åˆ é™¤"]
      design:
        - "åŸºäºç°æœ‰ ModernTag ç»„ä»¶"
        - "å³ä¾§æ·»åŠ  Ã— å›¾æ ‡ï¼ˆ8x8pxï¼‰"
        - "æ‚¬åœæ—¶ Ã— å›¾æ ‡é«˜äº®"
        - "ç‚¹å‡» Ã— è§¦å‘åˆ é™¤å›è°ƒ"
        - "åˆ é™¤æ—¶æœ‰è½»å¾®åŠ¨ç”»ï¼ˆfade outï¼‰"
    
    - name: "TagAddButton"
      purpose: "æ·»åŠ æ ‡ç­¾æŒ‰é’®ï¼Œæ‰“å¼€ä¸‹æ‹‰èœå•"
      interactions: ["ç‚¹å‡»æ‰“å¼€èœå•", "é€‰æ‹©æ ‡ç­¾", "å…³é—­èœå•"]
      design:
        - "åœ†è§’æŒ‰é’®ï¼Œè™šçº¿è¾¹æ¡†"
        - "å›¾æ ‡ + æ–‡æœ¬ï¼š'+ æ ‡ç­¾ â–¼'"
        - "åªåœ¨æœ‰æœªé€‰æ‹©çš„æ ‡ç­¾ç»„æ—¶æ˜¾ç¤º"
        - "ç‚¹å‡»æ‰“å¼€ PopupMenuButtonï¼ˆæ¡Œé¢ï¼‰æˆ– BottomSheetï¼ˆç§»åŠ¨ï¼‰"
    
    - name: "TagGroupedMenu"
      purpose: "æŒ‰æ ‡ç­¾ç»„åˆ†ç»„çš„ä¸‹æ‹‰èœå•"
      interactions: ["æ˜¾ç¤ºåˆ†ç»„æ ‡é¢˜", "é€‰æ‹©æ ‡ç­¾", "åŒç»„äº’æ–¥"]
      design:
        - "åˆ†ç»„æ ‡é¢˜ï¼šç°è‰²å°å­—ï¼Œä¸å¯ç‚¹å‡»"
        - "æ ‡ç­¾é¡¹ï¼šå•é€‰ï¼Œé€‰ä¸­åèœå•å…³é—­"
        - "åªæ˜¾ç¤ºæœªé€‰æ‹©çš„æ ‡ç­¾ç»„"
        - "åŒç»„æ ‡ç­¾è‡ªåŠ¨æ›¿æ¢ï¼ˆæ— éœ€ç”¨æˆ·æ‰‹åŠ¨åˆ é™¤ï¼‰"
    
    - name: "InlineDeadlineEditor"
      purpose: "å¯ç‚¹å‡»ç¼–è¾‘çš„æˆªæ­¢æ—¥æœŸæ˜¾ç¤º"
      interactions: ["ç‚¹å‡»æ‰“å¼€æ—¥æœŸé€‰æ‹©å™¨", "é€‰æ‹©æ—¥æœŸæ—¶é—´", "æ›´æ–°æ˜¾ç¤º"]
      design:
        - "å›¾æ ‡ ğŸ“… + æ ¼å¼åŒ–æ—¶é—´æ–‡æœ¬"
        - "ç›¸å¯¹æ—¶é—´ï¼š'æ˜å¤©'ã€'åå¤©'ã€'æœ¬å‘¨äº”'"
        - "ç»å¯¹æ—¶é—´ï¼š'12æœˆ1æ—¥ 15:00'ã€'2025å¹´1æœˆ1æ—¥'"
        - "è¿‡æœŸæ—¶ï¼šçº¢è‰²èƒŒæ™¯ + æ–‡æœ¬"
        - "æ— æˆªæ­¢æ—¥æœŸï¼šæ˜¾ç¤º [+ è®¾ç½®æˆªæ­¢æ—¥æœŸ] æŒ‰é’®"
        - "ç‚¹å‡»æ‰“å¼€ showDateTimePicker"
  
  states:
    - condition: "ä»»åŠ¡æ— æ ‡ç­¾"
      appearance: "åªæ˜¾ç¤º [+ æ ‡ç­¾ â–¼] æŒ‰é’®"
    
    - condition: "ä»»åŠ¡æœ‰æ ‡ç­¾ï¼Œä¸”æ‰€æœ‰æ ‡ç­¾ç»„å·²é€‰æ‹©"
      appearance: "æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ï¼Œä¸æ˜¾ç¤º [+ æ ‡ç­¾ â–¼] æŒ‰é’®"
    
    - condition: "ä»»åŠ¡æœ‰æ ‡ç­¾ï¼Œä¸”æœ‰æœªé€‰æ‹©çš„æ ‡ç­¾ç»„"
      appearance: "æ˜¾ç¤ºå·²é€‰æ ‡ç­¾ + [+ æ ‡ç­¾ â–¼] æŒ‰é’®"
    
    - condition: "æ ‡ç­¾æ‚¬åœ"
      appearance: "Ã— å›¾æ ‡é«˜äº®ï¼Œæ ‡ç­¾èƒŒæ™¯åŠ æ·± 5%"
    
    - condition: "æˆªæ­¢æ—¥æœŸå·²è¿‡æœŸ"
      appearance: "çº¢è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—ï¼Œæ˜¾ç¤º 'âš  å·²é€¾æœŸ'"
    
    - condition: "æˆªæ­¢æ—¥æœŸä¸´è¿‘ï¼ˆ24å°æ—¶å†…ï¼‰"
      appearance: "æ©™è‰²èƒŒæ™¯ï¼Œæ˜¾ç¤º 'â° å³å°†åˆ°æœŸ'"
    
    - condition: "æ— æˆªæ­¢æ—¥æœŸ"
      appearance: "æ˜¾ç¤ºç°è‰²è™šçº¿æŒ‰é’® [+ è®¾ç½®æˆªæ­¢æ—¥æœŸ]"
    
    - condition: "ä»»åŠ¡æœ‰å­ä»»åŠ¡"
      appearance: "ç¬¬å››è¡Œæ˜¾ç¤ºå­ä»»åŠ¡ï¼ˆé»˜è®¤æ”¶èµ·ï¼Œå¯å±•å¼€ï¼‰"
    
    - condition: "ä»»åŠ¡æ— å­ä»»åŠ¡"
      appearance: "ä¸æ˜¾ç¤ºå­ä»»åŠ¡åŒºåŸŸ"

design_principles:
  interaction:
    - "ç›´æ¥æ“ä½œï¼ˆDirect Manipulationï¼‰ï¼šåœ¨åˆ—è¡¨ä¸­ç›´æ¥ä¿®æ”¹ï¼Œæ— éœ€è¿›å…¥è¯¦æƒ…é¡µ"
    - "å³æ—¶åé¦ˆï¼šæ“ä½œç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€ä¿å­˜æŒ‰é’®"
    - "å¯é€†æ“ä½œï¼šåˆ é™¤æ ‡ç­¾å¯å¿«é€Ÿæ·»åŠ å›æ¥"
    - "æ¸è¿›å¼æŠ«éœ²ï¼šæ ‡ç­¾èœå•æŒ‰éœ€æ˜¾ç¤ºï¼Œä¸å±•ç¤ºå·²é€‰æ‹©çš„æ ‡ç­¾ç»„"
    - "è§†è§‰è¿ç»­æ€§ï¼šåŠ¨ç”»è¿‡æ¸¡ï¼Œé¿å…çªå…€çš„ UI å˜åŒ–"
  
  visual:
    - "ä¿æŒé¡¹ç›®ä¸€è‡´æ€§ï¼šä½¿ç”¨ç°æœ‰ ModernTag ç»„ä»¶æ ·å¼"
    - "ä¿¡æ¯å±‚æ¬¡æ¸…æ™°ï¼šç¬¬ä¸€è¡Œï¼ˆæ ‡é¢˜ï¼‰> ç¬¬äºŒè¡Œï¼ˆæ ‡ç­¾ï¼‰> ç¬¬ä¸‰è¡Œï¼ˆæˆªæ­¢æ—¥æœŸï¼‰"
    - "å‡å°‘è§†è§‰å™ªéŸ³ï¼šå»æ‰å†—ä½™æ–‡æœ¬ï¼ˆå¦‚ 'æˆªæ­¢æ—¥æœŸï¼š'ï¼‰"
    - "å›¾æ ‡å¼•å¯¼ï¼šä½¿ç”¨ ğŸ“… ç­‰ emoji å›¾æ ‡å¿«é€Ÿè¯†åˆ«ä¿¡æ¯ç±»å‹"
  
  efficiency:
    - "å‡å°‘ç‚¹å‡»æ¬¡æ•°ï¼šä» 4-5 æ¬¡ç‚¹å‡»å‡å°‘åˆ° 1-2 æ¬¡"
    - "æ‰¹é‡æ“ä½œå‹å¥½ï¼šç”¨æˆ·å¯ä»¥å¿«é€Ÿæµè§ˆå’Œä¿®æ”¹å¤šä¸ªä»»åŠ¡"
    - "é”®ç›˜å‹å¥½ï¼šæ”¯æŒ Tab å¯¼èˆªå’Œ Enter ç¡®è®¤"
  
  accessibility:
    - "ä¿ç•™ Semantics æ ‡ç­¾"
    - "è¶³å¤Ÿå¤§çš„ç‚¹å‡»åŒºåŸŸï¼ˆÃ— å›¾æ ‡ 44x44 è§¦æ§åŒºåŸŸï¼‰"
    - "é«˜å¯¹æ¯”åº¦æ¨¡å¼æ”¯æŒ"
    - "å±å¹•é˜…è¯»å™¨æ”¯æŒ"

technical_scope:
  modified_components:
    - name: "_TaskLeafTile"
      path: "lib/presentation/tasks/task_list_page.dart"
      changes:
        - "ç§»é™¤ ExpansionTileï¼Œæ”¹ä¸ºå¹³é“ºæ˜¾ç¤º"
        - "ç¬¬ä¸€è¡Œï¼šCheckbox + æ‰§è¡Œæ–¹å¼å›¾æ ‡ + æ ‡é¢˜"
        - "ç¬¬äºŒè¡Œï¼šInlineEditableTag åˆ—è¡¨ + TagAddButton"
        - "ç¬¬ä¸‰è¡Œï¼šInlineDeadlineEditor"
        - "ç¬¬å››è¡Œï¼šå­ä»»åŠ¡åˆ—è¡¨ï¼ˆä¿ç•™ ExpansionTileï¼‰"
    
    - name: "_TaskTitle"
      path: "lib/presentation/tasks/task_list_page.dart"
      changes:
        - "ç®€åŒ–ä¸ºçº¯æ ‡é¢˜æ˜¾ç¤ºï¼Œç§»é™¤æ ‡ç­¾å’Œæˆªæ­¢æ—¥æœŸ"
        - "æ ‡ç­¾å’Œæˆªæ­¢æ—¥æœŸç§»åˆ°ç‹¬ç«‹è¡Œ"
    
    - name: "_TaskHeaderRow"
      path: "lib/presentation/tasks/task_list_page.dart"
      changes:
        - "é‡æ„ä¸ºä¸‰è¡Œå¸ƒå±€"
        - "é›†æˆ InlineEditableTag å’Œ TagAddButton"
        - "é›†æˆ InlineDeadlineEditor"
  
  new_components:
    - name: "InlineEditableTag"
      path: "lib/presentation/widgets/inline_editable_tag.dart"
      purpose: "å¯åˆ é™¤çš„æ ‡ç­¾ç»„ä»¶ï¼Œå¸¦ Ã— å›¾æ ‡"
    
    - name: "TagAddButton"
      path: "lib/presentation/widgets/tag_add_button.dart"
      purpose: "æ·»åŠ æ ‡ç­¾æŒ‰é’®ï¼Œæ‰“å¼€åˆ†ç»„èœå•"
    
    - name: "TagGroupedMenu"
      path: "lib/presentation/widgets/tag_grouped_menu.dart"
      purpose: "æŒ‰æ ‡ç­¾ç»„åˆ†ç»„çš„èœå•ï¼Œæ”¯æŒåŒç»„äº’æ–¥"
    
    - name: "InlineDeadlineEditor"
      path: "lib/presentation/widgets/inline_deadline_editor.dart"
      purpose: "å¯ç‚¹å‡»ç¼–è¾‘çš„æˆªæ­¢æ—¥æœŸæ˜¾ç¤º"
  
  i18n_keys:
    - "taskAddTag": "æ·»åŠ æ ‡ç­¾"
    - "taskSetDeadline": "è®¾ç½®æˆªæ­¢æ—¥æœŸ"
    - "taskDeadlineOverdue": "å·²é€¾æœŸ"
    - "taskDeadlineSoon": "å³å°†åˆ°æœŸ"
    - "taskRemoveTag": "ç§»é™¤æ ‡ç­¾"
    - "taskEditDeadline": "ç¼–è¾‘æˆªæ­¢æ—¥æœŸ"
  
  providers:
    - name: "ä¸éœ€è¦æ–°çš„ Provider"
      note: "ä½¿ç”¨ç°æœ‰çš„ taskServiceProvider å’Œ tagOptionsProvider"
  
  test_files:
    - "test/presentation/widgets/inline_editable_tag_test.dart"
    - "test/presentation/widgets/tag_add_button_test.dart"
    - "test/presentation/widgets/tag_grouped_menu_test.dart"
    - "test/presentation/widgets/inline_deadline_editor_test.dart"
    - "test/presentation/tasks/task_list_inline_edit_test.dart"

implementation_details:
  tag_operations:
    add:
      - "ç”¨æˆ·ç‚¹å‡» [+ æ ‡ç­¾ â–¼]"
      - "æŸ¥è¯¢æ‰€æœ‰å¯ç”¨æ ‡ç­¾ç»„ï¼ˆurgency, importance, execution, etc.ï¼‰"
      - "è¿‡æ»¤æ‰å·²é€‰æ‹©çš„æ ‡ç­¾ç»„"
      - "æ˜¾ç¤ºå‰©ä½™æ ‡ç­¾ç»„çš„èœå•"
      - "ç”¨æˆ·é€‰æ‹©æ ‡ç­¾ â†’ è°ƒç”¨ taskService.addTag(taskId, tagSlug)"
      - "å¦‚æœè¯¥æ ‡ç­¾ä¸å·²æœ‰æ ‡ç­¾åŒç»„ â†’ å…ˆç§»é™¤åŒç»„æ ‡ç­¾"
      - "UI å®æ—¶æ›´æ–°"
    
    remove:
      - "ç”¨æˆ·ç‚¹å‡»æ ‡ç­¾çš„ Ã— å›¾æ ‡"
      - "è°ƒç”¨ taskService.removeTag(taskId, tagSlug)"
      - "æ ‡ç­¾ä» UI ä¸­æ·¡å‡ºï¼ˆ200ms fade animationï¼‰"
      - "å¦‚æœç§»é™¤åè¯¥æ ‡ç­¾ç»„æ— æ ‡ç­¾ â†’ æ˜¾ç¤º [+ æ ‡ç­¾ â–¼]"
  
  deadline_operations:
    set:
      - "ç”¨æˆ·ç‚¹å‡» [+ è®¾ç½®æˆªæ­¢æ—¥æœŸ]"
      - "æ‰“å¼€ showDateTimePicker"
      - "ç”¨æˆ·é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´"
      - "è°ƒç”¨ taskService.updateDetails(taskId, TaskUpdate(dueAt: dateTime))"
      - "UI æ›´æ–°ä¸º ğŸ“… æ ¼å¼åŒ–æ—¶é—´"
    
    edit:
      - "ç”¨æˆ·ç‚¹å‡»æˆªæ­¢æ—¥æœŸæ–‡æœ¬"
      - "æ‰“å¼€ showDateTimePickerï¼Œé¢„å¡«å……å½“å‰æ—¥æœŸæ—¶é—´"
      - "ç”¨æˆ·ä¿®æ”¹æ—¥æœŸå’Œæ—¶é—´"
      - "è°ƒç”¨ taskService.updateDetails(taskId, TaskUpdate(dueAt: newDateTime))"
      - "UI æ›´æ–°"
    
    format:
      - "ä»Šå¤©ï¼š'ä»Šå¤© HH:mm'"
      - "æ˜å¤©ï¼š'æ˜å¤© HH:mm'"
      - "æœ¬å‘¨ï¼š'å‘¨X HH:mm'"
      - "å…¶ä»–ï¼š'MMæœˆDDæ—¥ HH:mm'"
      - "è·¨å¹´ï¼š'YYYYå¹´MMæœˆDDæ—¥ HH:mm'"
  
  tag_grouping:
    logic:
      - "æ ‡ç­¾æŒ‰ category åˆ†ç»„ï¼ˆurgency, importance, execution, etc.ï¼‰"
      - "æ¯ä¸ªç»„åªèƒ½é€‰æ‹©ä¸€ä¸ªæ ‡ç­¾ï¼ˆå•é€‰ï¼‰"
      - "é€‰æ‹©æ–°æ ‡ç­¾æ—¶ï¼Œè‡ªåŠ¨ç§»é™¤åŒç»„çš„æ—§æ ‡ç­¾"
    
    menu_structure:
      - "åˆ†ç»„æ ‡é¢˜ï¼šTextï¼Œç°è‰²ï¼Œ12sp"
      - "æ ‡ç­¾é¡¹ï¼šListTileï¼Œ18px é«˜åº¦ï¼Œå¸¦å•é€‰åœ†åœˆ"
      - "é€‰ä¸­åï¼šèœå•å…³é—­ï¼Œè§¦å‘æ·»åŠ æ“ä½œ"
    
    filtering:
      - "æŸ¥è¯¢æ‰€æœ‰æ ‡ç­¾ç»„"
      - "è¿‡æ»¤æ‰å·²æœ‰æ ‡ç­¾çš„ç»„"
      - "åªæ˜¾ç¤ºå‰©ä½™çš„ç»„"
      - "å¦‚æœæ²¡æœ‰å‰©ä½™ç»„ â†’ ä¸æ˜¾ç¤º [+ æ ‡ç­¾ â–¼]"
  
  animations:
    - name: "tag_fade_out"
      type: "AnimatedOpacity"
      duration: "200ms"
      curve: "easeOut"
      from: "1.0"
      to: "0.0"
    
    - name: "tag_slide_in"
      type: "AnimatedSlide"
      duration: "200ms"
      curve: "easeOut"
      from: "offset(1.0, 0)"
      to: "offset(0, 0)"
    
    - name: "button_hover"
      type: "AnimatedContainer"
      duration: "150ms"
      curve: "easeInOut"
      properties: ["backgroundColor", "borderColor"]

open_issues:
  - question: "æ ‡ç­¾åˆ é™¤æ˜¯å¦éœ€è¦ç¡®è®¤ï¼Ÿ"
    suggestion: "å»ºè®®ï¼šä¸éœ€è¦ç¡®è®¤ï¼Œç›´æ¥åˆ é™¤ã€‚å¦‚æœè¯¯åˆ ï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿæ·»åŠ å›æ¥ã€‚ç¬¦åˆç°ä»£ UI ä¹ æƒ¯ã€‚"
  
  - question: "æˆªæ­¢æ—¥æœŸæ˜¯å¦æ”¯æŒæ¸…é™¤ï¼ˆç§»é™¤æˆªæ­¢æ—¥æœŸï¼‰ï¼Ÿ"
    suggestion: "å»ºè®®ï¼šæ”¯æŒã€‚åœ¨æ—¥æœŸé€‰æ‹©å™¨ä¸­æ·»åŠ  'æ¸…é™¤æˆªæ­¢æ—¥æœŸ' æŒ‰é’®ã€‚"
  
  - question: "æ˜¯å¦éœ€è¦æ‰¹é‡ç¼–è¾‘åŠŸèƒ½ï¼Ÿ"
    suggestion: "å»ºè®®ï¼šæœ¬æ¬¡è¿­ä»£ä¸å®ç°ã€‚å¯åœ¨åç»­è¿­ä»£ä¸­æ·»åŠ å¤šé€‰æ¨¡å¼ + æ‰¹é‡æ“ä½œå·¥å…·æ ã€‚"
  
  - question: "å­ä»»åŠ¡æ˜¯å¦ä¹Ÿéœ€è¦å†…è”ç¼–è¾‘ï¼Ÿ"
    suggestion: "å»ºè®®ï¼šæ˜¯çš„ã€‚å­ä»»åŠ¡ä¹Ÿåº”è¯¥æ”¯æŒå†…è”ç¼–è¾‘æ ‡ç­¾å’Œæˆªæ­¢æ—¥æœŸï¼Œä¿æŒä¸€è‡´æ€§ã€‚"
  
  - question: "æ”¶è—å¤¹ï¼ˆInboxï¼‰æ˜¯å¦ä½¿ç”¨ç›¸åŒè®¾è®¡ï¼Ÿ"
    suggestion: "å»ºè®®ï¼šæ˜¯çš„ã€‚Inbox ä½¿ç”¨ç›¸åŒçš„å†…è”ç¼–è¾‘ç»„ä»¶ï¼Œä¿æŒä¸€è‡´çš„ç”¨æˆ·ä½“éªŒã€‚"

references:
  design_inspiration:
    - "Notion - æ•°æ®åº“è§†å›¾çš„å†…è”ç¼–è¾‘"
    - "Linear - Issue åˆ—è¡¨çš„å¿«é€Ÿæ ‡ç­¾ç¼–è¾‘"
    - "ClickUp - ä»»åŠ¡åˆ—è¡¨çš„å±æ€§å¿«é€Ÿç¼–è¾‘"
    - "Asana - ä»»åŠ¡å¡ç‰‡çš„æ ‡ç­¾ç®¡ç†"
  
  existing_components:
    - "lib/presentation/widgets/modern_tag.dart - æ ‡ç­¾æ ·å¼åŸºç¡€"
    - "lib/presentation/widgets/tag_selector.dart - æ ‡ç­¾é€‰æ‹©é€»è¾‘"
    - "lib/core/theme/app_theme.dart - ä¸»é¢˜ç³»ç»Ÿ"
  
  related_specs:
    - "documents/spec/projects/design/251201-tag-style-unification.yaml - æ ‡ç­¾æ ·å¼ç»Ÿä¸€"
    - "documents/spec/widgets/design/251201-flexible-input-redesign.yaml - è¾“å…¥æ¡†ç°ä»£åŒ–"
