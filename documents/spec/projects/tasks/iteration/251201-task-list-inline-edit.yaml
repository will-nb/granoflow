meta:
  id: "251201-tasks-inline-edit"
  title: "ä»»åŠ¡åˆ—è¡¨å†…è”ç¼–è¾‘ä¼˜åŒ– - è¿­ä»£è“å›¾"
  based_on: "documents/spec/tasks/design/251201-task-list-inline-edit.yaml"
  status: draft
  owner: "AI Assistant"
  created: "2025-12-01"

scope:
  includes:
    - "åˆ›å»ºå†…è”å¯ç¼–è¾‘æ ‡ç­¾ç»„ä»¶ï¼ˆInlineEditableTagï¼‰"
    - "åˆ›å»ºæ ‡ç­¾æ·»åŠ æŒ‰é’®ç»„ä»¶ï¼ˆTagAddButtonï¼‰"
    - "åˆ›å»ºåˆ†ç»„æ ‡ç­¾èœå•ç»„ä»¶ï¼ˆTagGroupedMenuï¼‰"
    - "åˆ›å»ºå†…è”æˆªæ­¢æ—¥æœŸç¼–è¾‘å™¨ï¼ˆInlineDeadlineEditorï¼‰"
    - "é‡æ„ _TaskLeafTile ä¸ºä¸‰è¡Œå¸ƒå±€ï¼ˆæ ‡é¢˜/æ ‡ç­¾/æˆªæ­¢æ—¥æœŸï¼‰"
    - "é‡æ„ _TaskHeaderRow é›†æˆå†…è”ç¼–è¾‘ç»„ä»¶"
    - "ä¿ç•™å­ä»»åŠ¡çš„å±•å¼€/æ”¶èµ·åŠŸèƒ½"
    - "æ·»åŠ å›½é™…åŒ–æ”¯æŒï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰"
    - "ç¼–å†™å®Œæ•´çš„ widget æµ‹è¯•"
    - "åŒæ­¥åº”ç”¨åˆ°æ”¶è—å¤¹ï¼ˆInboxï¼‰é¡µé¢"
  
  excludes:
    - "ä¸ä¿®æ”¹ä»»åŠ¡è¯¦æƒ…é¡µï¼ˆä¿ç•™ç°æœ‰è¯¦æƒ…ç¼–è¾‘åŠŸèƒ½ï¼‰"
    - "ä¸å®ç°æ‰¹é‡ç¼–è¾‘åŠŸèƒ½ï¼ˆç•™å¾…åç»­è¿­ä»£ï¼‰"
    - "ä¸ä¿®æ”¹é¡¹ç›®å¡ç‰‡çš„è®¾è®¡ï¼ˆProjectCard ä¿æŒä¸å˜ï¼‰"
    - "ä¸ä¿®æ”¹è½»é‡ä»»åŠ¡åŒºåŸŸï¼ˆQuickTasks å·²åœ¨ä¸Šä¸€ä¸ªè¿­ä»£ä¼˜åŒ–ï¼‰"

changes:
  code_updates:
    - file: "lib/presentation/widgets/inline_editable_tag.dart"
      type: create
      intent: "åˆ›å»ºå¯åˆ é™¤çš„æ ‡ç­¾ç»„ä»¶ï¼Œå¸¦ Ã— å›¾æ ‡ï¼Œæ”¯æŒç‚¹å‡»åˆ é™¤"
      details:
        - "åŸºäº ModernTag ç»„ä»¶æ‰©å±•"
        - "å³ä¾§æ·»åŠ  Ã— å›¾æ ‡ï¼ˆCloseButton æˆ–è‡ªå®šä¹‰ Iconï¼‰"
        - "æ‚¬åœæ—¶ Ã— å›¾æ ‡é«˜äº®"
        - "ç‚¹å‡» Ã— è§¦å‘ onRemove å›è°ƒ"
        - "åˆ é™¤æ—¶æœ‰ 200ms fade out åŠ¨ç”»"
        - "é›†æˆ Semantics æ ‡ç­¾"
    
    - file: "lib/presentation/widgets/tag_add_button.dart"
      type: create
      intent: "åˆ›å»ºæ·»åŠ æ ‡ç­¾æŒ‰é’®ï¼Œæ‰“å¼€åˆ†ç»„èœå•é€‰æ‹©æ ‡ç­¾"
      details:
        - "è™šçº¿è¾¹æ¡†æŒ‰é’®ï¼Œæ˜¾ç¤º '+ æ ‡ç­¾ â–¼'"
        - "ç‚¹å‡»æ‰“å¼€ PopupMenuButtonï¼ˆæ¡Œé¢ï¼‰æˆ– showModalBottomSheetï¼ˆç§»åŠ¨ï¼‰"
        - "ä¼ å…¥æœªé€‰æ‹©çš„æ ‡ç­¾ç»„åˆ—è¡¨"
        - "é€‰æ‹©æ ‡ç­¾åè§¦å‘ onTagSelected å›è°ƒ"
        - "åªåœ¨æœ‰æœªé€‰æ‹©çš„æ ‡ç­¾ç»„æ—¶æ˜¾ç¤º"
    
    - file: "lib/presentation/widgets/tag_grouped_menu.dart"
      type: create
      intent: "åˆ›å»ºæŒ‰æ ‡ç­¾ç»„åˆ†ç»„çš„èœå•ï¼Œæ”¯æŒåŒç»„äº’æ–¥é€‰æ‹©"
      details:
        - "æ¥æ”¶ availableTagGroups å‚æ•°ï¼ˆæœªé€‰æ‹©çš„æ ‡ç­¾ç»„ï¼‰"
        - "æŒ‰ç»„æ˜¾ç¤ºæ ‡ç­¾ï¼Œå¸¦åˆ†ç»„æ ‡é¢˜"
        - "åˆ†ç»„æ ‡é¢˜ï¼šç°è‰²å°å­—ï¼Œä¸å¯ç‚¹å‡»"
        - "æ ‡ç­¾é¡¹ï¼šListTileï¼Œå•é€‰æ ·å¼"
        - "é€‰ä¸­æ ‡ç­¾åï¼šè§¦å‘ onTagSelectedï¼Œå…³é—­èœå•"
        - "å¤„ç†åŒç»„äº’æ–¥é€»è¾‘"
    
    - file: "lib/presentation/widgets/inline_deadline_editor.dart"
      type: create
      intent: "åˆ›å»ºå¯ç‚¹å‡»ç¼–è¾‘çš„æˆªæ­¢æ—¥æœŸæ˜¾ç¤ºç»„ä»¶"
      details:
        - "å›¾æ ‡ ğŸ“… + æ ¼å¼åŒ–æ—¶é—´æ–‡æœ¬"
        - "ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼š'ä»Šå¤©'ã€'æ˜å¤©'ã€'æœ¬å‘¨äº”'"
        - "ç»å¯¹æ—¶é—´æ˜¾ç¤ºï¼š'12æœˆ1æ—¥ 15:00'"
        - "è¿‡æœŸæ—¶ï¼šçº¢è‰²èƒŒæ™¯ + 'âš  å·²é€¾æœŸ'"
        - "ä¸´è¿‘æ—¶ï¼ˆ24å°æ—¶å†…ï¼‰ï¼šæ©™è‰²èƒŒæ™¯ + 'â° å³å°†åˆ°æœŸ'"
        - "æ— æˆªæ­¢æ—¥æœŸï¼šæ˜¾ç¤º [+ è®¾ç½®æˆªæ­¢æ—¥æœŸ] æŒ‰é’®"
        - "ç‚¹å‡»æ‰“å¼€ showDateTimePicker"
        - "æ”¯æŒæ¸…é™¤æˆªæ­¢æ—¥æœŸåŠŸèƒ½"
        - "è°ƒç”¨ onDeadlineChanged å›è°ƒ"
    
    - file: "lib/presentation/tasks/task_list_page.dart"
      type: modify
      intent: "é‡æ„ _TaskLeafTile å’Œ _TaskHeaderRowï¼Œé›†æˆå†…è”ç¼–è¾‘ç»„ä»¶"
      details:
        - "ç§»é™¤ _TaskLeafTile çš„ ExpansionTileï¼ˆä»»åŠ¡æœ¬èº«ä¸å†å±•å¼€ï¼‰"
        - "æ”¹ä¸ºä¸‰è¡Œå¹³é“ºå¸ƒå±€ï¼š"
        - "  ç¬¬ä¸€è¡Œï¼šCheckbox + æ‰§è¡Œæ–¹å¼å›¾æ ‡ + æ ‡é¢˜"
        - "  ç¬¬äºŒè¡Œï¼šInlineEditableTag åˆ—è¡¨ + TagAddButton"
        - "  ç¬¬ä¸‰è¡Œï¼šInlineDeadlineEditor"
        - "  ç¬¬å››è¡Œï¼ˆå¯é€‰ï¼‰ï¼šå­ä»»åŠ¡åˆ—è¡¨ï¼ˆä¿ç•™ ExpansionTileï¼‰"
        - "é‡æ„ _TaskHeaderRow ä¸ºç‹¬ç«‹çš„æ ‡ç­¾å’Œæˆªæ­¢æ—¥æœŸè¡Œ"
        - "æ·»åŠ æ ‡ç­¾åˆ é™¤å›è°ƒï¼šè°ƒç”¨ taskService.removeTag"
        - "æ·»åŠ æ ‡ç­¾æ·»åŠ å›è°ƒï¼šè°ƒç”¨ taskService.addTagï¼Œå¤„ç†åŒç»„äº’æ–¥"
        - "æ·»åŠ æˆªæ­¢æ—¥æœŸä¿®æ”¹å›è°ƒï¼šè°ƒç”¨ taskService.updateDetails"
        - "æ›´æ–° _TaskTitle ç»„ä»¶ï¼Œç§»é™¤å†—ä½™ä¿¡æ¯"
    
    - file: "lib/presentation/inbox/inbox_page.dart"
      type: modify
      intent: "åŒæ­¥åº”ç”¨å†…è”ç¼–è¾‘åˆ°æ”¶è—å¤¹é¡µé¢"
      details:
        - "æŸ¥æ‰¾æ”¶è—å¤¹çš„ä»»åŠ¡åˆ—è¡¨æ¸²æŸ“ä»£ç "
        - "åº”ç”¨ä¸ task_list_page ç›¸åŒçš„ä¸‰è¡Œå¸ƒå±€"
        - "å¤ç”¨ InlineEditableTagã€TagAddButtonã€InlineDeadlineEditor ç»„ä»¶"
    
    - file: "lib/l10n/app_zh.arb"
      type: modify
      intent: "æ·»åŠ å†…è”ç¼–è¾‘ç›¸å…³çš„ä¸­æ–‡å›½é™…åŒ–å­—ç¬¦ä¸²"
      details:
        - "æ·»åŠ  6 ä¸ªæ–°çš„ç¿»è¯‘é”®"
        - "æŒ‰å­—æ¯é¡ºåºæ’å…¥"
    
    - file: "lib/l10n/app_en.arb"
      type: modify
      intent: "æ·»åŠ å†…è”ç¼–è¾‘ç›¸å…³çš„è‹±æ–‡å›½é™…åŒ–å­—ç¬¦ä¸²"
      details:
        - "æ·»åŠ  6 ä¸ªæ–°çš„ç¿»è¯‘é”®"
        - "æŒ‰å­—æ¯é¡ºåºæ’å…¥"
  
  data_model:
    - entity: "æ— "
      change: "ä¸æ¶‰åŠæ•°æ®æ¨¡å‹å˜æ›´ï¼Œä½¿ç”¨ç°æœ‰ Task å’Œ Tag æ¨¡å‹"
  
  tests:
    - type: widget
      file: "test/presentation/widgets/inline_editable_tag_test.dart"
      focus: "æµ‹è¯•å¯åˆ é™¤æ ‡ç­¾çš„æ¸²æŸ“å’Œäº¤äº’"
      test_cases:
        - "æ¸²æŸ“æ ‡ç­¾åå’Œ Ã— å›¾æ ‡"
        - "ç‚¹å‡» Ã— è§¦å‘ onRemove å›è°ƒ"
        - "æ‚¬åœæ—¶ Ã— å›¾æ ‡é«˜äº®"
        - "åˆ é™¤åŠ¨ç”»æ­£å¸¸æ’­æ”¾"
        - "Semantics æ ‡ç­¾å­˜åœ¨"
    
    - type: widget
      file: "test/presentation/widgets/tag_add_button_test.dart"
      focus: "æµ‹è¯•æ·»åŠ æ ‡ç­¾æŒ‰é’®çš„æ˜¾ç¤ºå’Œäº¤äº’"
      test_cases:
        - "æŒ‰é’®æ­£å¸¸æ¸²æŸ“"
        - "ç‚¹å‡»æ‰“å¼€èœå•"
        - "ä¼ å…¥ç©ºæ ‡ç­¾ç»„æ—¶ä¸æ˜¾ç¤ºæŒ‰é’®"
        - "é€‰æ‹©æ ‡ç­¾åè§¦å‘ onTagSelected"
        - "å›½é™…åŒ–æ–‡æœ¬æ­£ç¡®"
    
    - type: widget
      file: "test/presentation/widgets/tag_grouped_menu_test.dart"
      focus: "æµ‹è¯•åˆ†ç»„æ ‡ç­¾èœå•çš„æ˜¾ç¤ºå’ŒåŒç»„äº’æ–¥é€»è¾‘"
      test_cases:
        - "æŒ‰ç»„æ˜¾ç¤ºæ ‡ç­¾"
        - "åˆ†ç»„æ ‡é¢˜æ­£ç¡®æ¸²æŸ“"
        - "é€‰æ‹©æ ‡ç­¾åèœå•å…³é—­"
        - "åŒç»„æ ‡ç­¾äº’æ–¥ï¼ˆé€‰ä¸­æ–°æ ‡ç­¾æ—¶æ—§æ ‡ç­¾ç§»é™¤ï¼‰"
        - "åªæ˜¾ç¤ºæœªé€‰æ‹©çš„æ ‡ç­¾ç»„"
    
    - type: widget
      file: "test/presentation/widgets/inline_deadline_editor_test.dart"
      focus: "æµ‹è¯•æˆªæ­¢æ—¥æœŸç¼–è¾‘å™¨çš„æ˜¾ç¤ºå’Œäº¤äº’"
      test_cases:
        - "æ— æˆªæ­¢æ—¥æœŸæ—¶æ˜¾ç¤º [+ è®¾ç½®æˆªæ­¢æ—¥æœŸ]"
        - "æœ‰æˆªæ­¢æ—¥æœŸæ—¶æ˜¾ç¤ºæ ¼å¼åŒ–æ—¶é—´"
        - "è¿‡æœŸæ—¶æ˜¾ç¤ºçº¢è‰²èƒŒæ™¯å’Œè­¦å‘Š"
        - "ä¸´è¿‘æ—¶æ˜¾ç¤ºæ©™è‰²èƒŒæ™¯å’Œæç¤º"
        - "ç‚¹å‡»æ‰“å¼€æ—¥æœŸé€‰æ‹©å™¨"
        - "ä¿®æ”¹æˆªæ­¢æ—¥æœŸåè§¦å‘ onDeadlineChanged"
        - "æ¸…é™¤æˆªæ­¢æ—¥æœŸåŠŸèƒ½æ­£å¸¸"
        - "ç›¸å¯¹æ—¶é—´æ ¼å¼æ­£ç¡®ï¼ˆä»Šå¤©ã€æ˜å¤©ã€æœ¬å‘¨äº”ï¼‰"
    
    - type: widget
      file: "test/presentation/tasks/task_list_inline_edit_test.dart"
      focus: "æµ‹è¯•ä»»åŠ¡åˆ—è¡¨é¡¹çš„æ•´ä½“å¸ƒå±€å’Œå†…è”ç¼–è¾‘æµç¨‹"
      test_cases:
        - "ä¸‰è¡Œå¸ƒå±€æ­£å¸¸æ¸²æŸ“"
        - "æ ‡ç­¾å¯åˆ é™¤ï¼ŒUI å®æ—¶æ›´æ–°"
        - "æ ‡ç­¾å¯æ·»åŠ ï¼ŒåŒç»„äº’æ–¥ç”Ÿæ•ˆ"
        - "æˆªæ­¢æ—¥æœŸå¯ç¼–è¾‘"
        - "å­ä»»åŠ¡å±•å¼€/æ”¶èµ·æ­£å¸¸"
        - "å›½é™…åŒ–æ–‡æœ¬æ­£ç¡®"
  
  documentation:
    - path: "documents/spec/tasks/design/251201-task-list-inline-edit.yaml"
      update_type: reference_only
      note: "è®¾è®¡æ–‡æ¡£å·²åˆ›å»ºï¼Œä½œä¸ºæœ¬æ¬¡è¿­ä»£çš„ä¾æ®"
    
    - path: "documents/spec/tasks/iteration/251201-task-list-inline-edit.yaml"
      update_type: create
      note: "æœ¬æ–‡æ¡£ï¼Œè¿­ä»£è“å›¾"

risks:
  - name: "ä»»åŠ¡åˆ—è¡¨ UI å¤§å¹…æ”¹åŠ¨ï¼Œå¯èƒ½å½±å“ç”¨æˆ·ä¹ æƒ¯"
    mitigation: "ä¿ç•™æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼ˆCheckboxã€å±•å¼€å­ä»»åŠ¡ï¼‰ï¼Œåªä¼˜åŒ–å…ƒæ•°æ®ç¼–è¾‘ï¼›æä¾›æ¸…æ™°çš„è§†è§‰å¼•å¯¼"
    affected_files:
      - "lib/presentation/tasks/task_list_page.dart"
      - "lib/presentation/inbox/inbox_page.dart"
  
  - name: "æ ‡ç­¾åŒç»„äº’æ–¥é€»è¾‘å¤æ‚ï¼Œå¯èƒ½å‡ºç°è¾¹ç•Œæƒ…å†µ"
    mitigation: "ç¼–å†™å…¨é¢çš„å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–æ‰€æœ‰æ ‡ç­¾ç»„åˆï¼›å‚è€ƒç°æœ‰ tag_selector.dart çš„é€»è¾‘"
  
  - name: "æˆªæ­¢æ—¥æœŸæ ¼å¼åŒ–é€»è¾‘å¯èƒ½ä¸æœ¬åœ°åŒ–å†²çª"
    mitigation: "ä½¿ç”¨ intl åŒ…çš„ DateFormatï¼Œæ”¯æŒå¤šè¯­è¨€ï¼›æµ‹è¯•ä¸­è‹±æ–‡ä¸¤ç§è¯­è¨€"
  
  - name: "ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯çš„èœå•å±•ç¤ºæ–¹å¼ä¸åŒ"
    mitigation: "ä½¿ç”¨ Platform.isAndroid/iOS åˆ¤æ–­ï¼Œæ¡Œé¢ç”¨ PopupMenuï¼Œç§»åŠ¨ç”¨ BottomSheet"
  
  - name: "æ€§èƒ½é—®é¢˜ï¼šåˆ—è¡¨é¡¹å¤æ‚åº¦å¢åŠ ï¼Œå¯èƒ½å½±å“æ»šåŠ¨æµç•…åº¦"
    mitigation: "ä½¿ç”¨ const æ„é€ å‡½æ•°ä¼˜åŒ–ï¼›é¿å…ä¸å¿…è¦çš„ rebuildï¼›åœ¨é•¿åˆ—è¡¨ä¸­æµ‹è¯•æ€§èƒ½"
  
  - name: "Inbox é¡µé¢çš„ä»»åŠ¡åˆ—è¡¨å®ç°å¯èƒ½ä¸ Tasks é¡µé¢ä¸åŒ"
    mitigation: "å…ˆæŸ¥çœ‹ Inbox ä»£ç ç»“æ„ï¼›å°½é‡å¤ç”¨ç»„ä»¶ï¼›å¿…è¦æ—¶é‡æ„ä¸ºç»Ÿä¸€çš„ä»»åŠ¡åˆ—è¡¨ç»„ä»¶"

verification:
  checklist:
    - "âœ… æ‰€æœ‰æ–°ç»„ä»¶æ–‡ä»¶åˆ›å»ºå®Œæˆ"
    - "âœ… æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶æ›´æ–°å®Œæˆ"
    - "âœ… è¿è¡Œ flutter pub get ç¡®ä¿ä¾èµ–æ­£å¸¸"
    - "âœ… è¿è¡Œ flutter gen-l10n ç”Ÿæˆå›½é™…åŒ–æ–‡ä»¶"
    - "âœ… è¿è¡Œ flutter analyze æ— é”™è¯¯æ— è­¦å‘Š"
    - "âœ… è¿è¡Œ flutter test test/presentation/widgets/inline_editable_tag_test.dart é€šè¿‡"
    - "âœ… è¿è¡Œ flutter test test/presentation/widgets/tag_add_button_test.dart é€šè¿‡"
    - "âœ… è¿è¡Œ flutter test test/presentation/widgets/tag_grouped_menu_test.dart é€šè¿‡"
    - "âœ… è¿è¡Œ flutter test test/presentation/widgets/inline_deadline_editor_test.dart é€šè¿‡"
    - "âœ… è¿è¡Œ flutter test test/presentation/tasks/task_list_inline_edit_test.dart é€šè¿‡"
    - "âœ… è¿è¡Œ flutter test å…¨é‡æµ‹è¯•é€šè¿‡"
    - "âœ… æ‰‹åŠ¨æµ‹è¯• Tasks é¡µé¢çš„å†…è”ç¼–è¾‘åŠŸèƒ½"
    - "âœ… æ‰‹åŠ¨æµ‹è¯• Inbox é¡µé¢çš„å†…è”ç¼–è¾‘åŠŸèƒ½"
    - "âœ… æµ‹è¯•æ ‡ç­¾åˆ é™¤åŠŸèƒ½"
    - "âœ… æµ‹è¯•æ ‡ç­¾æ·»åŠ åŠŸèƒ½å’ŒåŒç»„äº’æ–¥"
    - "âœ… æµ‹è¯•æˆªæ­¢æ—¥æœŸç¼–è¾‘å’Œæ¸…é™¤"
    - "âœ… æµ‹è¯•ç›¸å¯¹æ—¶é—´æ ¼å¼ï¼ˆä»Šå¤©ã€æ˜å¤©ã€æœ¬å‘¨äº”ï¼‰"
    - "âœ… æµ‹è¯•è¿‡æœŸå’Œä¸´è¿‘æç¤º"
    - "âœ… æµ‹è¯•å­ä»»åŠ¡å±•å¼€/æ”¶èµ·"
    - "âœ… æµ‹è¯•æ·±è‰²æ¨¡å¼"
    - "âœ… æµ‹è¯•ä¸­è‹±æ–‡å›½é™…åŒ–"
    - "âœ… æµ‹è¯•ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯èœå•æ˜¾ç¤º"

implementation_order:
  phase1_foundation:
    - step: 1
      task: "åˆ›å»º InlineEditableTag ç»„ä»¶"
      reason: "æœ€åŸºç¡€çš„ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶å¯èƒ½ä¾èµ–å®ƒ"
      files:
        - "lib/presentation/widgets/inline_editable_tag.dart"
        - "test/presentation/widgets/inline_editable_tag_test.dart"
    
    - step: 2
      task: "åˆ›å»º TagGroupedMenu ç»„ä»¶"
      reason: "TagAddButton éœ€è¦ä½¿ç”¨è¿™ä¸ªèœå•"
      files:
        - "lib/presentation/widgets/tag_grouped_menu.dart"
        - "test/presentation/widgets/tag_grouped_menu_test.dart"
    
    - step: 3
      task: "åˆ›å»º TagAddButton ç»„ä»¶"
      reason: "ä¾èµ– TagGroupedMenu"
      files:
        - "lib/presentation/widgets/tag_add_button.dart"
        - "test/presentation/widgets/tag_add_button_test.dart"
    
    - step: 4
      task: "åˆ›å»º InlineDeadlineEditor ç»„ä»¶"
      reason: "ç‹¬ç«‹ç»„ä»¶ï¼Œä¸ä¾èµ–å…¶ä»–æ–°ç»„ä»¶"
      files:
        - "lib/presentation/widgets/inline_deadline_editor.dart"
        - "test/presentation/widgets/inline_deadline_editor_test.dart"
  
  phase2_integration:
    - step: 5
      task: "æ·»åŠ å›½é™…åŒ–å­—ç¬¦ä¸²"
      reason: "åç»­é›†æˆæ—¶éœ€è¦ç”¨åˆ°"
      files:
        - "lib/l10n/app_zh.arb"
        - "lib/l10n/app_en.arb"
    
    - step: 6
      task: "é‡æ„ _TaskLeafTile å’Œ _TaskHeaderRow"
      reason: "é›†æˆæ‰€æœ‰æ–°ç»„ä»¶åˆ°ä»»åŠ¡åˆ—è¡¨"
      files:
        - "lib/presentation/tasks/task_list_page.dart"
    
    - step: 7
      task: "åŒæ­¥æ›´æ–° Inbox é¡µé¢"
      reason: "ä¿æŒæ”¶è—å¤¹å’Œä»»åŠ¡åˆ—è¡¨çš„ä¸€è‡´æ€§"
      files:
        - "lib/presentation/inbox/inbox_page.dart"
  
  phase3_testing:
    - step: 8
      task: "ç¼–å†™é›†æˆæµ‹è¯•"
      reason: "æµ‹è¯•æ•´ä½“æµç¨‹"
      files:
        - "test/presentation/tasks/task_list_inline_edit_test.dart"
    
    - step: 9
      task: "è¿è¡Œå…¨é‡æµ‹è¯•å’Œæ‰‹åŠ¨æµ‹è¯•"
      reason: "ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸"
    
    - step: 10
      task: "ä¿®å¤å‘ç°çš„é—®é¢˜"
      reason: "æ ¹æ®æµ‹è¯•ç»“æœè°ƒæ•´"

estimated_effort:
  total_hours: 12-16
  breakdown:
    - task: "åˆ›å»º 4 ä¸ªæ–°ç»„ä»¶åŠæµ‹è¯•"
      hours: 6-8
    - task: "é‡æ„ä»»åŠ¡åˆ—è¡¨å’Œæ”¶è—å¤¹"
      hours: 4-6
    - task: "å›½é™…åŒ–å’Œæ ·å¼è°ƒæ•´"
      hours: 1-2
    - task: "æµ‹è¯•å’Œ bug ä¿®å¤"
      hours: 1-2

acceptance_criteria:
  functional:
    - "ç”¨æˆ·å¯ä»¥åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­ç‚¹å‡» Ã— åˆ é™¤æ ‡ç­¾"
    - "ç”¨æˆ·å¯ä»¥åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­ç‚¹å‡» [+ æ ‡ç­¾ â–¼] æ·»åŠ æ ‡ç­¾"
    - "æ ‡ç­¾èœå•æŒ‰ç»„æ˜¾ç¤ºï¼Œåªæ˜¾ç¤ºæœªé€‰æ‹©çš„æ ‡ç­¾ç»„"
    - "é€‰æ‹©åŒç»„æ ‡ç­¾æ—¶ï¼Œè‡ªåŠ¨ç§»é™¤æ—§æ ‡ç­¾"
    - "ç”¨æˆ·å¯ä»¥ç‚¹å‡»æˆªæ­¢æ—¥æœŸç¼–è¾‘æ—¶é—´"
    - "ç”¨æˆ·å¯ä»¥ç‚¹å‡» [+ è®¾ç½®æˆªæ­¢æ—¥æœŸ] æ·»åŠ æˆªæ­¢æ—¥æœŸ"
    - "è¿‡æœŸä»»åŠ¡æ˜¾ç¤ºçº¢è‰²è­¦å‘Š"
    - "ä¸´è¿‘ä»»åŠ¡ï¼ˆ24å°æ—¶å†…ï¼‰æ˜¾ç¤ºæ©™è‰²æç¤º"
    - "ç›¸å¯¹æ—¶é—´æ­£ç¡®æ˜¾ç¤ºï¼ˆä»Šå¤©ã€æ˜å¤©ã€æœ¬å‘¨äº”ï¼‰"
    - "å­ä»»åŠ¡å±•å¼€/æ”¶èµ·åŠŸèƒ½æ­£å¸¸"
    - "æ‰€æœ‰æ“ä½œç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€ä¿å­˜æŒ‰é’®"
  
  non_functional:
    - "æ‰€æœ‰æ“ä½œå“åº”æ—¶é—´ < 200ms"
    - "åŠ¨ç”»æµç•…ï¼Œ60fps"
    - "æ”¯æŒæ·±è‰²æ¨¡å¼"
    - "æ”¯æŒä¸­è‹±æ–‡å›½é™…åŒ–"
    - "æ”¯æŒå±å¹•é˜…è¯»å™¨"
    - "æ‰€æœ‰ç‚¹å‡»åŒºåŸŸ â‰¥ 44x44 pxï¼ˆç§»åŠ¨ç«¯ï¼‰"
    - "flutter analyze æ— é”™è¯¯æ— è­¦å‘Š"
    - "flutter test å…¨éƒ¨é€šè¿‡"
    - "ä»£ç è¦†ç›–ç‡ â‰¥ 80%"

rollback_plan:
  trigger_conditions:
    - "å‘ç°ä¸¥é‡ bug å¯¼è‡´ä»»åŠ¡åˆ—è¡¨æ— æ³•æ­£å¸¸ä½¿ç”¨"
    - "æ€§èƒ½é—®é¢˜å¯¼è‡´åˆ—è¡¨æ»šåŠ¨å¡é¡¿"
    - "ç”¨æˆ·åé¦ˆæ“ä½œé€»è¾‘æ··ä¹±"
  
  rollback_steps:
    - step: 1
      action: "é€šè¿‡ git revert å›æ»šæ‰€æœ‰ç›¸å…³ commit"
    - step: 2
      action: "è¿è¡Œ flutter test ç¡®ä¿å›æ»šåæµ‹è¯•é€šè¿‡"
    - step: 3
      action: "é€šçŸ¥ç”¨æˆ·å’Œå›¢é˜Ÿ"
    - step: 4
      action: "åˆ†æé—®é¢˜ï¼Œåˆ¶å®šä¿®å¤è®¡åˆ’"
  
  prevention:
    - "åˆ†é˜¶æ®µå‘å¸ƒï¼šå…ˆåœ¨å†…éƒ¨æµ‹è¯•ç¯å¢ƒéªŒè¯"
    - "ä¿ç•™æ—§ä»£ç çš„ feature flagï¼Œå¯å¿«é€Ÿåˆ‡æ¢å›æ—§ç‰ˆæœ¬"
    - "å……åˆ†çš„æµ‹è¯•è¦†ç›–"

post_implementation:
  follow_up_tasks:
    - "æ”¶é›†ç”¨æˆ·åé¦ˆï¼Œè¯„ä¼°å†…è”ç¼–è¾‘çš„ä½¿ç”¨é¢‘ç‡"
    - "ç›‘æ§æ€§èƒ½æŒ‡æ ‡ï¼Œç¡®ä¿åˆ—è¡¨æ»šåŠ¨æµç•…"
    - "è€ƒè™‘æ·»åŠ æ‰¹é‡ç¼–è¾‘åŠŸèƒ½ï¼ˆé€‰ä¸­å¤šä¸ªä»»åŠ¡ï¼Œç»Ÿä¸€ä¿®æ”¹æ ‡ç­¾ï¼‰"
    - "è€ƒè™‘æ·»åŠ å¿«æ·é”®æ”¯æŒï¼ˆå¦‚ Cmd+T æ·»åŠ æ ‡ç­¾ï¼‰"
    - "è€ƒè™‘æ·»åŠ æ ‡ç­¾é¢œè‰²è‡ªå®šä¹‰"
  
  metrics_to_track:
    - "æ ‡ç­¾åˆ é™¤æ“ä½œé¢‘ç‡"
    - "æ ‡ç­¾æ·»åŠ æ“ä½œé¢‘ç‡"
    - "æˆªæ­¢æ—¥æœŸç¼–è¾‘æ“ä½œé¢‘ç‡"
    - "ç”¨æˆ·ä»åˆ—è¡¨åˆ°è¯¦æƒ…é¡µçš„è·³è½¬é¢‘ç‡ï¼ˆåº”è¯¥å‡å°‘ï¼‰"
    - "ä»»åŠ¡ç¼–è¾‘æ€»è€—æ—¶ï¼ˆåº”è¯¥å‡å°‘ï¼‰"
