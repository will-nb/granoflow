meta:
  id: "251201-projects-tag-style-unification"
  title: "标签样式统一化迭代蓝图"
  based_on: "documents/spec/projects/design/251201-tag-style-unification.yaml"
  status: draft
  owner: "AI Assistant"

scope:
  includes:
    - "项目创建表单的标签选择器"
    - "项目卡片和任务卡片的标签显示器"
    - "标签组件的样式统一"
  excludes:
    - "inbox页面的标签功能（已有ModernTag）"
    - "标签数据模型和Provider（无需修改）"
    - "标签配置和样式定义（已存在）"

changes:
  code_updates:
    - file: "lib/presentation/tasks/task_list_page.dart"
      type: modify
      intent: "将项目创建表单中的ChoiceChip替换为ModernTag组件，将_buildTagChip函数替换为ModernTag组件"
    - file: "lib/presentation/widgets/tag_data.dart"
      type: verify
      intent: "确认执行方式标签的样式配置已正确定义"
  
  data_model:
    - entity: "无数据模型变更"
      change: "仅UI组件替换，不涉及数据层修改"
  
  tests:
    - type: unit
      focus: "验证ModernTag组件在项目创建表单中的正确渲染和交互"
    - type: unit
      focus: "验证项目卡片和任务卡片中标签的正确显示"
    - type: widget
      focus: "验证标签选择器的交互逻辑（单选模式）"
  
  documentation:
    - path: "documents/spec/projects/design/251201-tag-style-unification.yaml"
      update_type: complete
    - path: "documents/spec/projects/iteration/251201-tag-style-unification.yaml"
      update_type: complete

risks:
  - name: "ModernTag组件的单选逻辑与ChoiceChip不同"
    mitigation: "仔细研究ModernTagGroup的multiSelect参数，确保单选行为正确"
  - name: "标签颜色和样式与inbox/tasks不一致"
    mitigation: "使用TagData中已定义的样式配置，确保颜色方案一致"
  - name: "布局变化影响用户体验"
    mitigation: "保持Wrap布局结构不变，仅替换组件实现"

verification:
  checklist:
    - "运行flutter analyze确保无静态分析错误"
    - "运行flutter test test/unit确保单元测试通过"
    - "运行flutter test test/presentation确保组件测试通过"
    - "在macOS上运行flutter test integration_test验证端到端功能"
    - "手动测试项目创建表单的标签选择功能"
    - "手动测试项目卡片和任务卡片的标签显示"
    - "对比inbox/tasks页面的标签样式确保一致性"
    - "验证标签选择逻辑（四象限单选，执行方式三选一）"