{
  // 回顾页面设计文档
  // 描述页面的视觉设计、布局、交互和动画效果
  
  // ===========================================
  // 1. 整体设计理念
  // ===========================================
  designPhilosophy: {
    // 与现有 Ocean Breeze theme 保持一致
    themeIntegration: {
      consistency: [
        "使用 Ocean Breeze 的蓝色系配色",
        "复用现有的渐变系统作为基础",
        "保持相同的字体系统和圆角规范",
        "与筛选器标签风格一致的标签设计",
      ],
    },
  },

  // ===========================================
  // 2. 页面开场动画 - 标签展示与消失
  // ===========================================
  openingAnimation: {
    // 动画目的：视觉吸引，展示页面的"回顾"定位
    purpose: "visual_attraction_and_branding",
    
    // 重要说明：这些标签仅用于视觉展示，不可交互
    interactionNote: "所有标签都是纯视觉效果，不提供点击交互。它们只是'广告'，用于展示页面定位，动画结束后最终只保留'回顾'标签",
    
    // 初始状态
    initialState: {
      // 显示标签列表（从左到右）
      labels: [
        "日报",
        "周报",
        "月报",
        "季报",
        "年报",
        "回顾",
      ],
      
      // 标签样式：参考筛选器里的情境标签风格
      labelStyle: {
        // 参考组件：ModernTag（pill 变体）
        reference: {
          component: "ModernTag",
          file: "lib/presentation/widgets/modern_tag.dart",
          variant: "TagVariant.pill",
          size: "TagSize.medium",
          usage: "参考 tag_filter_section.dart 中的使用方式",
          usageFile: "lib/presentation/widgets/task_tag_filter_strip/tag_filter_section.dart",
        },
        
        // 样式特点
        characteristics: [
          "圆角胶囊形状（borderRadius: 999）",
          "浅色背景（未选中状态：alpha 0.12）",
          "边框（未选中状态：alpha 0.2，宽度 1.0）",
          "选中状态：背景 alpha 0.20，边框 alpha 0.3，宽度 1.5",
          "中等字号（TagSize.medium）",
          "适当的内边距（根据 size 自动计算）",
          "标签之间有间距（8dp）",
          "无交互功能：这些标签仅用于视觉展示，不可点击（onTap 为 null）",
          "注意：标签在动画结束后会消失，最终只保留'回顾'标签，所以不需要交互",
        ],
      },
      
      // 布局：水平排列
      layout: {
        direction: "horizontal",
        alignment: "start", // 左对齐
        spacing: 8, // 标签之间的间距（dp）
        padding: {
          horizontal: 16,
          vertical: 16,
        },
      },
    },
    
    // 动画序列
    animationSequence: {
      // 阶段1：初始展示（1秒）
      phase1_initialDisplay: {
        duration: 1000, // 1秒
        description: "所有标签静态显示，用户可以看到所有选项",
        labelsVisible: ["日报", "周报", "月报", "季报", "年报", "回顾"],
      },
      
      // 阶段2：日报消失（带爆炸效果）
      phase2_dailyDisappear: {
        duration: 500, // 0.5秒动画
        target: "日报",
        effect: {
          type: "explosion",
          description: "爆炸效果，标签碎裂消失",
          // 爆炸效果细节
          explosionDetails: {
            // 粒子效果
            particles: {
              count: 8, // 粒子数量
              colors: [
                "使用标签的背景色",
                "使用标签的文字色",
                "使用主题的辅助色",
              ],
              // 粒子飞散方向：向四周扩散
              spreadDirection: "radial_outward",
              // 粒子大小：小到中等
              sizeRange: [2, 6], // dp
              // 粒子速度
              speedRange: [100, 300], // dp/s
            },
            
            // 动画曲线
            curve: "Curves.easeOut",
            
            // 透明度变化：从1到0
            opacity: "1.0_to_0.0",
            
            // 缩放效果：从1.0到0.0（可选，配合粒子效果）
            scale: "1.0_to_0.0",
          },
        },
        
        // 同时触发：其他标签向前滑动
        concurrentAction: {
          type: "slide_forward",
          targets: ["周报", "月报", "季报", "年报", "回顾"],
          direction: "left", // 向左滑动，填补日报的空缺
          distance: "calculated_based_on_daily_label_width_plus_spacing",
          duration: 500, // 与爆炸动画同步
          curve: "Curves.easeOut",
        },
      },
      
      // 阶段3：周报消失（带爆炸效果）
      phase3_weeklyDisappear: {
        duration: 500,
        target: "周报",
        effect: {
          type: "explosion",
          explosionDetails: {
            particles: {
              count: 8,
              colors: [
                "使用标签的背景色",
                "使用标签的文字色",
                "使用主题的辅助色",
              ],
              spreadDirection: "radial_outward",
              sizeRange: [2, 6],
              speedRange: [100, 300],
            },
            curve: "Curves.easeOut",
            opacity: "1.0_to_0.0",
            scale: "1.0_to_0.0",
          },
        },
        concurrentAction: {
          type: "slide_forward",
          targets: ["月报", "季报", "年报", "回顾"],
          direction: "left",
          distance: "calculated_based_on_weekly_label_width_plus_spacing",
          duration: 500,
          curve: "Curves.easeOut",
        },
      },
      
      // 阶段4：月报消失（带爆炸效果）
      phase4_monthlyDisappear: {
        duration: 500,
        target: "月报",
        effect: {
          type: "explosion",
          explosionDetails: {
            particles: {
              count: 8,
              colors: [
                "使用标签的背景色",
                "使用标签的文字色",
                "使用主题的辅助色",
              ],
              spreadDirection: "radial_outward",
              sizeRange: [2, 6],
              speedRange: [100, 300],
            },
            curve: "Curves.easeOut",
            opacity: "1.0_to_0.0",
            scale: "1.0_to_0.0",
          },
        },
        concurrentAction: {
          type: "slide_forward",
          targets: ["季报", "年报", "回顾"],
          direction: "left",
          distance: "calculated_based_on_monthly_label_width_plus_spacing",
          duration: 500,
          curve: "Curves.easeOut",
        },
      },
      
      // 阶段5：季报消失（带爆炸效果）
      phase5_quarterlyDisappear: {
        duration: 500,
        target: "季报",
        effect: {
          type: "explosion",
          explosionDetails: {
            particles: {
              count: 8,
              colors: [
                "使用标签的背景色",
                "使用标签的文字色",
                "使用主题的辅助色",
              ],
              spreadDirection: "radial_outward",
              sizeRange: [2, 6],
              speedRange: [100, 300],
            },
            curve: "Curves.easeOut",
            opacity: "1.0_to_0.0",
            scale: "1.0_to_0.0",
          },
        },
        concurrentAction: {
          type: "slide_forward",
          targets: ["年报", "回顾"],
          direction: "left",
          distance: "calculated_based_on_quarterly_label_width_plus_spacing",
          duration: 500,
          curve: "Curves.easeOut",
        },
      },
      
      // 阶段6：年报消失（带爆炸效果）
      phase6_yearlyDisappear: {
        duration: 500,
        target: "年报",
        effect: {
          type: "explosion",
          explosionDetails: {
            particles: {
              count: 8,
              colors: [
                "使用标签的背景色",
                "使用标签的文字色",
                "使用主题的辅助色",
              ],
              spreadDirection: "radial_outward",
              sizeRange: [2, 6],
              speedRange: [100, 300],
            },
            curve: "Curves.easeOut",
            opacity: "1.0_to_0.0",
            scale: "1.0_to_0.0",
          },
        },
        concurrentAction: {
          type: "slide_forward",
          targets: ["回顾"],
          direction: "left",
          distance: "calculated_based_on_yearly_label_width_plus_spacing",
          duration: 500,
          curve: "Curves.easeOut",
        },
      },
      
      // 阶段7：回顾标签选中状态（最终状态）
      phase7_finalState: {
        duration: 300, // 选中状态的过渡动画
        target: "回顾",
        effect: {
          type: "selection_highlight",
          description: "回顾标签切换到选中状态",
          // 选中状态样式
          selectedStyle: {
            // 背景色：使用主题的主色调（选中状态）
            backgroundColor: "Theme.colorScheme.primary",
            // 文字色：使用主题的 onPrimary 色
            textColor: "Theme.colorScheme.onPrimary",
            // 可选：轻微放大效果
            scale: 1.05, // 轻微放大5%
            // 可选：轻微阴影
            shadow: {
              enabled: true,
              color: "rgba(0, 0, 0, 0.2)",
              offset: [0, 2],
              blur: 4,
            },
          },
        },
      },
    },
    
    // 总动画时长
    totalDuration: 3800, // 1秒 + 5个0.5秒 + 0.3秒 = 3.8秒
    
    // 动画触发时机
    trigger: {
      // 页面加载完成后立即开始
      timing: "on_page_load",
      // 或者：页面首次可见时开始
      alternative: "on_page_first_visible",
    },
    
    // 动画控制
    control: {
      // 是否允许用户跳过动画（快速点击跳过）
      allowSkip: false, // 首次展示不应跳过，保证完整的品牌体验
      // 重复播放：每次进入页面都播放
      repeatOnPageEntry: true,
      // 或者：只在首次进入应用时播放一次
      alternative: "play_only_once_on_first_app_launch",
    },
  },

  // ===========================================
  // 3. 爆炸效果实现细节
  // ===========================================
  explosionEffect: {
    // 实现方式
    implementation: {
      // 方案1：使用 CustomPainter 绘制粒子
      approach1_customPainter: {
        description: "使用 CustomPainter 和 Canvas 绘制粒子效果",
        pros: [
          "完全控制粒子效果",
          "性能可控",
          "效果细腻",
        ],
        cons: [
          "实现复杂度较高",
          "需要手动管理粒子生命周期",
        ],
      },
      
      // 方案2：使用动画库（如 rive、lottie）
      approach2_animationLibrary: {
        description: "使用动画库（如 Rive、Lottie）",
        pros: [
          "实现简单",
          "效果丰富",
          "性能优化好",
        ],
        cons: [
          "需要额外的依赖",
          "文件大小增加",
        ],
      },
      
      // 方案3：使用多个小 Widget 的动画组合
      approach3_widgetAnimation: {
        description: "使用多个小 Widget（如 Container）配合 AnimatedWidget",
        pros: [
          "实现相对简单",
          "使用 Flutter 原生动画",
          "不需要额外依赖",
        ],
        cons: [
          "性能可能不如 CustomPainter",
          "粒子数量受限",
        ],
      },
      
      // 推荐方案：方案1（CustomPainter）
      recommended: "approach1_customPainter",
      reason: "完全控制效果，性能可控，效果细腻",
    },
    
    // 粒子系统设计
    particleSystem: {
      // 粒子类定义
      particleClass: {
        properties: [
          "position: Offset",
          "velocity: Offset",
          "size: double",
          "color: Color",
          "opacity: double",
          "lifetime: double", // 0.0 到 1.0
        ],
      },
      
      // 粒子生成
      particleGeneration: {
        // 生成位置：标签的中心点
        origin: "label_center",
        // 生成数量：8个粒子
        count: 8,
        // 生成方式：从中心点向四周随机方向
        method: "random_radial_from_center",
        // 初始速度：随机方向，随机大小
        initialVelocity: {
          angleRange: [0, 360], // 度
          speedRange: [100, 300], // dp/s
        },
      },
      
      // 粒子动画
      particleAnimation: {
        // 位置更新：基于速度
        positionUpdate: "velocity_based",
        // 速度衰减：可选（模拟重力或阻力）
        velocityDecay: {
          enabled: false, // 保持匀速，简化实现
          // 如果启用：
          // decayRate: 0.95, // 每帧速度衰减5%
        },
        // 透明度变化：从1.0到0.0
        opacityTransition: {
          from: 1.0,
          to: 0.0,
          curve: "Curves.easeOut",
        },
        // 大小变化：可选（从原始大小到0）
        sizeTransition: {
          enabled: true,
          from: "original_size",
          to: 0.0,
          curve: "Curves.easeOut",
        },
        // 生命周期：0.5秒
        lifetime: 0.5, // 秒
      },
      
      // 粒子颜色
      particleColors: {
        // 从标签的背景色和文字色中提取
        source: [
          "label_background_color",
          "label_text_color",
          "theme_primary_color",
        ],
        // 每个粒子随机选择颜色
        selection: "random_from_source",
      },
    },
    
    // 动画控制器
    animationController: {
      // 使用 AnimationController
      type: "AnimationController",
      // 持续时间：0.5秒
      duration: 500, // 毫秒
      // 使用 TickerProvider
      vsync: "TickerProviderStateMixin",
    },
  },

  // ===========================================
  // 4. 标签滑动动画实现
  // ===========================================
  slideAnimation: {
    // 实现方式
    implementation: {
      // 使用 AnimatedPositioned 或 AnimatedContainer
      widget: "AnimatedPositioned_or_AnimatedContainer",
      
      // 或者：使用 SlideTransition
      alternative: "SlideTransition",
    },
    
    // 动画参数
    animationParams: {
      // 滑动方向：向左
      direction: "left",
      // 滑动距离：消失标签的宽度 + 间距
      distance: "disappeared_label_width + spacing",
      // 持续时间：0.5秒（与爆炸动画同步）
      duration: 500, // 毫秒
      // 动画曲线
      curve: "Curves.easeOut",
    },
    
    // 布局计算
    layoutCalculation: {
      // 需要动态计算每个标签的位置
      method: "calculate_position_based_on_previous_labels",
      // 使用 GlobalKey 获取标签的实际宽度
      widthMeasurement: "use_GlobalKey_to_measure_label_width",
    },
  },

  // ===========================================
  // 5. 本地化支持
  // ===========================================
  localization: {
    // 标签文本需要本地化
    labels: {
      daily: "l10n.reviewLabelDaily", // 日报
      weekly: "l10n.reviewLabelWeekly", // 周报
      monthly: "l10n.reviewLabelMonthly", // 月报
      quarterly: "l10n.reviewLabelQuarterly", // 季报
      yearly: "l10n.reviewLabelYearly", // 年报
      review: "l10n.reviewLabelReview", // 回顾
    },
  },

  // ===========================================
  // 6. 性能优化考虑
  // ===========================================
  performance: {
    // 动画优化
    animationOptimization: {
      // 使用 RepaintBoundary 隔离动画区域
      repaintBoundary: true,
      
      // 粒子数量控制：不超过8个
      maxParticles: 8,
      
      // 动画结束后及时清理资源
      cleanup: "dispose_animation_controllers_after_completion",
    },
    
    // 首次加载优化
    loadingOptimization: {
      // 动画可以延迟到页面主要内容加载完成后再开始
      delayUntilContentReady: true,
      
      // 或者：立即开始动画，不等待内容加载
      alternative: "start_immediately_for_better_ux",
    },
  },

  // ===========================================
  // 7. 内容区域设计 - 逐行显示回顾内容
  // ===========================================
  contentArea: {
    // 显示时机：开场动画完成后
    displayTiming: {
      trigger: "after_opening_animation_complete",
      delay: 300, // 开场动画结束后延迟300ms开始显示内容
    },
    
    // 逐行显示动画
    lineByLineAnimation: {
      // 显示方式：逐行淡入（无滑动）
      effect: {
        type: "fade_in_only",
        // 每行动画时长
        duration: 600, // 毫秒
        // 动画曲线
        curve: "Curves.easeOut",
        // 行与行之间的延迟
        delayBetweenLines: 200, // 毫秒
      },
      
      // 动画细节
      animationDetails: {
        // 透明度：从0到1
        opacity: {
          from: 0.0,
          to: 1.0,
        },
        // 无位移：内容直接显示在最终位置，不滑动
        slideOffset: null,
      },
      
      // 布局说明
      layout: {
        // 逐行铺满页面：每行显示后，下一行紧接在下方显示
        description: "内容逐行显示，每行淡入后固定位置，下一行在其下方显示，最终形成完整文章",
      },
    },
    
    // 第一行：欢迎语
    line1_welcome: {
      // 显示内容
      content: {
        // 文本模板
        template: "欢迎您，今天是您使用本app的第{dayCount}天",
        // 本地化key
        l10nKey: "reviewWelcomeMessage",
        // 占位符
        placeholders: {
          dayCount: {
            type: "int",
            description: "用户使用app的天数",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 计算方式：从新建日期最早的task创建时间算起
        calculation: "days_since_earliest_task_creation",
        
        // 查询条件
        query: {
          // 查询所有task（包括所有状态）
          taskStatus: "all", // 包括：inbox, planned, completed, archived, trashed等所有状态
          
          // 包括伪删除的task
          includeDeleted: true, // trashed状态也算
          
          // 排序：按创建时间升序
          orderBy: "createdAt ASC",
          
          // 只取第一条（新建日期最早的）
          limit: 1,
        },
        
        // 计算逻辑
        calculationLogic: {
          step1: "查询新建日期最早的task（按createdAt排序，取第一条）",
          step2: "获取该task的createdAt时间",
          step3: "计算从createdAt到今天的天数差",
          step4: "如果task不存在（用户从未创建过task），显示为第1天",
          
          // 天数计算
          dayCountFormula: {
            // 如果最早task存在
            ifExists: "today - earliestTask.createdAt (以天为单位，向上取整)",
            // 如果最早task不存在
            ifNotExists: 1,
          },
          
          // 实现位置
          implementation: {
            repository: "TaskRepository",
            method: "findEarliestTask()",
            // 或者使用：查询所有task，按createdAt排序，取第一条
            alternative: "TaskRepository.listAll() -> sort by createdAt -> first",
          },
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 24, // sp
          fontWeight: "FontWeight.w600", // 半粗体
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 32, // 距离顶部（开场动画区域）32dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
    },
    
    // 第二行：统计信息
    line2_stats: {
      // 显示内容
      content: {
        // 文本模板
        template: "现在，您拥有{projectCount}个项目，{taskCount}个任务",
        // 本地化key
        l10nKey: "reviewStatsMessage",
        // 占位符
        placeholders: {
          projectCount: {
            type: "int",
            description: "项目总数",
          },
          taskCount: {
            type: "int",
            description: "任务总数",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 项目数量
        projectCount: {
          // 查询所有项目（不包括回收站）
          query: {
            // 查询所有项目（不包括trashed状态）
            includeAll: false, // 不包括所有状态
            excludeTrashed: true, // 排除回收站的项目
          },
          
          // 计算逻辑
          calculationLogic: {
            step1: "查询所有项目",
            step2: "过滤掉status为trashed的项目（回收站）",
            step3: "统计数量",
            
            // 实现位置
            implementation: {
              repository: "ProjectRepository",
              method: "listAll()",
              // 过滤掉trashed状态的项目
              filter: "projects.where((project) => project.status != TaskStatus.trashed)",
              calculation: "filteredProjects.length",
            },
          },
        },
        
        // 任务数量（只统计根任务，不包括子任务）
        taskCount: {
          // 查询所有任务（不包括回收站和伪删除）
          query: {
            // 查询所有任务（不包括trashed状态）
            taskStatus: "all_except_trashed", // 包括：inbox, planned, completed, archived（不包括trashed）
            
            // 不包括伪删除的任务
            includeDeleted: false, // trashed状态不算
            
            // 只统计根任务（parentId == null）
            parentId: null,
          },
          
          // 计算逻辑
          calculationLogic: {
            step1: "查询所有任务（排除trashed状态）",
            step2: "过滤掉status为trashed的任务",
            step3: "只统计根任务（parentId == null，不包括子任务）",
            step4: "统计数量",
            
            // 实现位置
            implementation: {
              repository: "TaskRepository",
              method: "listAll()",
              // 过滤掉trashed状态的任务，且只统计根任务（parentId == null）
              filter: "tasks.where((task) => task.status != TaskStatus.trashed && task.parentId == null)",
              calculation: "filteredTasks.length",
            },
          },
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp（比第一行稍小）
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
    },
    
    // 第三行：正在进行中的项目数量
    line3_activeProjectsCount: {
      // 显示内容
      content: {
        // 文本模板
        template: "其中，正在进行中的项目有{activeProjectCount}个，分别是：",
        // 本地化key
        l10nKey: "reviewActiveProjectsCountMessage",
        // 占位符
        placeholders: {
          activeProjectCount: {
            type: "int",
            description: "正在进行中的项目数量",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 正在进行中的项目数量
        activeProjectCount: {
          // 查询条件
          query: {
            // 查询正在进行中的项目（status为pending或doing）
            status: ["TaskStatus.pending", "TaskStatus.doing"],
            
            // 不包括回收站的项目
            excludeTrashed: true,
          },
          
          // 计算逻辑
          calculationLogic: {
            step1: "查询所有项目（排除trashed状态）",
            step2: "过滤出status为pending或doing的项目",
            step3: "统计数量",
            
            // 实现位置
            implementation: {
              repository: "ProjectRepository",
              method: "listAll()",
              // 过滤条件
              filter: "projects.where((project) => project.status != TaskStatus.trashed && (project.status == TaskStatus.pending || project.status == TaskStatus.doing))",
              calculation: "activeProjects.length",
            },
          },
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp（与第二行相同）
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 16, // 距离项目列表16dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当项目总数 > 0 且正在进行中的项目数量 > 0 时才显示这一行
        condition: "projectCount > 0 && activeProjectCount > 0",
      },
    },
    
    // 第三行替代：没有项目时的提示
    line3_noProjects: {
      // 显示内容
      content: {
        // 文本模板
        template: "您目前还没有创建项目",
        // 本地化key
        l10nKey: "reviewNoProjectsMessage",
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当项目总数 == 0 时才显示这一行
        condition: "projectCount == 0",
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp（与第三行相同）
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
    },
    
    // 第四行及之后：项目列表（循环显示）
    line4Plus_projectList: {
      // 显示方式：循环显示每个项目
      displayType: "loop",
      
      // 每个项目显示格式
      itemFormat: {
        // 文本模板
        template: "{projectName}：包含{taskCount}个任务",
        // 本地化key（如果需要）
        l10nKey: "reviewProjectItemFormat",
        // 占位符
        placeholders: {
          projectName: {
            type: "string",
            description: "项目名称",
          },
          taskCount: {
            type: "int",
            description: "该项目包含的任务数量",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 查询正在进行中的项目列表
        projects: {
          // 查询条件
          query: {
            // 查询正在进行中的项目（status为pending或doing）
            status: ["TaskStatus.pending", "TaskStatus.doing"],
            
            // 不包括回收站的项目
            excludeTrashed: true,
            
            // 排序：按创建时间或截止时间排序
            orderBy: "dueAt ASC, createdAt ASC",
          },
          
          // 计算逻辑
          calculationLogic: {
            step1: "查询所有项目（排除trashed状态）",
            step2: "过滤出status为pending或doing的项目",
            step3: "对每个项目，查询其包含的任务数量",
            step4: "按指定顺序排序",
            
            // 实现位置
            implementation: {
              repository: "ProjectRepository",
              method: "listAll()",
              // 过滤条件
              filter: "projects.where((project) => project.status != TaskStatus.trashed && (project.status == TaskStatus.pending || project.status == TaskStatus.doing))",
              // 排序
              sort: "sort by dueAt ASC, then by createdAt ASC",
            },
          },
        },
        
        // 每个项目的任务数量（只统计根任务，不包括子任务）
        taskCountPerProject: {
          // 计算逻辑
          calculationLogic: {
            step1: "对于每个项目，查询其projectId",
            step2: "查询所有任务，过滤出projectId匹配的任务",
            step3: "排除trashed状态的任务",
            step4: "只统计根任务（parentId == null，不包括子任务）",
            step5: "统计数量",
            
            // 实现位置
            implementation: {
              repository: "TaskRepository",
              method: "listAll()",
              // 过滤条件：项目匹配、排除trashed、只统计根任务（parentId == null）
              filter: "tasks.where((task) => task.projectId == project.projectId && task.status != TaskStatus.trashed && task.parentId == null)",
              calculation: "projectTasks.length",
            },
          },
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 18, // sp（比前面的行稍小）
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 16, // 距离上一行16dp（第一项）或8dp（后续项）
          betweenItems: 8, // 项目之间的间距
          bottom: 24, // 最后一项距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当项目总数 > 0 且正在进行中的项目数量 > 0 时才显示项目列表
        condition: "projectCount > 0 && activeProjectCount > 0",
      },
      
      // 空状态处理
      emptyState: {
        // 如果没有项目或没有正在进行中的项目，不显示项目列表
        display: false,
      },
    },
    
    // 独立任务统计行
    line_standaloneTasks: {
      // 显示内容
      content: {
        // 文本模板
        template: "您目前有{totalCount}条单独任务，其中正在进行的有{activeCount}条，已经完成的{completedCount}条，归档处理的{archivedCount}条",
        // 本地化key
        l10nKey: "reviewStandaloneTasksMessage",
        // 占位符
        placeholders: {
          totalCount: {
            type: "int",
            description: "独立任务总数（不包括回收站和伪删除）",
          },
          activeCount: {
            type: "int",
            description: "正在进行的独立任务数量（pending或doing状态）",
          },
          completedCount: {
            type: "int",
            description: "已完成的独立任务数量",
          },
          archivedCount: {
            type: "int",
            description: "归档处理的独立任务数量",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 独立任务定义：没有列入项目的根任务（projectId为null或空，且parentId == null）
        definition: {
          condition: "(task.projectId == null || task.projectId.isEmpty) && task.parentId == null",
        },
        
        // 查询条件
        query: {
          // 查询所有任务（不包括trashed状态）
          taskStatus: "all_except_trashed",
          
          // 不包括回收站和伪删除的任务
          includeDeleted: false,
          
          // 过滤条件：projectId为null或空，且parentId == null（只统计根任务）
          projectIdFilter: "projectId == null || projectId.isEmpty",
          parentIdFilter: "parentId == null",
        },
        
        // 统计逻辑
        calculationLogic: {
          step1: "查询所有任务（排除trashed状态）",
          step2: "过滤出projectId为null或空的任务（独立任务）",
          step3: "只统计根任务（parentId == null，不包括子任务）",
          step4: "统计总数",
          step5: "按状态分类统计：",
          step5a: "- 正在进行的：status为pending或doing",
          step5b: "- 已完成的：status为completedActive",
          step5c: "- 归档的：status为archived",
          
          // 实现位置
          implementation: {
            repository: "TaskRepository",
            method: "listAll()",
            // 过滤条件：独立任务（projectId为空）且是根任务（parentId == null）
            filter: "tasks.where((task) => task.status != TaskStatus.trashed && (task.projectId == null || task.projectId.isEmpty) && task.parentId == null)",
            // 统计
            totalCount: "standaloneTasks.length",
            activeCount: "standaloneTasks.where((task) => task.status == TaskStatus.pending || task.status == TaskStatus.doing).length",
            completedCount: "standaloneTasks.where((task) => task.status == TaskStatus.completedActive).length",
            archivedCount: "standaloneTasks.where((task) => task.status == TaskStatus.archived).length",
          },
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp（与第二行相同）
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当独立任务总数 > 0 时才显示这一行
        condition: "standaloneTaskCount > 0",
      },
    },
    
    // 已完成任务中执行时间最长的任务
    line_longestCompletedTask: {
      // 显示内容
      content: {
        // 文本模板
        template: "{date}，您遇到了一个非常让您困扰的问题：\"{taskTitle}\"，总计花费了{totalMinutes}分钟时间",
        // 本地化key
        l10nKey: "reviewLongestCompletedTaskMessage",
        // 占位符
        placeholders: {
          date: {
            type: "string",
            description: "任务创建日期，格式：x年x月x日",
            format: "YYYY年MM月DD日",
          },
          taskTitle: {
            type: "string",
            description: "任务标题",
          },
          totalMinutes: {
            type: "int",
            description: "任务总花费时间（分钟）",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 查找已完成任务中执行时间最长的任务
        longestCompletedTask: {
          // 查询条件
          query: {
            // 只查询已完成的任务
            taskStatus: "TaskStatus.completedActive",
            
            // 不包括回收站和伪删除的任务
            includeDeleted: false,
          },
          
          // 计算逻辑
          calculationLogic: {
            step1: "查询所有已完成的任务（completedActive状态，排除trashed）",
            step2: "对每个任务，调用 FocusSessionRepository.totalMinutesForTask(taskId) 计算总时间",
            step3: "找到执行时间最长的任务（totalMinutes最大值）",
            step4: "如果多个任务时间相同，选择创建时间最早的",
            
            // 实现位置
            implementation: {
              repository: {
                task: "TaskRepository.listAll().where((t) => t.status == TaskStatus.completedActive && t.status != TaskStatus.trashed)",
                focusSession: "FocusSessionRepository.totalMinutesForTask(taskId)",
              },
              // 计算方式
              calculation: "for each completed task: totalMinutes = FocusSessionRepository.totalMinutesForTask(task.id); find max(totalMinutes)",
              // 如果时间相同，按创建时间排序
              tiebreaker: "if multiple tasks have same totalMinutes, choose earliest createdAt",
            },
          },
        },
        
        // 日期格式化
        dateFormat: {
          // 格式：x年x月x日
          format: "YYYY年MM月DD日",
          source: "task.createdAt",
          // 使用本地时间
          timezone: "local",
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当找到已完成任务中执行时间最长的任务且 totalMinutes >= 120（2小时）时才显示这一行
        condition: "longestCompletedTask != null && longestCompletedTaskMinutes >= 120",
      },
    },
    
    // 已完成任务中没有超过2小时的任务时的提示
    line_noLongCompletedTask: {
      // 显示内容
      content: {
        // 文本模板
        template: "恭喜您，您的工作一番风顺，至今还没有遇到必须克服的难题。",
        // 本地化key
        l10nKey: "reviewNoLongCompletedTaskMessage",
      },
      
      // 条件显示
      conditionalDisplay: {
        // 当已完成任务中执行时间最长的任务 < 120分钟（2小时）或没有已完成任务时显示
        condition: "longestCompletedTask == null || longestCompletedTaskMinutes < 120",
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
    },
    
    // 完成根任务最多的一天
    line_mostCompletedRootTasksDay: {
      // 显示内容
      content: {
        // 文本模板
        template: "{date}，你有如神助，完成了{taskCount}个任务，总计花费时间{totalHours}小时",
        // 本地化key
        l10nKey: "reviewMostCompletedRootTasksDayMessage",
        // 占位符
        placeholders: {
          date: {
            type: "string",
            description: "完成根任务最多的日期，格式：x年x月x日",
            format: "YYYY年MM月DD日",
          },
          taskCount: {
            type: "int",
            description: "那一天完成的根任务数量",
          },
          totalHours: {
            type: "double",
            description: "那一天所有根任务的总花费时间（小时，保留1位小数）",
            format: "{value.toStringAsFixed(1)}",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 查找完成根任务最多的一天
        mostCompletedRootTasksDay: {
          // 查询条件
          query: {
            // 只查询已完成的根任务（parentId == null）
            taskStatus: "TaskStatus.completedActive",
            parentId: null,
            
            // 不包括回收站和伪删除的任务
            includeDeleted: false,
            
            // 必须有完成时间（endedAt不为空）
            hasEndedAt: true,
          },
          
          // 计算逻辑
          calculationLogic: {
            step1: "查询所有已完成的根任务（status == completedActive, parentId == null, endedAt != null, 排除trashed）",
            step2: "按完成日期（endedAt的本地日期）分组",
            step3: "统计每一天完成的根任务数量",
            step4: "找到完成数量最多的一天",
            step5: "计算那一天所有根任务的总花费时间：对每个任务调用 FocusSessionRepository.totalMinutesForTask(taskId)，累加后转换为小时",
            
            // 实现位置
            implementation: {
              repository: {
                task: "TaskRepository.listAll().where((t) => t.status == TaskStatus.completedActive && t.parentId == null && t.endedAt != null && t.status != TaskStatus.trashed)",
                focusSession: "FocusSessionRepository.totalMinutesForTask(taskId)",
              },
              // 计算方式
              calculation: [
                "1. 查询所有已完成的根任务",
                "2. 按 endedAt.toLocal().date 分组",
                "3. 对每个分组：",
                "   - 统计任务数量",
                "   - 计算总时间：sum(FocusSessionRepository.totalMinutesForTask(task.id) for each task in group)",
                "4. 找到任务数量最多的分组",
                "5. 如果多个日期任务数相同，选择总时间最长的日期",
              ],
              // 时间格式
              timeFormat: "总时间（分钟）转换为小时，保留1位小数：totalHours = (totalMinutes / 60).toStringAsFixed(1)",
            },
          },
        },
        
        // 日期格式化
        dateFormat: {
          // 格式：x年x月x日
          format: "YYYY年MM月DD日",
          source: "mostCompletedRootTasksDate（endedAt的本地日期）",
          // 使用本地时间
          timezone: "local",
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当找到完成根任务最多的一天且任务数 > 0 时才显示这一行
        condition: "mostCompletedRootTasksDate != null && mostCompletedRootTasksCount > 0",
      },
    },
    
    // 归档任务中执行时间最长的任务
    line_longestArchivedTask: {
      // 显示内容
      content: {
        // 文本模板
        template: "{date}，您遇到了一个非常让您困扰的问题：\"{taskTitle}\"，总计花费了{totalMinutes}分钟时间",
        // 本地化key
        l10nKey: "reviewLongestArchivedTaskMessage",
        // 占位符
        placeholders: {
          date: {
            type: "string",
            description: "任务创建日期，格式：x年x月x日",
            format: "YYYY年MM月DD日",
          },
          taskTitle: {
            type: "string",
            description: "任务标题",
          },
          totalMinutes: {
            type: "int",
            description: "任务总花费时间（分钟）",
          },
        },
      },
      
      // 数据来源
      dataSource: {
        // 查找归档任务中执行时间最长的任务
        longestArchivedTask: {
          // 查询条件
          query: {
            // 只查询归档的任务
            taskStatus: "TaskStatus.archived",
            
            // 不包括回收站和伪删除的任务
            includeDeleted: false,
          },
          
          // 计算逻辑
          calculationLogic: {
            step1: "查询所有归档的任务（archived状态，排除trashed）",
            step2: "对每个任务，调用 FocusSessionRepository.totalMinutesForTask(taskId) 计算总时间",
            step3: "找到执行时间最长的任务（totalMinutes最大值）",
            step4: "如果多个任务时间相同，选择创建时间最早的",
            
            // 实现位置
            implementation: {
              repository: {
                task: "TaskRepository.listAll().where((t) => t.status == TaskStatus.archived && t.status != TaskStatus.trashed)",
                focusSession: "FocusSessionRepository.totalMinutesForTask(taskId)",
              },
              // 计算方式
              calculation: "for each archived task: totalMinutes = FocusSessionRepository.totalMinutesForTask(task.id); find max(totalMinutes)",
              // 如果时间相同，按创建时间排序
              tiebreaker: "if multiple tasks have same totalMinutes, choose earliest createdAt",
            },
          },
        },
        
        // 日期格式化
        dateFormat: {
          // 格式：x年x月x日
          format: "YYYY年MM月DD日",
          source: "task.createdAt",
          // 使用本地时间
          timezone: "local",
        },
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当找到归档任务中执行时间最长的任务且 totalMinutes > 0 时才显示这一行
        condition: "longestArchivedTask != null && longestArchivedTaskMinutes > 0",
      },
    },
    
    // 已完成任务中执行时间最长任务的分析
    line_longestCompletedTaskAnalysis: {
      // 显示内容
      content: {
        // 文本模板
        template: "最终，您认真分析和拆分任务，凭借自己的努力解决了这个问题。",
        // 本地化key
        l10nKey: "reviewLongestCompletedTaskCompletionMessage",
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当找到已完成任务中执行时间最长的任务且花费时间 >= 120（2小时）时才显示
        condition: "longestCompletedTask != null && longestCompletedTaskMinutes >= 120",
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 16, // 距离任务分析16dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
    },
    
    // 归档任务中执行时间最长任务的归档提示
    line_longestArchivedTaskMessage: {
      // 显示内容
      content: {
        // 文本模板
        template: "您明智地决定放弃这个任务，把时间和精力放到更重要的地方。人生中，选择往往比努力更加重要。恭喜你，再次节约了宝贵的时间和精力。",
        // 本地化key
        l10nKey: "reviewLongestArchivedTaskMessage",
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当找到归档任务中执行时间最长的任务且花费时间 > 0 时才显示
        condition: "longestArchivedTask != null && longestArchivedTaskMinutes > 0",
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 24, // 距离上一行24dp
          bottom: 24, // 距离下一行24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
    },
    
    // 结束语
    line_closingMessage: {
      // 显示内容
      content: {
        // 文本模板
        template: "今天又是新的一天，让我们继续努力，迎接美好的明天。",
        // 本地化key
        l10nKey: "reviewClosingMessage",
      },
      
      // 条件显示
      conditionalDisplay: {
        // 始终显示（无条件）
        condition: "true",
      },
      
      // 样式
      style: {
        // 字体
        typography: {
          fontSize: 20, // sp
          fontWeight: "FontWeight.w400", // 常规字重
          color: "Theme.of(context).colorScheme.onSurface",
        },
        
        // 间距
        spacing: {
          top: 32, // 距离上一行32dp（稍大一些，作为结尾的视觉分隔）
          bottom: 24, // 距离底部24dp
        },
        
        // 对齐
        alignment: "TextAlign.start", // 左对齐
      },
    },
    
    // 已完成任务中执行时间最长任务的分析和子任务列表
    line_longestCompletedTaskDetails: {
      // 显示方式：多行显示（任务分析 + 子任务列表）
      displayType: "multiline",
      
      // 任务分析部分
      taskAnalysis: {
        // 显示条件：任务有描述（description不为空）且花费时间 >= 120（2小时）
        conditionalDisplay: {
          condition: "longestCompletedTask != null && longestCompletedTaskMinutes >= 120 && longestCompletedTask.description != null && longestCompletedTask.description.isNotEmpty",
        },
        
        // 显示内容
        content: {
          // 文本模板
          template: "任务分析：{taskDescription}",
          // 本地化key
          l10nKey: "reviewLongestTaskAnalysisLabel",
          // 占位符
          placeholders: {
            taskDescription: {
              type: "string",
              description: "任务描述（task.description）",
            },
          },
        },
        
        // 样式
        style: {
          // 字体
          typography: {
            fontSize: 18, // sp
            fontWeight: "FontWeight.w400", // 常规字重
            color: "Theme.of(context).colorScheme.onSurface",
          },
          
          // 间距
          spacing: {
            top: 16, // 距离上一行16dp
            bottom: 16, // 距离子任务列表16dp
          },
          
          // 对齐
          alignment: "TextAlign.start", // 左对齐
        },
      },
      
      // 子任务列表部分
      subtasks: {
        // 显示条件：任务有子任务且花费时间 >= 120（2小时）
        conditionalDisplay: {
          condition: "longestCompletedTask != null && longestCompletedTaskMinutes >= 120 && longestCompletedTaskHasSubtasks == true",
        },
        
        // 显示方式：循环显示每个子任务
        displayType: "loop",
        
        // 每个子任务显示格式
        itemFormat: {
          // 文本模板
          template: "子任务：{subtaskTitle}{subtaskAnalysis}",
          // 本地化key
          l10nKey: "reviewLongestCompletedTaskSubtaskFormat",
          // 占位符
          placeholders: {
            subtaskTitle: {
              type: "string",
              description: "子任务标题",
            },
            subtaskAnalysis: {
              type: "string",
              description: "子任务分析（如果有description则显示，否则为空）",
              conditional: "subtask.description != null && subtask.description.isNotEmpty ? '：' + subtask.description : ''",
            },
          },
        },
        
        // 数据来源
        dataSource: {
          // 查询子任务
          subtasks: {
            // 查询条件
            query: {
              // 查询所有任务（排除trashed状态）
              taskStatus: "all_except_trashed",
              
              // 过滤条件：parentId == longestCompletedTask.id
              parentIdFilter: "task.parentId == longestCompletedTask.id",
            },
            
            // 计算逻辑
            calculationLogic: {
              step1: "查询所有任务（排除trashed状态）",
              step2: "过滤出parentId == longestCompletedTask.id的子任务",
              step3: "按创建时间或排序索引排序",
              
              // 实现位置
              implementation: {
                repository: "TaskRepository.listChildren(longestCompletedTask.id)",
                // 或者：查询所有任务，过滤 parentId == longestCompletedTask.id
                alternative: "TaskRepository.listAll() -> filter parentId == longestCompletedTask.id",
              },
            },
          },
        },
        
        // 样式
        style: {
          // 字体
          typography: {
            fontSize: 18, // sp（与任务分析相同）
            fontWeight: "FontWeight.w400", // 常规字重
            color: "Theme.of(context).colorScheme.onSurface",
          },
          
          // 间距
          spacing: {
            top: 16, // 距离上一行16dp（第一项）
            betweenItems: 12, // 子任务之间的间距
            bottom: 24, // 最后一项距离下一行24dp
          },
          
          // 对齐
          alignment: "TextAlign.start", // 左对齐
          
          // 缩进：子任务可以稍微缩进，表示层级关系
          indent: 16, // dp（可选）
        },
      },
      
      // 条件显示
      conditionalDisplay: {
        // 只有当任务已完成且花费时间 > 0 时才显示
        condition: "longestTask != null && longestTaskMinutes > 0 && longestTask.status == TaskStatus.completedActive",
      },
    },
    
    // 内容区域布局
    layout: {
      // 容器
      container: {
        // 使用ScrollView包裹，支持滚动查看完整内容
        scrollable: true,
        // 使用Padding包裹
        padding: {
          horizontal: 16,
          vertical: 0,
        },
        // 宽度：全宽
        width: "double.infinity",
        // 对齐：左对齐
        alignment: "Alignment.centerLeft",
      },
      
      // 内容顺序（从上到下）
      contentOrder: [
        "line1_welcome",
        "line2_stats",
        // 条件分支：
        // - 如果 projectCount > 0 && activeProjectCount > 0：显示 line3_activeProjectsCount 和 line4Plus_projectList
        // - 如果 projectCount == 0：显示 line3_noProjects
        // - 如果 projectCount > 0 && activeProjectCount == 0：不显示任何项目相关行（后续可以添加其他内容）
        "line3_activeProjectsCount", // 条件显示：projectCount > 0 && activeProjectCount > 0
        "line3_noProjects", // 条件显示：projectCount == 0
        "line4Plus_projectList", // 循环显示：每个项目一行，条件显示：projectCount > 0 && activeProjectCount > 0
        "line_standaloneTasks", // 条件显示：standaloneTaskCount > 0
        // 已完成任务中执行时间最长的任务（条件分支）
        // - 如果 longestCompletedTaskMinutes >= 120（2小时）：显示 line_longestCompletedTask, line_longestCompletedTaskAnalysis, line_longestCompletedTaskDetails
        // - 如果 longestCompletedTaskMinutes < 120 或没有已完成任务：显示 line_noLongCompletedTask
        "line_longestCompletedTask", // 条件显示：longestCompletedTaskMinutes >= 120
        "line_longestCompletedTaskAnalysis", // 条件显示：longestCompletedTaskMinutes >= 120
        "line_longestCompletedTaskDetails", // 条件显示：longestCompletedTaskMinutes >= 120（包含任务分析和子任务列表）
        "line_noLongCompletedTask", // 条件显示：longestCompletedTaskMinutes < 120 或 longestCompletedTask == null
        // 完成根任务最多的一天（如果存在）
        "line_mostCompletedRootTasksDay", // 条件显示：mostCompletedRootTasksDate != null && mostCompletedRootTasksCount > 0
        // 归档任务中执行时间最长的任务（如果存在）
        "line_longestArchivedTask", // 条件显示：longestArchivedTaskMinutes > 0
        "line_longestArchivedTaskMessage", // 条件显示：longestArchivedTaskMinutes > 0
        // 结束语（始终显示）
        "line_closingMessage",
      ],
      
      // 最终显示效果
      finalDisplay: {
        description: "所有内容逐行淡入后，形成一篇完整的文章，铺满页面（可滚动查看）",
      },
    },
  },

  // ===========================================
  // 8. 文章复制和导出功能
  // ===========================================
  articleActions: {
    // 功能说明
    description: "文章显示完成后，提供复制和导出功能",
    
    // 显示时机
    displayTiming: {
      trigger: "after_all_content_displayed",
      // 延迟显示操作按钮，让用户有时间阅读内容
      delay: 500, // 毫秒
    },
    
    // 操作按钮
    actionButtons: {
      // 复制功能
      copy: {
        // 显示位置：页面底部固定（或浮动按钮）
        position: "bottom_fixed_or_floating",
        
        // 按钮样式
        style: {
          type: "IconButton_or_FloatingActionButton",
          icon: "Icons.copy_outlined",
          label: "复制文章",
        },
        
        // 复制内容
        content: {
          // 生成完整的文章文本
          generation: {
            // 将所有行内容拼接成完整文章
            method: "concatenate_all_lines_with_newlines",
            // 格式：每行之间用换行符分隔
            format: "plain_text_with_line_breaks",
          },
          
          // 复制到剪贴板
          action: {
            // 使用 Flutter 的 Clipboard.setData
            method: "Clipboard.setData",
            data: "完整文章文本",
          },
        },
        
        // 反馈提示
        feedback: {
          // 复制成功后显示提示
          type: "SnackBar",
          message: "文章已复制到剪贴板",
          duration: 2000, // 毫秒
        },
      },
      
      // 导出功能
      export: {
        // 显示位置：页面底部固定（或浮动按钮）
        position: "bottom_fixed_or_floating",
        
        // 按钮样式
        style: {
          type: "IconButton_or_FloatingActionButton",
          icon: "Icons.download_outlined",
          label: "导出文章",
        },
        
        // 导出格式
        formats: {
          // 格式1：文本文件（.txt）
          txt: {
            description: "导出为纯文本文件",
            mimeType: "text/plain",
            extension: ".txt",
          },
          
          // 格式2：Markdown文件（.md）
          markdown: {
            description: "导出为Markdown格式文件",
            mimeType: "text/markdown",
            extension: ".md",
          },
        },
        
        // 导出方式
        exportMethod: {
          // 使用文件分享或保存功能
          method: "share_or_save_file",
          // 平台支持：iOS ShareSheet, Android Share Intent, 或文件保存对话框
          platforms: ["iOS ShareSheet", "Android Share Intent", "Desktop File Save Dialog"],
        },
        
        // 文件命名
        fileName: {
          // 格式：回顾_YYYY-MM-DD.txt 或 回顾_YYYY-MM-DD.md
          template: "回顾_{date}.{extension}",
          dateFormat: "YYYY-MM-DD",
        },
      },
    },
    
    // 布局
    layout: {
      // 按钮位置：底部固定栏或浮动按钮组
      position: "bottom_fixed_bar_or_floating_action_buttons",
      
      // 按钮排列
      arrangement: {
        // 方案1：水平排列在底部固定栏
        option1: "horizontal_row_in_bottom_bar",
        // 方案2：浮动按钮组
        option2: "floating_action_button_group",
      },
    },
  },

  // ===========================================
  // 9. 待确认问题
  // ===========================================
  openQuestions: [
    {
      question: "动画是否每次进入页面都播放？",
      description: "每次进入回顾页面都播放开场动画，还是只在首次进入应用时播放一次？",
      options: [
        "每次进入页面都播放",
        "只在首次进入应用时播放一次",
        "用户可以选择是否播放",
      ],
      recommendation: "每次进入页面都播放，保证品牌体验的一致性",
    },
    {
      question: "动画是否可以跳过？",
      description: "用户是否可以快速点击跳过动画？",
      options: [
        "可以跳过",
        "不可以跳过（必须看完完整动画）",
      ],
      recommendation: "不可以跳过，保证完整的品牌体验",
    },
    {
      question: "标签样式参考位置",
      description: "筛选器里的情境标签的具体实现位置在哪里？",
      options: [
        "ModernTag 组件（lib/presentation/widgets/modern_tag.dart）",
        "TagVariant.pill 变体，TagSize.medium 尺寸",
        "参考 tag_filter_section.dart 中的使用方式",
      ],
      confirmed: true,
      confirmedAnswer: "使用 ModernTag 组件，TagVariant.pill 变体，TagSize.medium 尺寸",
    },
    {
      question: "爆炸效果实现方案",
      description: "最终选择哪种实现方案？CustomPainter 还是动画库？",
      options: [
        "CustomPainter（推荐）",
        "动画库（Rive/Lottie）",
        "Widget 动画组合",
      ],
      recommendation: "CustomPainter，完全控制效果，性能可控",
    },
  ],
}
