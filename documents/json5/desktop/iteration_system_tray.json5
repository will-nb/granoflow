{
  // ===========================================
  // ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½è¿­ä»£è“å›¾
  // åŸºäº design_system_tray.json5 å®ç°ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡å’Œèœå•åŠŸèƒ½
  // ===========================================
  
  // ===========================================
  // 1. è¿­ä»£æ¦‚è¿°ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  iteration: {
    // è¿­ä»£ IDï¼šæ ¼å¼ YYMMDD-module-slug
    id: "251114-desktop-system-tray",
    
    // è¿­ä»£æ ‡é¢˜
    title: "ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼šå®ç°è·¨å¹³å°ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡å’Œèœå•",
    
    // è¿­ä»£æè¿°
    description: "åŸºäºè®¾è®¡æ–‡æ¡£å®ç°ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼šç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡è®¾ç½®ã€åŠ¨æ€èœå•æ„å»ºï¼ˆè®¡æ—¶å™¨çŠ¶æ€ã€å¿«é€Ÿæ·»åŠ ä»»åŠ¡ã€ä»»åŠ¡åˆ—è¡¨ã€è®¾ç½®ã€é€€å‡ºï¼‰ã€èœå•é¡¹ç‚¹å‡»äº‹ä»¶å¤„ç†ï¼ˆä»»åŠ¡çŠ¶æ€åˆ‡æ¢ã€å¼€å§‹è®¡æ—¶ã€æ‰“å¼€ä»»åŠ¡è¯¦æƒ…ã€å®Œæˆä»»åŠ¡å¹¶å–æ¶ˆç½®é¡¶ã€æ‰“å¼€è®¾ç½®ã€é€€å‡ºåº”ç”¨ï¼‰ã€çª—å£ç®¡ç†é›†æˆï¼ˆæ‰“å¼€/æ¢å¤çª—å£ï¼‰ã€ä»»åŠ¡æ•°æ®ç›‘å¬ï¼ˆå®æ—¶æ›´æ–°èœå•ï¼‰ã€‚è®¡æ—¶å™¨æ˜¾ç¤ºé‡‡ç”¨ HH:MM æ ¼å¼ï¼Œåªåœ¨ç”¨æˆ·ç‚¹å‡»æ‰˜ç›˜ä»¥åˆ·æ–°èœå•æ—¶æ‰è¯»å–æœ€æ–°è€—æ—¶ï¼Œä¸å†æ¯ç§’åˆ·æ–°ï¼›é€¾æœŸå’Œä»Šæ—¥ä»»åŠ¡å„æœ€å¤šå±•ç¤º 20 æ¡ï¼Œå…¶ä½™ä»»åŠ¡é€šè¿‡â€œæ›´å¤šä»»åŠ¡â€äºŒçº§èœå•å‘ˆç°ã€‚æ”¯æŒ Windows/Linux/macOS è·¨å¹³å°ï¼Œç¬¦åˆ2025å¹´ç°ä»£åŒ–è®¾è®¡è¶‹åŠ¿ã€‚",
    
    // çŠ¶æ€
    status: "planning",
    
    // ä¼˜å…ˆçº§
    priority: "high",
    
    // åŸºäºçš„è®¾è®¡æ–‡æ¡£
    basedOnDesign: "documents/json5/desktop/design_system_tray.json5",
  },

  // ===========================================
  // 2. æ–‡ä»¶åˆ›å»ºæ¸…å•ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  files: {
    // æœåŠ¡å±‚ï¼šç³»ç»Ÿæ‰˜ç›˜æœåŠ¡
    services: [
      {
        path: "lib/core/services/system_tray_service.dart",
        purpose: "ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡ï¼Œå°è£… tray_manager å’Œ window_manager çš„åŠŸèƒ½ï¼Œæä¾›ç»Ÿä¸€çš„ç³»ç»Ÿæ‰˜ç›˜ç®¡ç†æ¥å£",
        action: "create",
        estimatedLines: 400,
          dependencies: [
            "package:tray_manager/tray_manager.dart",
            "package:window_manager/window_manager.dart",
            "package:flutter/material.dart",
            "package:dart:io",
            "lib/core/providers/task_query_providers.dart",
            "lib/core/providers/pinned_task_provider.dart",
            "lib/core/providers/focus_providers.dart",
            "lib/core/providers/service_providers.dart",
            "lib/presentation/navigation/app_router.dart",
            "lib/presentation/widgets/utils/task_bottom_sheet_helper.dart",
            "lib/presentation/tasks/quick_tasks/quick_add_sheet.dart",
            "lib/core/app.dart",
          ],
        details: [
          "SystemTrayService ç±»ï¼šå•ä¾‹æœåŠ¡ï¼Œç®¡ç†ç³»ç»Ÿæ‰˜ç›˜ç”Ÿå‘½å‘¨æœŸ",
          "å±æ€§ï¼š",
          "  - ref: Refï¼ˆRiverpod å¼•ç”¨ï¼Œç”¨äºè®¿é—® providersï¼‰",
          "  - _trayManager: TrayManagerï¼ˆtray_manager å®ä¾‹ï¼‰",
          "  - _windowManager: WindowManagerï¼ˆwindow_manager å®ä¾‹ï¼‰",
          "  - _navigatorKey: GlobalKey<NavigatorState>ï¼ˆç”¨äºè·å– BuildContextï¼‰",
          "  - _menuUpdateDebounceTimer: Timer?ï¼ˆèœå•æ›´æ–°é˜²æŠ–å®šæ—¶å™¨ï¼‰",
          "  - _disposed: boolï¼ˆæ˜¯å¦å·²é”€æ¯ï¼‰",
          "åˆå§‹åŒ–æ–¹æ³•ï¼šinit(GlobalKey<NavigatorState> navigatorKey) - è®¾ç½®æ‰˜ç›˜å›¾æ ‡ã€åˆ›å»ºåˆå§‹èœå•ã€æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨",
          "  - æ£€æµ‹è¿è¡Œå¹³å°ï¼ˆä½¿ç”¨ dart:io Platform.isWindowsã€Platform.isLinuxã€Platform.isMacOSï¼‰",
          "  - æ ¹æ®å¹³å°é€‰æ‹©å›¾æ ‡è·¯å¾„ï¼ˆWindows: assets/logo/app_icon.icoï¼ŒmacOS/Linux: assets/logo/granostack-logo-transparent.pngï¼‰",
          "  - è®¾ç½®æ‰˜ç›˜å›¾æ ‡ï¼šawait trayManager.setIcon(iconPath)",
          "  - è®¾ç½®å·¥å…·æç¤ºï¼šawait trayManager.setToolTip('GranoFlow')",
          "  - åˆ›å»ºåˆå§‹èœå•ï¼šawait buildMenu()",
          "  - æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ï¼štrayManager.addListener(TrayListener(...))",
          "  - å¯åŠ¨æ•°æ®ç›‘å¬",
          "èœå•æ„å»ºæ–¹æ³•ï¼šbuildMenu() - æ ¹æ®å½“å‰çŠ¶æ€åŠ¨æ€æ„å»ºèœå•ï¼ˆè®¡æ—¶å™¨çŠ¶æ€ã€ä»»åŠ¡åˆ—è¡¨ã€æ“ä½œé¡¹ï¼‰",
          "  - è°ƒç”¨ TrayMenuBuilder çš„æ–¹æ³•æ„å»ºå„ä¸ªèœå•é¡¹",
          "  - å¤„ç†æ¡ä»¶æ˜¾ç¤ºé€»è¾‘ï¼ˆè®¡æ—¶å™¨çŠ¶æ€ã€åˆ†éš”çº¿ç­‰ï¼‰",
          "  - è®¡æ—¶å™¨çŠ¶æ€å±•ç¤ºé‡‡ç”¨ HH:MMï¼ˆä¸è¶³ 1 å°æ—¶åŒæ ·è¡¥é›¶æ˜¾ç¤ºï¼‰ï¼Œä»…åœ¨ç”¨æˆ·ç‚¹å‡»æ‰˜ç›˜è§¦å‘èœå•æ„å»ºæ—¶è¯»å–æœ€æ–° elapsedï¼Œä¸å†åå°æŒ‰ç§’åˆ·æ–°",
          "  - ä½¿ç”¨é˜²æŠ–æœºåˆ¶ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„æ›´æ–°ï¼ˆæœ€å¤šæ¯ 500ms æ›´æ–°ä¸€æ¬¡ï¼‰",
          "èœå•æ›´æ–°æ–¹æ³•ï¼šupdateMenu() - æ›´æ–°èœå•å†…å®¹ï¼ˆä»»åŠ¡åˆ—è¡¨å˜åŒ–ã€è®¡æ—¶å™¨çŠ¶æ€å˜åŒ–ï¼‰",
          "  - ä½¿ç”¨é˜²æŠ–ï¼ˆdebounceï¼‰æœºåˆ¶ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„æ›´æ–°",
          "  - ä½¿ç”¨ DebounceUtil.debounce() å®ç°é˜²æŠ–ï¼ˆå¤ç”¨é€šç”¨å·¥å…·ç±»ï¼‰",
          "  - é˜²æŠ–å»¶è¿Ÿï¼š500ms",
          "  - å¦‚æœ _disposed ä¸º trueï¼Œä¸æ‰§è¡Œæ›´æ–°",
          "äº‹ä»¶å¤„ç†æ–¹æ³•ï¼š",
          "  - handleMenuItemClick(MenuItem menuItem) - ä¸»äº‹ä»¶å¤„ç†æ–¹æ³•ï¼Œæ ¹æ®èœå•é¡¹ key åˆ†å‘åˆ°å…·ä½“å¤„ç†æ–¹æ³•",
          "  - handleTimerStatusClick() - å¤„ç†è®¡æ—¶å™¨çŠ¶æ€ç‚¹å‡»ï¼ˆå®Œæˆä»»åŠ¡å¹¶å–æ¶ˆç½®é¡¶ï¼‰",
          "    * è°ƒç”¨ taskService.markCompleted(taskId)",
          "    * è°ƒç”¨ pinnedTaskIdProvider.setPinnedTaskId(null)",
          "    * è°ƒç”¨ focusActionsNotifierProvider.stop(taskId)",
          "  - handleTaskClick(String taskId) - å¤„ç†ä»»åŠ¡é¡¹ç‚¹å‡»ï¼ˆåˆ‡æ¢ä»»åŠ¡çŠ¶æ€ï¼šâ˜â†’â˜‘â†’â˜’â†’â˜ï¼‰",
          "    * è·å–ä»»åŠ¡æ•°æ®ï¼ˆé€šè¿‡ taskByIdProviderï¼‰",
          "    * è°ƒç”¨ TaskStatusToggleHelper.toggleTaskStatusThreeState() è¿›è¡Œä¸‰æ€åˆ‡æ¢",
          "    * å¤ç”¨ç°æœ‰çš„ä»»åŠ¡çŠ¶æ€åˆ‡æ¢é€»è¾‘ï¼Œé¿å…é‡å¤ä»£ç ",
          "  - handleTaskSubmenuClick(String taskId, String action) - å¤„ç†ä»»åŠ¡å­èœå•ç‚¹å‡»ï¼ˆå¼€å§‹è®¡æ—¶ã€æ‰“å¼€ä»»åŠ¡ï¼‰",
          "    * action='start_timer': è°ƒç”¨ taskService.markInProgress()ã€setPinnedTaskId()ã€focusActionsNotifierProvider.start()",
          "    * action='open_task': è°ƒç”¨ showWindow()ã€navigateToTaskPage()ã€showTaskDetail()",
          "  - handleQuickAddClick() - å¤„ç†å¿«é€Ÿæ·»åŠ ä»»åŠ¡ç‚¹å‡»",
          "    * è°ƒç”¨ showWindow()",
          "    * ä½¿ç”¨ navigatorKey.currentContext è·å– context",
          "    * è°ƒç”¨ QuickAddSheetHelper.showQuickAddSheet() æ˜¾ç¤ºå¼¹çª—ï¼ˆå¤ç”¨æå–çš„é€šç”¨æ–¹æ³•ï¼‰",
          "  - handleSettingsClick() - å¤„ç†è®¾ç½®ç‚¹å‡»",
          "    * è°ƒç”¨ showWindow()",
          "    * å¯¼èˆªåˆ° /settingsï¼ˆä½¿ç”¨ AppRouter.router.go('/settings')ï¼‰",
          "  - handleQuitClick() - å¤„ç†é€€å‡ºç‚¹å‡»",
          "    * æ¸…ç†èµ„æºï¼ˆåœæ­¢è®¡æ—¶å™¨ã€ä¿å­˜æ•°æ®ç­‰ï¼‰",
          "    * æ ¹æ®å¹³å°è°ƒç”¨é€€å‡ºæ–¹æ³•ï¼š",
          "      - macOS: ä½¿ç”¨ NSApplication.sharedApplication().terminate(nil)ï¼ˆé€šè¿‡ platform channelï¼‰æˆ– exit(0)",
          "      - Windows/Linux: ä½¿ç”¨ dart:io exit(0)",
          "çª—å£ç®¡ç†æ–¹æ³•ï¼š",
          "  - showWindow() - æ˜¾ç¤º/æ¢å¤çª—å£ï¼ˆä½¿ç”¨ window_managerï¼‰",
          "    * æ£€æŸ¥çª—å£çŠ¶æ€ï¼šawait windowManager.isVisible()",
          "    * å¦‚æœçª—å£å·²å…³é—­æˆ–æœ€å°åŒ–ï¼šawait windowManager.show()ã€await windowManager.focus()",
          "    * å¦‚æœçª—å£å·²æ‰“å¼€ï¼šä¸æ”¹å˜çª—å£çŠ¶æ€",
          "  - bringToFront() - å°†çª—å£ç½®é¡¶",
          "    * await windowManager.show()ã€await windowManager.focus()",
          "ç›‘å¬å™¨æ³¨å†Œï¼š",
          "  - ç›‘å¬ä»»åŠ¡åˆ—è¡¨å˜åŒ–ï¼ˆtaskSectionsProviderï¼Œoverdue å’Œ todayï¼‰",
          "    * ä½¿ç”¨ ref.listen() ç›‘å¬ provider å˜åŒ–",
          "    * å½“æ•°æ®å˜åŒ–æ—¶ï¼Œè°ƒç”¨ updateMenu()ï¼ˆå¸¦é˜²æŠ–ï¼‰",
          "  - ç›‘å¬è®¡æ—¶å™¨çŠ¶æ€å˜åŒ–ï¼ˆpinnedTaskIdProviderã€focusSessionProviderï¼‰",
          "    * ä½¿ç”¨ ref.listen() ç›‘å¬ provider å˜åŒ–",
          "    * å½“çŠ¶æ€å˜åŒ–æ—¶ï¼Œè°ƒç”¨ updateMenu()ï¼ˆå¸¦é˜²æŠ–ï¼‰ï¼Œåœ¨èœå•é‡å»ºæ—¶å³æ—¶è®¡ç®— HH:MM æ˜¾ç¤ºï¼Œæ— éœ€é¢å¤–å®šæ—¶å™¨",
          "èµ„æºæ¸…ç†ï¼šdispose() - æ¸…ç†èµ„æºã€ç§»é™¤æ‰˜ç›˜å›¾æ ‡",
          "  - å–æ¶ˆé˜²æŠ–å®šæ—¶å™¨ï¼š_menuUpdateDebounceTimer?.cancel()",
          "  - ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ï¼štrayManager.removeListener(...)",
          "  - ç§»é™¤æ‰˜ç›˜å›¾æ ‡ï¼šawait trayManager.destroy()",
          "  - è®¾ç½® _disposed = true",
          "é”™è¯¯å¤„ç†ï¼šæ‰€æœ‰æ–¹æ³•éƒ½åŒ…å« try-catchï¼Œè®°å½•é”™è¯¯æ—¥å¿—ï¼ˆä½¿ç”¨ debugPrint æˆ– loggerï¼‰",
          "Context è®¿é—®ï¼š",
          "  - é€šè¿‡ navigatorKey.currentContext è·å– BuildContext",
          "  - ç”¨äºæ˜¾ç¤ºå¼¹çª—å’Œè·å–æœ¬åœ°åŒ–å­—ç¬¦ä¸²",
          "æœ¬åœ°åŒ–å­—ç¬¦ä¸²ï¼š",
          "  - é€šè¿‡ navigatorKey.currentContext è·å– context",
          "  - ä½¿ç”¨ AppLocalizations.of(context) è·å–æœ¬åœ°åŒ–å­—ç¬¦ä¸²",
          "  - å¦‚æœ context ä¸º nullï¼Œä½¿ç”¨è‹±æ–‡é»˜è®¤å€¼",
        ],
      },
    ],
    
    // å¸¸é‡å®šä¹‰ï¼šç³»ç»Ÿæ‰˜ç›˜å¸¸é‡
    constants: [
      {
        path: "lib/core/constants/tray_constants.dart",
        purpose: "ç³»ç»Ÿæ‰˜ç›˜ç›¸å…³å¸¸é‡å®šä¹‰ï¼ŒåŒ…æ‹¬èœå•é¡¹ keyã€å›¾æ ‡ã€è·¯å¾„ç­‰",
        action: "create",
        estimatedLines: 80,
        dependencies: [],
        details: [
          "TrayConstants ç±»ï¼šé™æ€å¸¸é‡ç±»",
          "èœå•é¡¹ key å¸¸é‡ï¼š",
          "  - timerStatusKey: 'timer_status'",
          "  - quickAddTaskKey: 'quick_add_task'",
          "  - settingsKey: 'settings'",
          "  - quitKey: 'quit'",
          "  - taskKeyPrefix: 'task_'",
          "  - taskStartTimerKeySuffix: '_start_timer'",
          "  - taskOpenKeySuffix: '_open'",
          "å›¾æ ‡å¸¸é‡ï¼š",
          "  - timerIcon: 'â±ï¸'",
          "  - quickAddIcon: 'â•'",
          "  - settingsIcon: 'âš™ï¸'",
          "  - quitIcon: 'ğŸšª'",
          "  - statusIconActive: 'â˜'",
          "  - statusIconCompleted: 'â˜‘'",
          "  - statusIconDeleted: 'â˜’'",
          "  - warningIcon: 'âš ï¸ '",
          "å›¾æ ‡è·¯å¾„å¸¸é‡ï¼š",
          "  - windowsIconPath: 'assets/logo/app_icon.ico'",
          "  - macosLinuxIconPath: 'assets/logo/granostack-logo-transparent.png'",
          "å·¥å…·æ–¹æ³•ï¼š",
          "  - buildTaskKey(String taskId) -> String: æ„å»ºä»»åŠ¡èœå•é¡¹ key",
          "  - buildTaskStartTimerKey(String taskId) -> String: æ„å»ºä»»åŠ¡å¼€å§‹è®¡æ—¶ key",
          "  - buildTaskOpenKey(String taskId) -> String: æ„å»ºä»»åŠ¡æ‰“å¼€ key",
          "  - parseTaskIdFromKey(String key) -> String?: ä» key ä¸­è§£æ taskId",
        ],
      },
    ],
    
    // å·¥å…·ç±»ï¼šèœå•æ„å»ºå™¨
    utils: [
      {
        path: "lib/core/utils/tray_menu_builder.dart",
        purpose: "ç³»ç»Ÿæ‰˜ç›˜èœå•æ„å»ºå™¨ï¼Œè´Ÿè´£æ„å»ºèœå•é¡¹åˆ—è¡¨ï¼Œå¤„ç†èœå•é¡¹æ ¼å¼åŒ–ï¼ˆå›¾æ ‡ã€æ–‡æœ¬ã€çŠ¶æ€ï¼‰",
        action: "create",
        estimatedLines: 350,
        dependencies: [
          "package:tray_manager/tray_manager.dart",
          "package:flutter/material.dart",
          "lib/data/models/task.dart",
          "lib/generated/l10n/app_localizations.dart",
          "lib/core/constants/tray_constants.dart",
          "lib/core/providers/pinned_task_provider.dart",
          "lib/core/providers/focus_providers.dart",
        ],
        details: [
          "TrayMenuBuilder ç±»ï¼šé™æ€å·¥å…·ç±»ï¼Œæä¾›èœå•æ„å»ºæ–¹æ³•",
          "ä½¿ç”¨ TrayConstants ä¸­çš„å¸¸é‡å®šä¹‰èœå•é¡¹ key å’Œå›¾æ ‡",
          "æ„å»ºè®¡æ—¶å™¨çŠ¶æ€èœå•é¡¹ï¼šbuildTimerStatusItem(String taskId, String taskTitle, Duration elapsed) -> MenuItem",
          "  - æ ¼å¼ï¼šâ±ï¸ (HH:MM) ä»»åŠ¡æ ‡é¢˜ï¼ˆä¸è¶³ 1 å°æ—¶åŒæ ·è¡¥é›¶æ˜¾ç¤ºï¼Œä¾‹å¦‚ 00:45ï¼‰",
          "  - key: 'timer_status'",
          "  - label: ä½¿ç”¨æ–°çš„ HH:MM æ ¼å¼åŒ–æ–¹æ³•ç”Ÿæˆæ—¶é—´æ–‡æœ¬ï¼Œåªæœ‰åœ¨èœå•æ„å»ºæ—¶è®¡ç®—ä¸€æ¬¡",
          "æ„å»ºå¿«é€Ÿæ·»åŠ ä»»åŠ¡èœå•é¡¹ï¼šbuildQuickAddItem(BuildContext? context) -> MenuItem",
          "  - æ ¼å¼ï¼šâ• æ·»åŠ ä»»åŠ¡",
          "  - key: 'quick_add_task'",
          "  - label: ä½¿ç”¨æœ¬åœ°åŒ–å­—ç¬¦ä¸²ï¼ˆå¦‚æœ context ä¸º nullï¼Œä½¿ç”¨è‹±æ–‡é»˜è®¤å€¼ï¼‰",
          "æ„å»ºä»»åŠ¡åˆ—è¡¨èœå•é¡¹ï¼šbuildTaskItems(List<Task> overdueTasks, List<Task> todayTasks, String? pinnedTaskId, BuildContext? context) -> List<MenuItem>",
          "  - æ„å»ºé€¾æœŸä»»åŠ¡åˆ—è¡¨å’Œä»Šæ—¥ä»»åŠ¡åˆ—è¡¨",
          "  - æ’é™¤ç½®é¡¶ä»»åŠ¡ï¼ˆç½®é¡¶ä»»åŠ¡æ˜¾ç¤ºåœ¨è®¡æ—¶å™¨çŠ¶æ€ä¸­ï¼‰",
          "  - è°ƒç”¨ buildTaskItem() æ„å»ºæ¯ä¸ªä»»åŠ¡é¡¹",
          "  - é€¾æœŸå’Œä»Šæ—¥ä»»åŠ¡åˆ†åˆ«åº”ç”¨ 20 æ¡çš„å±•ç¤ºä¸Šé™",
          "  - å¦‚æœæŸä¸ªåˆ†ç»„è¶…è¿‡ 20 æ¡ï¼Œä¸ºè¯¥åˆ†ç»„å•ç‹¬æ·»åŠ â€œæ›´å¤šä»»åŠ¡â€å…¥å£ï¼Œå¹¶ä½¿ç”¨äºŒçº§èœå•å±•ç¤ºå‰©ä½™ä»»åŠ¡",
          "æ„å»ºä»»åŠ¡èœå•é¡¹ï¼šbuildTaskItem(Task task, String? pinnedTaskId, BuildContext? context) -> MenuItem",
          "  - æ ¼å¼ï¼šâ˜ âš ï¸ ä»»åŠ¡æ ‡é¢˜ï¼ˆå¸¦å­èœå•ï¼‰",
          "  - key: 'task_{taskId}'",
          "  - label: ä½¿ç”¨ getStatusIcon() + è­¦å‘Šå›¾æ ‡ï¼ˆä»…é€¾æœŸä»»åŠ¡ï¼‰+ formatTaskTitle()",
          "  - å­èœå•ï¼šè°ƒç”¨ buildTaskSubmenu() æ„å»º",
          "æ„å»ºä»»åŠ¡å­èœå•ï¼šbuildTaskSubmenu(String taskId, String? pinnedTaskId, BuildContext? context) -> List<MenuItem>",
          "  - åŒ…å«'å¼€å§‹è®¡æ—¶'å’Œ'æ‰“å¼€'é€‰é¡¹",
          "  - 'å¼€å§‹è®¡æ—¶'ï¼šåªæœ‰åœ¨æ²¡æœ‰ç½®é¡¶ä»»åŠ¡æ—¶æ‰å¯ç”¨ï¼ˆenabled: pinnedTaskId == nullï¼‰",
          "  - key: 'task_{taskId}_start_timer' å’Œ 'task_{taskId}_open'",
          "æ„å»ºè®¾ç½®èœå•é¡¹ï¼šbuildSettingsItem(BuildContext? context) -> MenuItem",
          "  - æ ¼å¼ï¼šâš™ï¸ è®¾ç½®",
          "  - key: 'settings'",
          "æ„å»ºé€€å‡ºèœå•é¡¹ï¼šbuildQuitItem(BuildContext? context) -> MenuItem",
          "  - æ ¼å¼ï¼šğŸšª é€€å‡º",
          "  - key: 'quit'",
          "æ„å»ºåˆ†éš”çº¿ï¼šbuildSeparator() -> MenuItem",
          "  - ä½¿ç”¨ MenuItem.separator()",
          "ä»»åŠ¡çŠ¶æ€å›¾æ ‡æ˜ å°„ï¼šgetStatusIcon(TaskStatus status) -> String",
          "  - pending/doing/paused/inbox â†’ 'â˜'",
          "  - completedActive â†’ 'â˜‘'",
          "  - trashed â†’ 'â˜’'",
          "ä»»åŠ¡æ ‡é¢˜æ ¼å¼åŒ–ï¼šformatTaskTitle(String title, {int maxLength = 50}) -> String",
          "  - å¦‚æœæ ‡é¢˜é•¿åº¦è¶…è¿‡ maxLengthï¼Œæˆªæ–­å¹¶æ·»åŠ çœç•¥å·",
          "  - è°ƒç”¨ TextUtils.truncate(title, maxLength)ï¼ˆå¤ç”¨æå–çš„é€šç”¨æ–¹æ³•ï¼‰",
          "æ—¶é—´æ ¼å¼åŒ–ï¼šå¤ç”¨ ClockTimerUtils æä¾›çš„æ ¼å¼åŒ–å·¥å…·æˆ–æ–°å¢è½»é‡åŒ…è£…",
          "  - è¾“å‡ºå›ºå®šä¸º HH:MMï¼ˆä¸è¶³ 1 å°æ—¶åŒæ ·è¡¥é›¶æ˜¾ç¤ºï¼‰ï¼Œä¸æ˜¾ç¤ºç§’",
          "  - ä»…åœ¨ buildMenu() æ„å»ºèœå•æ—¶è®¡ç®—ä¸€æ¬¡",
          "èœå•é¡¹æ’åºï¼šsortTasks(List<Task> overdueTasks, List<Task> todayTasks) -> List<Task>",
          "  - é€¾æœŸä»»åŠ¡åœ¨å‰ï¼Œä»Šæ—¥ä»»åŠ¡åœ¨å",
          "  - è¿”å›åˆå¹¶åçš„åˆ—è¡¨",
          "ä»»åŠ¡æ•°é‡é™åˆ¶ï¼šlimitTasks(List<Task> tasks, {int maxCount = 20}) -> List<Task>",
          "  - å¦‚æœä»»åŠ¡æ•°é‡è¶…è¿‡ maxCountï¼Œåªè¿”å›å‰ maxCount ä¸ªä»»åŠ¡ï¼Œå¹¶è¿”å›å‰©ä½™ä»»åŠ¡é›†åˆä¾›â€œæ›´å¤šä»»åŠ¡â€äºŒçº§èœå•ä½¿ç”¨",
        ],
      },
    ],
    
    // Provider å±‚ï¼šç³»ç»Ÿæ‰˜ç›˜çŠ¶æ€ç®¡ç†
    providers: [
      {
        path: "lib/core/providers/system_tray_provider.dart",
        purpose: "ç³»ç»Ÿæ‰˜ç›˜çŠ¶æ€ç®¡ç† Providerï¼Œæä¾›ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡çš„è®¿é—®å’ŒçŠ¶æ€ç›‘å¬",
        action: "create",
        estimatedLines: 100,
        dependencies: [
          "lib/core/services/system_tray_service.dart",
        ],
        details: [
          "systemTrayServiceProvider - FutureProviderï¼Œæä¾› SystemTrayService å®ä¾‹",
          "systemTrayInitializedProvider - StateProvider<bool>ï¼Œè·Ÿè¸ªç³»ç»Ÿæ‰˜ç›˜åˆå§‹åŒ–çŠ¶æ€",
          "ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–ï¼ˆä»…æ¡Œé¢å¹³å°ï¼‰",
          "æä¾›ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡çš„å…¨å±€è®¿é—®ç‚¹",
        ],
      },
    ],
  },

  // ===========================================
  // 3. éœ€è¦ä¿®æ”¹çš„ç°æœ‰æ–‡ä»¶ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  modifications: [
    {
      file: "lib/main.dart",
      purpose: "åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡ï¼ˆä»…æ¡Œé¢å¹³å°ï¼‰",
      changes: [
        "å¯¼å…¥ç³»ç»Ÿæ‰˜ç›˜ç›¸å…³ä¾èµ–ï¼šsystem_tray_service.dartã€system_tray_provider.dartã€window_manager.dart",
        "åœ¨ main() å‡½æ•°ä¸­ï¼Œåœ¨ WidgetsFlutterBinding.ensureInitialized() ä¹‹å",
        "æ£€æµ‹è¿è¡Œå¹³å°ï¼ˆä½¿ç”¨ Platform.isWindowsã€Platform.isLinuxã€Platform.isMacOSï¼‰",
        "å¦‚æœæ˜¯æ¡Œé¢å¹³å°ï¼Œåˆå§‹åŒ– window_managerï¼šawait windowManager.ensureInitialized()",
        "åˆå§‹åŒ–ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡ï¼šawait ref.read(systemTrayServiceProvider.future).then((service) => service.init())",
        "æ³¨æ„ï¼šéœ€è¦åœ¨ ProviderScope å†…éƒ¨è®¿é—® refï¼Œæ‰€ä»¥éœ€è¦åœ¨ runApp ä¹‹å‰åˆå§‹åŒ–",
        "æˆ–è€…ä½¿ç”¨ WidgetsBinding.instance.addPostFrameCallback åœ¨åº”ç”¨å¯åŠ¨ååˆå§‹åŒ–",
      ],
      estimatedLines: 30,
    },
    {
      file: "lib/core/app.dart",
      purpose: "åœ¨åº”ç”¨å¯åŠ¨ååˆå§‹åŒ–ç³»ç»Ÿæ‰˜ç›˜ï¼ˆå¦‚æœ main.dart ä¸­æ— æ³•è®¿é—® refï¼‰",
      changes: [
        "åœ¨ GranoFlowApp çš„ initState æˆ– didChangeDependencies ä¸­",
        "æ£€æµ‹è¿è¡Œå¹³å°ï¼Œå¦‚æœæ˜¯æ¡Œé¢å¹³å°ï¼Œåˆå§‹åŒ–ç³»ç»Ÿæ‰˜ç›˜",
        "ä½¿ç”¨ WidgetsBinding.instance.addPostFrameCallback ç¡®ä¿åœ¨åº”ç”¨å¯åŠ¨ååˆå§‹åŒ–",
        "è¯»å– systemTrayServiceProvider å¹¶è°ƒç”¨ init() æ–¹æ³•",
      ],
      estimatedLines: 20,
    },
    {
      file: "lib/presentation/navigation/app_router.dart",
      purpose: "ç¡®ä¿è®¾ç½®é¡µé¢è·¯ç”±å­˜åœ¨ï¼ˆå·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹ï¼Œä½†éœ€è¦ç¡®è®¤ï¼‰",
      changes: [
        "ç¡®è®¤ /settings è·¯ç”±å·²å­˜åœ¨ï¼ˆå·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹ï¼‰",
      ],
      estimatedLines: 0,
    },
      {
        file: "lib/presentation/tasks/task_list_page.dart",
        purpose: "ç¡®ä¿ä»»åŠ¡åˆ—è¡¨é¡µé¢æ”¯æŒé€šè¿‡ URL å‚æ•°æ‰“å¼€ç‰¹å®šä»»åŠ¡è¯¦æƒ…ï¼ˆå¯èƒ½éœ€è¦å¢å¼ºï¼‰",
        changes: [
          "æ£€æŸ¥æ˜¯å¦æ”¯æŒé€šè¿‡ URL å‚æ•°ï¼ˆå¦‚ ?taskId=xxxï¼‰æ‰“å¼€ç‰¹å®šä»»åŠ¡è¯¦æƒ…",
          "å¦‚æœä¸æ”¯æŒï¼Œéœ€è¦æ·»åŠ æ”¯æŒï¼š",
          "  - åœ¨ _TaskListPageState çš„ initState æˆ– didChangeDependencies ä¸­",
          "  - æ£€æŸ¥ URL å‚æ•°ï¼šwidget.initialSection æˆ–é€šè¿‡ AppRouter.router.routerDelegate.currentConfiguration è·å–",
          "  - å¦‚æœæœ‰ taskId å‚æ•°ï¼Œå»¶è¿Ÿæ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…å¼¹çª—ï¼ˆä½¿ç”¨ Future.delayed(Duration(milliseconds: 500))ï¼‰",
          "  - ä½¿ç”¨ TaskBottomSheetHelper.showTaskBottomSheet æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…",
          "  - ç¡®ä¿åªåœ¨é¦–æ¬¡åŠ è½½æ—¶æ‰§è¡Œï¼Œé¿å…é‡å¤æ˜¾ç¤º",
        ],
        estimatedLines: 40,
      },
      {
        file: "lib/l10n/app_en.arb",
        purpose: "æ·»åŠ ç³»ç»Ÿæ‰˜ç›˜èœå•ç›¸å…³çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²",
        changes: [
          "æ·»åŠ ä»¥ä¸‹æœ¬åœ°åŒ–å­—ç¬¦ä¸²ï¼ˆæŒ‰å­—æ¯é¡ºåºæ’å…¥ï¼‰ï¼š",
          "  - 'trayAddTask': 'Add Task'",
          "  - 'trayOpen': 'Open'",
          "  - 'trayQuit': 'Quit'",
          "  - 'traySettings': 'Settings'",
          "  - 'trayStartTimer': 'Start Timer'",
          "  - 'trayTimerStatus': 'Timer: {elapsedTime} {taskTitle}'ï¼ˆå¸¦å ä½ç¬¦ï¼‰",
          "  - 'trayMoreTasks': 'More {count} tasks...'ï¼ˆå¸¦å ä½ç¬¦ï¼‰",
          "æ³¨æ„ï¼šéœ€è¦åŒæ—¶æ›´æ–°å…¶ä»–è¯­è¨€æ–‡ä»¶ï¼ˆapp_zh_CN.arbã€app_zh_HK.arbï¼‰",
        ],
        estimatedLines: 20,
      },
  ],

  // ===========================================
  // 4. å®ç°æ­¥éª¤ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  // æ³¨æ„ï¼šé˜¶æ®µå®Œæˆåè‡ªåŠ¨æ‰§è¡Œä¸‹ä¸€é˜¶æ®µï¼Œä¸éœ€è¦æ²Ÿé€šç¡®è®¤
  // AI å¼€å‘å°†å®Œæˆæ‰€æœ‰åŠŸèƒ½ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰é˜¶æ®µ
  // æ¯ä¸ªé˜¶æ®µå®Œæˆæ—¶å¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commitï¼ˆä½¿ç”¨ --no-verify é€‰é¡¹ï¼‰
  // 
  // é”™è¯¯å¤„ç†ç­–ç•¥ï¼š
  // - å¦‚æœæŸä¸ªä»»åŠ¡å¤±è´¥ï¼Œå…ˆå°è¯•ä¿®å¤ï¼ˆå¦‚ analyze issuesã€æµ‹è¯•å¤±è´¥ï¼‰ï¼Œä¿®å¤åç»§ç»­
  // - å¦‚æœæ— æ³•è‡ªåŠ¨ä¿®å¤ï¼ˆå¦‚éœ€è¦äººå·¥å†³ç­–ï¼‰ï¼Œè®°å½•é—®é¢˜å¹¶ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œåœ¨é˜¶æ®µå®Œæˆæ—¶æ€»ç»“æ‰€æœ‰æœªè§£å†³é—®é¢˜
  // - build_runner å†²çªï¼šä½¿ç”¨ --delete-conflicting-outputs å‚æ•°è‡ªåŠ¨åˆ é™¤å†²çªæ–‡ä»¶
  // - analyze issues æ— æ³•è‡ªåŠ¨ä¿®å¤ï¼šè®°å½•åˆ° commit message ä¸­ï¼Œæ ‡è®°ä¸ºå·²çŸ¥é—®é¢˜ï¼Œç»§ç»­åç»­ä»»åŠ¡
  implementationSteps: [
    {
      step: 0,
      title: "é˜¶æ®µ 0ï¼šé‡æ„ç°æœ‰ä»£ç ï¼ˆå¤ç”¨å‡†å¤‡ï¼‰",
      description: "åœ¨å®ç°ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ä¹‹å‰ï¼Œå…ˆé‡æ„ç°æœ‰ä»£ç ï¼Œæå–å¯å¤ç”¨çš„å·¥å…·æ–¹æ³•ï¼Œç¡®ä¿ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½å¯ä»¥ç›´æ¥å¤ç”¨",
      tasks: [
        {
          task: "æå– TextUtils.truncate() æ–¹æ³•",
          file: "lib/core/utils/text_utils.dart",
          action: [
            "åˆ›å»º lib/core/utils/text_utils.dart æ–‡ä»¶",
            "å®ç° TextUtils.truncate(String text, int maxLength, {String ellipsis = '...'}) -> String æ–¹æ³•",
            "æ›´æ–° lib/presentation/widgets/project_milestone_text_utils.dartï¼Œå°† _truncateText() æ”¹ä¸ºè°ƒç”¨ TextUtils.truncate()",
          ],
        },
        {
          task: "æå– showQuickAddSheet() æ–¹æ³•",
          file: "lib/presentation/widgets/utils/quick_add_sheet_helper.dart",
          action: [
            "åˆ›å»º lib/presentation/widgets/utils/quick_add_sheet_helper.dart æ–‡ä»¶",
            "å®ç° showQuickAddSheet(BuildContext context, {TaskSection? section, DateTime? defaultDate}) -> Future<QuickAddResult?> æ–¹æ³•",
            "å°è£… showModalBottomSheet çš„è°ƒç”¨é€»è¾‘ï¼ˆåŒ…æ‹¬ Containerã€æ‹–æ‹½æŒ‡ç¤ºå™¨ã€åº•éƒ¨å®‰å…¨åŒºåŸŸç­‰ï¼‰",
            "æ›´æ–°æ‰€æœ‰ç°æœ‰è°ƒç”¨ç‚¹ï¼š",
            "  - lib/presentation/navigation/responsive_navigation.dart",
            "  - lib/presentation/tasks/task_list_page.dart",
            "  - lib/presentation/projects/project_detail_page.dart",
          ],
        },
        {
          task: "æ‰©å±• TaskStatusToggleHelperï¼Œæ·»åŠ ä¸‰æ€åˆ‡æ¢æ–¹æ³•",
          file: "lib/presentation/widgets/utils/task_status_toggle_helper.dart",
          action: [
            "æ·»åŠ  toggleTaskStatusThreeState(BuildContext context, WidgetRef ref, Task task, {TaskSection? section}) -> Future<bool> æ–¹æ³•",
            "å®ç°ä¸‰æ€åˆ‡æ¢é€»è¾‘ï¼špending/doing/paused/inbox â†’ completedActive â†’ trashed â†’ pending",
            "å¤ç”¨ç°æœ‰çš„ taskService è°ƒç”¨é€»è¾‘å’Œé”™è¯¯å¤„ç†",
          ],
        },
        {
          task: "åˆ›å»º DebounceUtil å·¥å…·ç±»",
          file: "lib/core/utils/debounce_util.dart",
          action: [
            "åˆ›å»º lib/core/utils/debounce_util.dart æ–‡ä»¶",
            "å®ç° DebounceUtil ç±»ï¼Œæä¾›é˜²æŠ–åŠŸèƒ½",
            "å®ç° debounce(Duration delay, VoidCallback callback) -> VoidCallback æ–¹æ³•",
            "å®ç° cancel(VoidCallback debouncedCallback) æ–¹æ³•ï¼ˆå¯é€‰ï¼‰",
          ],
        },
        {
          task: "è¿è¡Œ flutter analyze æ£€æŸ¥ä»£ç ",
          command: "flutter analyze",
          action: "æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ– lint é—®é¢˜",
        },
        {
          task: "é˜¶æ®µå®Œæˆï¼šå¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commit",
          command: "git add -A && git commit --no-verify -m 'refactor: é˜¶æ®µ 0 å®Œæˆ - é‡æ„ç°æœ‰ä»£ç ï¼Œæå–å¯å¤ç”¨å·¥å…·æ–¹æ³•'",
          action: "æäº¤é˜¶æ®µ 0 çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¿½ç•¥ pre-commit é’©å­",
        },
      ],
    },
    {
      step: 1,
      title: "é˜¶æ®µ 1ï¼šåˆ›å»ºç³»ç»Ÿæ‰˜ç›˜æœåŠ¡åŸºç¡€ç»“æ„",
      description: "åˆ›å»º SystemTrayService ç±»å’ŒåŸºç¡€æ–¹æ³•æ¡†æ¶ï¼Œå®ç°åˆå§‹åŒ–å’Œèµ„æºæ¸…ç†",
      tasks: [
        {
          task: "åˆ›å»º SystemTrayService ç±»",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "åˆ›å»º SystemTrayService ç±»ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰",
            "æ·»åŠ åŸºç¡€å±æ€§ï¼štrayManagerã€windowManagerã€refã€disposed æ ‡å¿—",
            "å®ç° init() æ–¹æ³•ï¼šæ£€æµ‹å¹³å°ã€è®¾ç½®æ‰˜ç›˜å›¾æ ‡ã€åˆ›å»ºåˆå§‹èœå•",
            "å®ç° dispose() æ–¹æ³•ï¼šæ¸…ç†èµ„æºã€ç§»é™¤æ‰˜ç›˜å›¾æ ‡",
            "æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•",
          ],
        },
        {
          task: "åˆ›å»º TrayMenuBuilder å·¥å…·ç±»",
          file: "lib/core/utils/tray_menu_builder.dart",
          action: [
            "åˆ›å»º TrayMenuBuilder é™æ€å·¥å…·ç±»",
            "å®ç°åŸºç¡€èœå•é¡¹æ„å»ºæ–¹æ³•ï¼šbuildSeparator()ã€buildMenuItem()",
            "å®ç°ä»»åŠ¡çŠ¶æ€å›¾æ ‡æ˜ å°„ï¼šgetStatusIcon()",
            "å®ç°æ—¶é—´æ ¼å¼åŒ–ï¼šformatElapsedTime()",
            "å®ç°ä»»åŠ¡æ ‡é¢˜æ ¼å¼åŒ–ï¼šformatTaskTitle()",
          ],
        },
        {
          task: "åˆ›å»ºç³»ç»Ÿæ‰˜ç›˜ Provider",
          file: "lib/core/providers/system_tray_provider.dart",
          action: [
            "åˆ›å»º systemTrayServiceProviderï¼ˆFutureProviderï¼‰",
            "åˆ›å»º systemTrayInitializedProviderï¼ˆStateProvider<bool>ï¼‰",
          ],
        },
        {
          task: "è¿è¡Œ flutter analyze æ£€æŸ¥ä»£ç ",
          command: "flutter analyze",
          action: "æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ– lint é—®é¢˜",
        },
        {
          task: "é˜¶æ®µå®Œæˆï¼šå¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commit",
          command: "git add -A && git commit --no-verify -m 'feat: é˜¶æ®µ 1 å®Œæˆ - åˆ›å»ºç³»ç»Ÿæ‰˜ç›˜æœåŠ¡åŸºç¡€ç»“æ„'",
          action: "æäº¤é˜¶æ®µ 1 çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¿½ç•¥ pre-commit é’©å­",
        },
      ],
    },
    {
      step: 2,
      title: "é˜¶æ®µ 2ï¼šå®ç°èœå•æ„å»ºé€»è¾‘",
      description: "å®ç°å®Œæ•´çš„èœå•æ„å»ºé€»è¾‘ï¼ŒåŒ…æ‹¬è®¡æ—¶å™¨çŠ¶æ€ã€ä»»åŠ¡åˆ—è¡¨ã€æ“ä½œé¡¹ç­‰",
      tasks: [
        {
          task: "å®ç°èœå•æ„å»ºæ–¹æ³•",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "å®ç° buildMenu() æ–¹æ³•ï¼šæ ¹æ®å½“å‰çŠ¶æ€æ„å»ºå®Œæ•´èœå•",
            "è°ƒç”¨ TrayMenuBuilder çš„æ–¹æ³•æ„å»ºå„ä¸ªèœå•é¡¹",
            "å¤„ç†æ¡ä»¶æ˜¾ç¤ºé€»è¾‘ï¼ˆè®¡æ—¶å™¨çŠ¶æ€ã€åˆ†éš”çº¿ç­‰ï¼‰",
          ],
        },
        {
          task: "å®Œå–„ TrayMenuBuilder èœå•é¡¹æ„å»ºæ–¹æ³•",
          file: "lib/core/utils/tray_menu_builder.dart",
          action: [
            "å®ç° buildTimerStatusItem() - æ„å»ºè®¡æ—¶å™¨çŠ¶æ€èœå•é¡¹",
            "å®ç° buildQuickAddItem() - æ„å»ºå¿«é€Ÿæ·»åŠ ä»»åŠ¡èœå•é¡¹",
            "å®ç° buildTaskItems() - æ„å»ºä»»åŠ¡åˆ—è¡¨èœå•é¡¹",
            "å®ç° buildTaskItem() - æ„å»ºå•ä¸ªä»»åŠ¡èœå•é¡¹ï¼ˆå¸¦å­èœå•ï¼‰",
            "å®ç° buildTaskSubmenu() - æ„å»ºä»»åŠ¡å­èœå•",
            "å®ç° buildSettingsItem() - æ„å»ºè®¾ç½®èœå•é¡¹",
            "å®ç° buildQuitItem() - æ„å»ºé€€å‡ºèœå•é¡¹",
            "å®ç°ä»»åŠ¡æ’åºå’Œæ•°é‡é™åˆ¶é€»è¾‘",
          ],
        },
        {
          task: "è¿è¡Œ flutter analyze æ£€æŸ¥ä»£ç ",
          command: "flutter analyze",
          action: "æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ– lint é—®é¢˜",
        },
        {
          task: "é˜¶æ®µå®Œæˆï¼šå¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commit",
          command: "git add -A && git commit --no-verify -m 'feat: é˜¶æ®µ 2 å®Œæˆ - å®ç°èœå•æ„å»ºé€»è¾‘'",
          action: "æäº¤é˜¶æ®µ 2 çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¿½ç•¥ pre-commit é’©å­",
        },
      ],
    },
    {
      step: 3,
      title: "é˜¶æ®µ 3ï¼šå®ç°èœå•é¡¹ç‚¹å‡»äº‹ä»¶å¤„ç†",
      description: "å®ç°æ‰€æœ‰èœå•é¡¹ç‚¹å‡»äº‹ä»¶çš„å¤„ç†é€»è¾‘ï¼ŒåŒ…æ‹¬ä»»åŠ¡çŠ¶æ€åˆ‡æ¢ã€å¼€å§‹è®¡æ—¶ã€æ‰“å¼€ä»»åŠ¡è¯¦æƒ…ç­‰",
      tasks: [
        {
          task: "å®ç°èœå•é¡¹ç‚¹å‡»äº‹ä»¶å¤„ç†æ–¹æ³•",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "å®ç° handleMenuItemClick() - ä¸»äº‹ä»¶å¤„ç†æ–¹æ³•ï¼Œæ ¹æ®èœå•é¡¹ key åˆ†å‘åˆ°å…·ä½“å¤„ç†æ–¹æ³•",
            "å®ç° handleTimerStatusClick() - å¤„ç†è®¡æ—¶å™¨çŠ¶æ€ç‚¹å‡»ï¼ˆå®Œæˆä»»åŠ¡å¹¶å–æ¶ˆç½®é¡¶ï¼‰",
            "å®ç° handleTaskClick() - å¤„ç†ä»»åŠ¡é¡¹ç‚¹å‡»ï¼ˆåˆ‡æ¢ä»»åŠ¡çŠ¶æ€ï¼šâ˜â†’â˜‘â†’â˜’â†’â˜ï¼‰",
            "å®ç° handleTaskSubmenuClick() - å¤„ç†ä»»åŠ¡å­èœå•ç‚¹å‡»ï¼ˆå¼€å§‹è®¡æ—¶ã€æ‰“å¼€ä»»åŠ¡ï¼‰",
            "å®ç° handleQuickAddClick() - å¤„ç†å¿«é€Ÿæ·»åŠ ä»»åŠ¡ç‚¹å‡»",
            "å®ç° handleSettingsClick() - å¤„ç†è®¾ç½®ç‚¹å‡»",
            "å®ç° handleQuitClick() - å¤„ç†é€€å‡ºç‚¹å‡»",
            "æ‰€æœ‰æ–¹æ³•éƒ½åŒ…å«é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•",
          ],
        },
        {
          task: "å®ç°çª—å£ç®¡ç†æ–¹æ³•",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "å®ç° showWindow() - æ˜¾ç¤º/æ¢å¤çª—å£ï¼ˆä½¿ç”¨ window_managerï¼‰",
            "å®ç° bringToFront() - å°†çª—å£ç½®é¡¶",
            "å¤„ç†çª—å£çŠ¶æ€æ£€æŸ¥ï¼ˆæ˜¯å¦å·²æ‰“å¼€ã€æ˜¯å¦æœ€å°åŒ–ï¼‰",
          ],
        },
        {
          task: "å®ç°ä»»åŠ¡çŠ¶æ€åˆ‡æ¢é€»è¾‘",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "å®ç° toggleTaskStatus(String taskId) - åˆ‡æ¢ä»»åŠ¡çŠ¶æ€ï¼ˆç©ºæ¡†â†’å‹¾é€‰â†’å‰å·â†’ç©ºæ¡†ï¼‰",
            "è·å–ä»»åŠ¡å½“å‰çŠ¶æ€ï¼ˆé€šè¿‡ taskByIdProviderï¼‰",
            "æ ¹æ®å½“å‰çŠ¶æ€åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼š",
            "  - pending/doing/paused/inbox â†’ completedActiveï¼ˆè°ƒç”¨ taskService.markCompleted()ï¼‰",
            "  - completedActive â†’ trashedï¼ˆè°ƒç”¨ taskService.softDelete()ï¼‰",
            "  - trashed â†’ pendingï¼ˆè°ƒç”¨ taskService.updateDetails(taskId, TaskUpdate(status: TaskStatus.pending))ï¼‰",
            "æ›´æ–°èœå•ä»¥åæ˜ çŠ¶æ€å˜åŒ–ï¼ˆè°ƒç”¨ updateMenu()ï¼‰",
          ],
        },
        {
          task: "å®ç°å¯¼èˆªå’Œå¼¹çª—æ˜¾ç¤ºé€»è¾‘",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "å®ç° navigateToTaskPage(String? section, String? taskId) - å¯¼èˆªåˆ°ä»»åŠ¡é¡µé¢",
            "  - æ„å»º URLï¼š/tasks?section={section}ï¼ˆå¦‚æœ taskId å­˜åœ¨ï¼Œæ·»åŠ  &taskId={taskId}ï¼‰",
            "  - ä½¿ç”¨ AppRouter.router.go(url)",
            "  - å¦‚æœ taskId å­˜åœ¨ï¼Œå»¶è¿Ÿæ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…å¼¹çª—ï¼ˆä½¿ç”¨ Future.delayed(Duration(milliseconds: 500))ï¼‰",
            "å®ç° showTaskDetail(String taskId) - æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…å¼¹çª—",
            "  - è·å– context: navigatorKey.currentContext",
            "  - å¦‚æœ context ä¸º nullï¼Œè®°å½•é”™è¯¯å¹¶è¿”å›",
            "  - è·å–ä»»åŠ¡æ•°æ®ï¼ˆé€šè¿‡ taskByIdProviderï¼‰",
            "  - ä½¿ç”¨ TaskBottomSheetHelper.showTaskBottomSheet(context, ref, task)",
            "å®ç° showQuickAddSheet() - æ˜¾ç¤ºå¿«é€Ÿæ·»åŠ ä»»åŠ¡å¼¹çª—",
            "  - è·å– context: navigatorKey.currentContext",
            "  - å¦‚æœ context ä¸º nullï¼Œè®°å½•é”™è¯¯å¹¶è¿”å›",
            "  - ä½¿ç”¨ showModalBottomSheet æ˜¾ç¤º QuickAddSheet",
            "  - å‚è€ƒ responsive_navigation.dart ä¸­çš„å®ç°æ–¹å¼",
            "å®ç° navigateToSettings() - å¯¼èˆªåˆ°è®¾ç½®é¡µé¢",
            "  - ä½¿ç”¨ AppRouter.router.go('/settings')",
          ],
        },
        {
          task: "è¿è¡Œ flutter analyze æ£€æŸ¥ä»£ç ",
          command: "flutter analyze",
          action: "æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ– lint é—®é¢˜",
        },
        {
          task: "é˜¶æ®µå®Œæˆï¼šå¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commit",
          command: "git add -A && git commit --no-verify -m 'feat: é˜¶æ®µ 3 å®Œæˆ - å®ç°èœå•é¡¹ç‚¹å‡»äº‹ä»¶å¤„ç†'",
          action: "æäº¤é˜¶æ®µ 3 çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¿½ç•¥ pre-commit é’©å­",
        },
      ],
    },
    {
      step: 4,
      title: "é˜¶æ®µ 4ï¼šå®ç°æ•°æ®ç›‘å¬å’Œèœå•æ›´æ–°",
      description: "å®ç°ä»»åŠ¡åˆ—è¡¨å’Œè®¡æ—¶å™¨çŠ¶æ€çš„ç›‘å¬ï¼Œå®æ—¶æ›´æ–°èœå•å†…å®¹",
      tasks: [
        {
          task: "å®ç°ä»»åŠ¡åˆ—è¡¨ç›‘å¬",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "ç›‘å¬ taskSectionsProviderï¼ˆoverdue å’Œ todayï¼‰çš„å˜åŒ–",
            "å½“ä»»åŠ¡åˆ—è¡¨å˜åŒ–æ—¶ï¼Œè°ƒç”¨ updateMenu() æ›´æ–°èœå•",
            "å¤„ç†ä»»åŠ¡æ–°å¢ã€åˆ é™¤ã€ä¿®æ”¹çš„æƒ…å†µ",
          ],
        },
        {
          task: "å®ç°è®¡æ—¶å™¨çŠ¶æ€ç›‘å¬",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "ç›‘å¬ pinnedTaskIdProvider çš„å˜åŒ–",
            "ç›‘å¬ focusSessionProvider çš„å˜åŒ–",
            "å½“è®¡æ—¶å™¨çŠ¶æ€å˜åŒ–æ—¶ï¼Œè°ƒç”¨ updateMenu() æ›´æ–°èœå•ï¼Œå¹¶åœ¨èœå•æ„å»ºé˜¶æ®µå³æ—¶è®¡ç®— HH:MMï¼Œä¸å†åˆ›å»ºåå°å®šæ—¶å™¨",
          ],
        },
        {
          task: "å®ç°èœå•æ›´æ–°æ–¹æ³•",
          file: "lib/core/services/system_tray_service.dart",
          action: [
            "å®ç° updateMenu() - é‡æ–°æ„å»ºèœå•å¹¶æ›´æ–°",
            "ä¼˜åŒ–æ›´æ–°é€»è¾‘ï¼Œé¿å…ä¸å¿…è¦çš„èœå•é‡å»º",
            "å¤„ç†æ›´æ–°å¤±è´¥çš„æƒ…å†µï¼ˆè®°å½•æ—¥å¿—ï¼Œä¸ä¸­æ–­åº”ç”¨ï¼‰",
          ],
        },
        {
          task: "è¿è¡Œ flutter analyze æ£€æŸ¥ä»£ç ",
          command: "flutter analyze",
          action: "æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ– lint é—®é¢˜",
        },
        {
          task: "é˜¶æ®µå®Œæˆï¼šå¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commit",
          command: "git add -A && git commit --no-verify -m 'feat: é˜¶æ®µ 4 å®Œæˆ - å®ç°æ•°æ®ç›‘å¬å’Œèœå•æ›´æ–°'",
          action: "æäº¤é˜¶æ®µ 4 çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¿½ç•¥ pre-commit é’©å­",
        },
      ],
    },
    {
      step: 5,
      title: "é˜¶æ®µ 5ï¼šé›†æˆåˆ°åº”ç”¨å¯åŠ¨æµç¨‹",
      description: "åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡ï¼Œç¡®ä¿åœ¨æ¡Œé¢å¹³å°ä¸Šæ­£å¸¸å·¥ä½œ",
      tasks: [
        {
          task: "ä¿®æ”¹ app.dart æ·»åŠ  navigatorKey å¹¶åˆå§‹åŒ–ç³»ç»Ÿæ‰˜ç›˜",
          file: "lib/core/app.dart",
          action: [
            "åœ¨ GranoFlowApp ç±»ä¸­æ·»åŠ é™æ€ navigatorKey: GlobalKey<NavigatorState>",
            "åœ¨ MaterialApp.router ä¸­è®¾ç½® navigatorKey: GranoFlowApp.navigatorKey",
            "åœ¨ build æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ WidgetsBinding.instance.addPostFrameCallback ç¡®ä¿åœ¨åº”ç”¨å¯åŠ¨ååˆå§‹åŒ–",
            "æ£€æµ‹è¿è¡Œå¹³å°ï¼ˆä½¿ç”¨ dart:io Platform.isWindowsã€Platform.isLinuxã€Platform.isMacOSï¼‰",
            "å¦‚æœæ˜¯æ¡Œé¢å¹³å°ï¼š",
            "  - åˆå§‹åŒ– window_manager: await windowManager.ensureInitialized()ï¼ˆåœ¨ main.dart ä¸­ï¼‰",
            "  - è¯»å– systemTrayServiceProvider å¹¶è°ƒç”¨ init(GranoFlowApp.navigatorKey) æ–¹æ³•",
            "æ³¨æ„ï¼šwindow_manager.ensureInitialized() éœ€è¦åœ¨ main.dart ä¸­è°ƒç”¨ï¼ˆåœ¨ runApp ä¹‹å‰ï¼‰",
          ],
        },
        {
          task: "ä¿®æ”¹ main.dart åˆå§‹åŒ– window_manager",
          file: "lib/main.dart",
          action: [
            "å¯¼å…¥ window_manager å’Œ dart:io Platform",
            "åœ¨ WidgetsFlutterBinding.ensureInitialized() ä¹‹å",
            "æ£€æµ‹è¿è¡Œå¹³å°ï¼ˆä½¿ç”¨ Platform.isWindowsã€Platform.isLinuxã€Platform.isMacOSï¼‰",
            "å¦‚æœæ˜¯æ¡Œé¢å¹³å°ï¼Œåˆå§‹åŒ– window_manager: await windowManager.ensureInitialized()",
            "æ³¨æ„ï¼šç³»ç»Ÿæ‰˜ç›˜æœåŠ¡çš„åˆå§‹åŒ–åœ¨ app.dart ä¸­è¿›è¡Œï¼ˆéœ€è¦ navigatorKeyï¼‰",
          ],
        },
        {
          task: "æ£€æŸ¥ä»»åŠ¡åˆ—è¡¨é¡µé¢æ˜¯å¦æ”¯æŒé€šè¿‡ URL å‚æ•°æ‰“å¼€ä»»åŠ¡è¯¦æƒ…",
          file: "lib/presentation/tasks/task_list_page.dart",
          action: [
            "æ£€æŸ¥æ˜¯å¦æ”¯æŒé€šè¿‡ URL å‚æ•°ï¼ˆå¦‚ ?taskId=xxxï¼‰æ‰“å¼€ç‰¹å®šä»»åŠ¡è¯¦æƒ…",
            "å¦‚æœä¸æ”¯æŒï¼Œæ·»åŠ æ”¯æŒï¼šåœ¨é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ URL å‚æ•°ï¼Œå¦‚æœæœ‰ taskIdï¼Œå»¶è¿Ÿæ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…å¼¹çª—",
          ],
        },
        {
          task: "è¿è¡Œ flutter analyze æ£€æŸ¥ä»£ç ",
          command: "flutter analyze",
          action: "æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ– lint é—®é¢˜",
        },
        {
          task: "é˜¶æ®µå®Œæˆï¼šå¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commit",
          command: "git add -A && git commit --no-verify -m 'feat: é˜¶æ®µ 5 å®Œæˆ - é›†æˆåˆ°åº”ç”¨å¯åŠ¨æµç¨‹'",
          action: "æäº¤é˜¶æ®µ 5 çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¿½ç•¥ pre-commit é’©å­",
        },
      ],
    },
    {
      step: 6,
      title: "é˜¶æ®µ 6ï¼šæµ‹è¯•å’Œä¼˜åŒ–",
      description: "æµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼Œä¿®å¤é—®é¢˜ï¼Œä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ",
      tasks: [
        {
          task: "æµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜åˆå§‹åŒ–",
          action: [
            "åœ¨ Windows/Linux/macOS ä¸Šæµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡æ˜¯å¦æ­£å¸¸æ˜¾ç¤º",
            "æµ‹è¯•èœå•æ˜¯å¦æ­£å¸¸æ˜¾ç¤º",
            "æµ‹è¯•èœå•é¡¹ç‚¹å‡»æ˜¯å¦æ­£å¸¸å·¥ä½œ",
          ],
        },
        {
          task: "æµ‹è¯•ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½",
          action: [
            "æµ‹è¯•ä»»åŠ¡åˆ—è¡¨æ˜¯å¦æ­£ç¡®æ˜¾ç¤º",
            "æµ‹è¯•ä»»åŠ¡çŠ¶æ€åˆ‡æ¢æ˜¯å¦æ­£å¸¸å·¥ä½œ",
            "æµ‹è¯•ä»»åŠ¡å­èœå•æ˜¯å¦æ­£å¸¸å·¥ä½œ",
            "æµ‹è¯•ä»»åŠ¡æ•°é‡é™åˆ¶æ˜¯å¦ç”Ÿæ•ˆï¼Œå¹¶éªŒè¯â€œæ›´å¤šä»»åŠ¡â€äºŒçº§èœå•æ˜¯å¦æŒ‰é€¾æœŸ/ä»Šæ—¥åˆ†åˆ«å±•ç¤ºå‰©ä½™ä»»åŠ¡",
          ],
        },
        {
          task: "æµ‹è¯•è®¡æ—¶å™¨åŠŸèƒ½",
          action: [
            "æµ‹è¯•è®¡æ—¶å™¨çŠ¶æ€æ˜¯å¦æ­£ç¡®æ˜¾ç¤º",
            "æµ‹è¯•åœ¨é‡æ–°æ‰“å¼€æ‰˜ç›˜èœå•æ—¶ï¼Œè®¡æ—¶å™¨æ—¶é—´æ˜¯å¦ä»¥ HH:MM æ­£ç¡®åˆ·æ–°",
            "æµ‹è¯•ç‚¹å‡»è®¡æ—¶å™¨çŠ¶æ€æ˜¯å¦å®Œæˆä»»åŠ¡å¹¶å–æ¶ˆç½®é¡¶",
          ],
        },
        {
          task: "æµ‹è¯•çª—å£ç®¡ç†åŠŸèƒ½",
          action: [
            "æµ‹è¯•ç‚¹å‡»èœå•é¡¹åçª—å£æ˜¯å¦æ­£ç¡®æ‰“å¼€/æ¢å¤",
            "æµ‹è¯•çª—å£æ˜¯å¦æ­£ç¡®ç½®é¡¶",
            "æµ‹è¯•å¯¼èˆªæ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å¯¹åº”é¡µé¢",
          ],
        },
        {
          task: "ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ",
          action: [
            "ä¼˜åŒ–èœå•æ›´æ–°é¢‘ç‡ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„æ›´æ–°",
            "ä¼˜åŒ–é”™è¯¯å¤„ç†ï¼Œç¡®ä¿é”™è¯¯ä¸å½±å“åº”ç”¨æ­£å¸¸è¿è¡Œ",
            "ä¼˜åŒ–æ—¥å¿—è®°å½•ï¼Œä¾¿äºè°ƒè¯•å’Œé—®é¢˜æ’æŸ¥",
          ],
        },
        {
          task: "è¿è¡Œ flutter analyze æ£€æŸ¥ä»£ç ",
          command: "flutter analyze",
          action: "æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ– lint é—®é¢˜",
        },
        {
          task: "é˜¶æ®µå®Œæˆï¼šå¿½ç•¥ pre-commitï¼Œå¼ºè¡Œ git commit",
          command: "git add -A && git commit --no-verify -m 'feat: é˜¶æ®µ 6 å®Œæˆ - æµ‹è¯•å’Œä¼˜åŒ–'",
          action: "æäº¤é˜¶æ®µ 6 çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¿½ç•¥ pre-commit é’©å­",
        },
      ],
    },
  ],

  // ===========================================
  // 5. é‡æ„å’Œå¤ç”¨ç­–ç•¥ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  refactoringAndReuse: {
    // å¤ç”¨ç°æœ‰ä»£ç 
    reuseExistingCode: [
      {
        item: "æ—¶é—´æ ¼å¼åŒ–ï¼šå¤ç”¨ ClockTimerUtils å¹¶è£å‰ªä¸º HH:MM",
        location: "lib/presentation/clock/utils/clock_timer_utils.dart",
        reason: "ClockTimerUtils å·²æä¾›æ ‡å‡†åŒ–çš„è€—æ—¶è®¡ç®—é€»è¾‘ï¼Œåªéœ€åœ¨å…¶åŸºç¡€ä¸Šè¾“å‡º HH:MM å³å¯ï¼Œé¿å…é‡æ–°å®ç°è®¡æ—¶å™¨ç´¯ç§¯é€»è¾‘",
        action: "åœ¨ TrayMenuBuilder ä¸­è°ƒç”¨ ClockTimerUtils çš„ç°æœ‰æ–¹æ³•è·å– Durationï¼Œå†é€šè¿‡æ–°å¢çš„ HHMM æ ¼å¼åŒ–è¾…åŠ©å‡½æ•°è¾“å‡ºæ–‡æœ¬ï¼ˆå¯æ·»åŠ è½»é‡åŒ…è£…ï¼‰",
        impact: "å‡å°‘ä»£ç é‡å¤ï¼Œä¿æŒæ—¶é—´æ ¼å¼åŒ–é€»è¾‘ä¸€è‡´ï¼ŒåŒæ—¶æ»¡è¶³ HH:MM åªè¯»ç§’çš„éœ€æ±‚",
      },
      {
        item: "ä»»åŠ¡çŠ¶æ€åˆ‡æ¢ï¼šæ‰©å±• TaskStatusToggleHelper",
        location: "lib/presentation/widgets/utils/task_status_toggle_helper.dart",
        reason: "ç°æœ‰ toggleTaskStatus() åªæ”¯æŒ pending â†” completedActive çš„åˆ‡æ¢ï¼Œç³»ç»Ÿæ‰˜ç›˜éœ€è¦ä¸‰æ€åˆ‡æ¢ï¼ˆpending â†’ completedActive â†’ trashed â†’ pendingï¼‰",
        action: [
          "åœ¨ TaskStatusToggleHelper ä¸­æ–°å¢ toggleTaskStatusThreeState() æ–¹æ³•",
          "æ”¯æŒä¸‰æ€åˆ‡æ¢ï¼špending/doing/paused/inbox â†’ completedActive â†’ trashed â†’ pending",
          "å¤ç”¨ç°æœ‰çš„ taskService è°ƒç”¨é€»è¾‘å’Œé”™è¯¯å¤„ç†",
          "SystemTrayService è°ƒç”¨æ–°çš„ toggleTaskStatusThreeState() æ–¹æ³•",
        ],
        impact: "ç»Ÿä¸€ä»»åŠ¡çŠ¶æ€åˆ‡æ¢é€»è¾‘ï¼Œé¿å…ä»£ç é‡å¤ï¼Œä¾¿äºç»´æŠ¤",
      },
      {
        item: "ä»»åŠ¡æ ‡é¢˜æˆªæ–­ï¼šæå–é€šç”¨æ–‡æœ¬æˆªæ–­å·¥å…·æ–¹æ³•",
        location: "lib/presentation/widgets/project_milestone_text_utils.dart",
        reason: "ç°æœ‰ _truncateText() æ˜¯ç§æœ‰æ–¹æ³•ï¼Œä¸”åªåœ¨è¯¥æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚ç³»ç»Ÿæ‰˜ç›˜ä¹Ÿéœ€è¦æ–‡æœ¬æˆªæ–­åŠŸèƒ½",
        action: [
          "åœ¨ lib/core/utils/ ä¸­æ–°å»º text_utils.dart æ–‡ä»¶",
          "æå–é€šç”¨çš„ truncateText() æ–¹æ³•ï¼ˆå…¬å¼€ï¼‰",
          "å°† project_milestone_text_utils.dart ä¸­çš„ _truncateText() æ”¹ä¸ºè°ƒç”¨æ–°çš„ truncateText()",
          "TrayMenuBuilder ä¸­çš„ formatTaskTitle() è°ƒç”¨æ–°çš„ truncateText()",
        ],
        impact: "æå–é€šç”¨å·¥å…·æ–¹æ³•ï¼Œé¿å…ä»£ç é‡å¤ï¼Œä¾¿äºå…¶ä»–æ¨¡å—å¤ç”¨",
      },
      {
        item: "QuickAddSheet æ˜¾ç¤ºï¼šæå–é€šç”¨æ˜¾ç¤ºæ–¹æ³•",
        location: "lib/presentation/navigation/responsive_navigation.dart, lib/presentation/tasks/task_list_page.dart, lib/presentation/projects/project_detail_page.dart",
        reason: "å¤šä¸ªåœ°æ–¹éƒ½æœ‰ç›¸åŒçš„ QuickAddSheet æ˜¾ç¤ºä»£ç ï¼ˆshowModalBottomSheet + Container + QuickAddSheetï¼‰ï¼Œå­˜åœ¨ä»£ç é‡å¤",
        action: [
          "åœ¨ lib/presentation/widgets/utils/ ä¸­æ–°å»º quick_add_sheet_helper.dart æ–‡ä»¶",
          "æå– showQuickAddSheet() é™æ€æ–¹æ³•ï¼Œå°è£… showModalBottomSheet çš„è°ƒç”¨",
          "æ”¯æŒå¯é€‰çš„ section å’Œ defaultDate å‚æ•°",
          "æ‰€æœ‰ç°æœ‰è°ƒç”¨ç‚¹æ”¹ä¸ºä½¿ç”¨æ–°çš„ showQuickAddSheet() æ–¹æ³•",
          "SystemTrayService ä¸­çš„ handleQuickAddClick() ä¹Ÿä½¿ç”¨æ–°çš„ showQuickAddSheet() æ–¹æ³•",
        ],
        impact: "æ¶ˆé™¤ä»£ç é‡å¤ï¼Œç»Ÿä¸€ QuickAddSheet çš„æ˜¾ç¤ºé€»è¾‘ï¼Œä¾¿äºç»´æŠ¤å’Œä¿®æ”¹",
      },
      {
        item: "ä»»åŠ¡è¯¦æƒ…å¼¹çª—æ˜¾ç¤ºï¼šå¤ç”¨ TaskBottomSheetHelper",
        location: "lib/presentation/widgets/utils/task_bottom_sheet_helper.dart",
        reason: "TaskBottomSheetHelper.showTaskBottomSheet() å·²å®ç°æ ¹æ®ä»»åŠ¡çŠ¶æ€è‡ªåŠ¨é€‰æ‹©å¼¹çª—çš„é€»è¾‘",
        action: "SystemTrayService ä¸­çš„ showTaskDetail() ç›´æ¥è°ƒç”¨ TaskBottomSheetHelper.showTaskBottomSheet()",
        impact: "å¤ç”¨ç°æœ‰é€»è¾‘ï¼Œä¿æŒä¸€è‡´æ€§",
      },
    ],
    
    // éœ€è¦æ–°å»ºçš„å·¥å…·ç±»
    newUtilityClasses: [
      {
        item: "é˜²æŠ–å·¥å…·ç±»ï¼šDebounceUtil",
        location: "lib/core/utils/debounce_util.dart",
        reason: "ç³»ç»Ÿæ‰˜ç›˜èœå•æ›´æ–°éœ€è¦é˜²æŠ–æœºåˆ¶ï¼Œä»£ç åº“ä¸­æ²¡æœ‰é€šç”¨çš„é˜²æŠ–å·¥å…·ç±»",
        purpose: "æä¾›é€šç”¨çš„é˜²æŠ–åŠŸèƒ½ï¼Œä¾› SystemTrayService å’Œå…¶ä»–éœ€è¦é˜²æŠ–çš„æ¨¡å—ä½¿ç”¨",
        methods: [
          "DebounceUtil.debounce(Duration delay, VoidCallback callback) -> VoidCallback: è¿”å›ä¸€ä¸ªé˜²æŠ–åçš„å›è°ƒå‡½æ•°",
          "DebounceUtil.cancel(VoidCallback debouncedCallback): å–æ¶ˆé˜²æŠ–å›è°ƒ",
        ],
        impact: "æä¾›å¯å¤ç”¨çš„é˜²æŠ–åŠŸèƒ½ï¼Œä¾¿äºå…¶ä»–æ¨¡å—ä½¿ç”¨",
      },
      {
        item: "æ–‡æœ¬å·¥å…·ç±»ï¼šTextUtils",
        location: "lib/core/utils/text_utils.dart",
        reason: "æå–é€šç”¨çš„æ–‡æœ¬å¤„ç†åŠŸèƒ½ï¼ˆå¦‚æˆªæ–­ï¼‰ï¼Œä¾›å¤šä¸ªæ¨¡å—å¤ç”¨",
        purpose: "æä¾›é€šç”¨çš„æ–‡æœ¬å¤„ç†å·¥å…·æ–¹æ³•",
        methods: [
          "TextUtils.truncate(String text, int maxLength, {String ellipsis = '...'}) -> String: æˆªæ–­æ–‡æœ¬å¹¶æ·»åŠ çœç•¥å·",
        ],
        impact: "ç»Ÿä¸€æ–‡æœ¬å¤„ç†é€»è¾‘ï¼Œä¾¿äºç»´æŠ¤å’Œå¤ç”¨",
      },
    ],
    
    // éœ€è¦æ‰©å±•çš„ç°æœ‰ç±»
    extendExistingClasses: [
      {
        item: "TaskStatusToggleHelperï¼šæ·»åŠ ä¸‰æ€åˆ‡æ¢æ–¹æ³•",
        location: "lib/presentation/widgets/utils/task_status_toggle_helper.dart",
        reason: "ç³»ç»Ÿæ‰˜ç›˜éœ€è¦ä¸‰æ€åˆ‡æ¢ï¼ˆpending â†’ completedActive â†’ trashed â†’ pendingï¼‰ï¼Œç°æœ‰æ–¹æ³•åªæ”¯æŒä¸¤æ€åˆ‡æ¢",
        action: [
          "æ·»åŠ  toggleTaskStatusThreeState() é™æ€æ–¹æ³•",
          "æ”¯æŒä¸‰æ€åˆ‡æ¢é€»è¾‘ï¼š",
          "  - pending/doing/paused/inbox â†’ completedActiveï¼ˆè°ƒç”¨ taskService.markCompleted()ï¼‰",
          "  - completedActive â†’ trashedï¼ˆè°ƒç”¨ taskService.softDelete()ï¼‰",
          "  - trashed â†’ pendingï¼ˆè°ƒç”¨ taskService.updateDetails(status: TaskStatus.pending)ï¼‰",
          "å¤ç”¨ç°æœ‰çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•é€»è¾‘",
        ],
        impact: "æ‰©å±•ç°æœ‰å·¥å…·ç±»ï¼Œä¿æŒä»£ç ç»„ç»‡çš„ä¸€è‡´æ€§",
      },
    ],
    
    // é¿å…é‡å¤ä»£ç 
    avoidDuplication: [
      {
        item: "æ—¶é—´æ ¼å¼åŒ–ï¼šä¸è¦æ–°å»º formatElapsedTime()ï¼Œç›´æ¥ä½¿ç”¨ ClockTimerUtils.formatElapsedTimeCompact()",
        reason: "é¿å…é‡å¤å®ç°ç›¸åŒåŠŸèƒ½",
      },
      {
        item: "ä»»åŠ¡çŠ¶æ€åˆ‡æ¢ï¼šä¸è¦ç›´æ¥åœ¨ SystemTrayService ä¸­å®ç°åˆ‡æ¢é€»è¾‘ï¼Œä½¿ç”¨ TaskStatusToggleHelper",
        reason: "ä¿æŒä¸šåŠ¡é€»è¾‘çš„ç»Ÿä¸€æ€§å’Œå¯ç»´æŠ¤æ€§",
      },
      {
        item: "æ–‡æœ¬æˆªæ–­ï¼šä¸è¦é‡å¤å®ç°æˆªæ–­é€»è¾‘ï¼Œä½¿ç”¨æå–çš„ TextUtils.truncate()",
        reason: "é¿å…ä»£ç é‡å¤ï¼Œä¾¿äºç»Ÿä¸€ä¿®æ”¹",
      },
      {
        item: "QuickAddSheet æ˜¾ç¤ºï¼šä¸è¦é‡å¤ showModalBottomSheet çš„è°ƒç”¨ä»£ç ï¼Œä½¿ç”¨æå–çš„ showQuickAddSheet()",
        reason: "æ¶ˆé™¤ä»£ç é‡å¤ï¼Œç»Ÿä¸€æ˜¾ç¤ºé€»è¾‘",
      },
    ],
    
    // é‡æ„è®¡åˆ’
    refactoringPlan: [
      {
        phase: "é˜¶æ®µ 0ï¼šé‡æ„ç°æœ‰ä»£ç ï¼ˆåœ¨å®ç°ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ä¹‹å‰ï¼‰",
        tasks: [
          "æå– TextUtils.truncate() æ–¹æ³•ï¼Œå¹¶æ›´æ–° project_milestone_text_utils.dart ä½¿ç”¨æ–°æ–¹æ³•",
          "æå– showQuickAddSheet() æ–¹æ³•ï¼Œå¹¶æ›´æ–°æ‰€æœ‰ç°æœ‰è°ƒç”¨ç‚¹",
          "æ‰©å±• TaskStatusToggleHelperï¼Œæ·»åŠ  toggleTaskStatusThreeState() æ–¹æ³•",
          "åˆ›å»º DebounceUtil å·¥å…·ç±»",
        ],
        estimatedTime: "1-2 å°æ—¶",
        priority: "high",
        note: "è¿™äº›é‡æ„åº”è¯¥åœ¨å®ç°ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ä¹‹å‰å®Œæˆï¼Œç¡®ä¿ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½å¯ä»¥ç›´æ¥å¤ç”¨é‡æ„åçš„ä»£ç ",
      },
    ],
  },

  // ===========================================
  // 6. æŠ€æœ¯ç»†èŠ‚å’Œæ³¨æ„äº‹é¡¹ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  technicalDetails: {
    // å…³é”®æŠ€æœ¯å†³ç­–
    keyDecisions: {
      // åº“é€‰æ‹©
      libraryChoice: {
        recommendation: "ä½¿ç”¨ tray_manager å’Œ window_manager åŒ…",
        reason: "tray_manager æä¾›è·¨å¹³å°çš„ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼Œwindow_manager æä¾›çª—å£ç®¡ç†åŠŸèƒ½ï¼Œä¸¤è€…é…åˆä½¿ç”¨å¯ä»¥æ»¡è¶³æ‰€æœ‰éœ€æ±‚",
        alternative: "å¦‚æœ tray_manager ä¸æ”¯æŒæŸäº›åŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¹³å°ç‰¹å®šçš„ API",
      },
      // å®ç°æ–¹æ¡ˆ
      implementation: {
        method: "ä½¿ç”¨æœåŠ¡å±‚å°è£…ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼Œé€šè¿‡ Provider æä¾›å…¨å±€è®¿é—®",
        stateManagement: "ä½¿ç”¨ Riverpod è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œç›‘å¬ä»»åŠ¡åˆ—è¡¨å’Œè®¡æ—¶å™¨çŠ¶æ€å˜åŒ–",
        rollback: "å¦‚æœç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½å‡ºç°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡é…ç½®å¼€å…³ç¦ç”¨ï¼Œä¸å½±å“åº”ç”¨æ ¸å¿ƒåŠŸèƒ½",
      },
      // å¹³å°å…¼å®¹æ€§
      platformCompatibility: {
        windows: "ä½¿ç”¨ ICO æ ¼å¼å›¾æ ‡ï¼ˆassets/logo/app_icon.icoï¼‰ï¼Œæ”¯æŒç³»ç»Ÿæ‰˜ç›˜èœå•",
        linux: "ä½¿ç”¨ PNG æ ¼å¼å›¾æ ‡ï¼ˆassets/logo/granostack-logo-transparent.pngï¼‰ï¼Œæ”¯æŒç³»ç»Ÿæ‰˜ç›˜èœå•ï¼ˆå–å†³äºæ¡Œé¢ç¯å¢ƒï¼‰",
        macos: "ä½¿ç”¨ PNG æ ¼å¼å›¾æ ‡ï¼ˆassets/logo/granostack-logo-transparent.pngï¼‰ï¼Œæ”¯æŒèœå•æ å›¾æ ‡å’Œèœå•",
        note: "ä¸åŒå¹³å°å¯¹èœå•é¡¹é¢œè‰²ã€å­èœå•çš„æ”¯æŒå¯èƒ½ä¸åŒï¼Œéœ€è¦åšå…¼å®¹å¤„ç†",
        platformDetection: "ä½¿ç”¨ dart:io Platform.isWindowsã€Platform.isLinuxã€Platform.isMacOS æ£€æµ‹å¹³å°",
      },
      // Context è®¿é—®
      contextAccess: {
        method: "ä½¿ç”¨ GlobalKey<NavigatorState> è·å– BuildContext",
        implementation: "åœ¨ app.dart ä¸­å®šä¹‰é™æ€ navigatorKeyï¼Œåœ¨ MaterialApp.router ä¸­è®¾ç½®ï¼Œåœ¨ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡ä¸­é€šè¿‡ navigatorKey.currentContext è®¿é—®",
        fallback: "å¦‚æœ context ä¸º nullï¼Œä½¿ç”¨è‹±æ–‡é»˜è®¤å€¼æˆ–è®°å½•é”™è¯¯æ—¥å¿—",
      },
      // æœ¬åœ°åŒ–å­—ç¬¦ä¸²
      localization: {
        method: "é€šè¿‡ navigatorKey.currentContext è·å– contextï¼Œä½¿ç”¨ AppLocalizations.of(context) è·å–æœ¬åœ°åŒ–å­—ç¬¦ä¸²",
        fallback: "å¦‚æœ context ä¸º nullï¼Œä½¿ç”¨è‹±æ–‡é»˜è®¤å€¼ï¼ˆç¡¬ç¼–ç ï¼‰",
        note: "èœå•é¡¹æ–‡æœ¬éœ€è¦æ”¯æŒå¤šè¯­è¨€ï¼Œä½†ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡æ— æ³•ç›´æ¥è®¿é—® contextï¼Œéœ€è¦é€šè¿‡ navigatorKey è·å–",
      },
    },
    
    // ä»£ç è§„èŒƒè¦æ±‚
    codeStandards: {
      // æœåŠ¡å±‚è§„èŒƒ
      serviceRule: {
        rule: "æœåŠ¡å±‚ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ï¼ŒåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†",
        location: "lib/core/services/system_tray_service.dart",
        example: "æ‰€æœ‰æ–¹æ³•éƒ½åŒ…å« try-catchï¼Œè®°å½•é”™è¯¯æ—¥å¿—ï¼Œä¸æŠ›å‡ºå¼‚å¸¸",
        note: "ç¡®ä¿æœåŠ¡å±‚çš„ç¨³å®šæ€§ï¼Œé”™è¯¯ä¸åº”è¯¥å½±å“åº”ç”¨æ­£å¸¸è¿è¡Œ",
      },
      // å·¥å…·ç±»è§„èŒƒ
      utilRule: {
        rule: "å·¥å…·ç±»ä½¿ç”¨é™æ€æ–¹æ³•ï¼Œä¸åŒ…å«çŠ¶æ€ï¼Œæ–¹æ³•åº”è¯¥æ˜¯çº¯å‡½æ•°",
        location: "lib/core/utils/tray_menu_builder.dart",
        example: "æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œè¾“å…¥å‚æ•°ï¼Œè¿”å›ç»“æœï¼Œä¸ä¿®æ”¹å¤–éƒ¨çŠ¶æ€",
        note: "å·¥å…·ç±»åº”è¯¥æ˜“äºæµ‹è¯•å’Œå¤ç”¨",
      },
      // ç±»å‹å®‰å…¨
      typeSafety: {
        rule: "ä½¿ç”¨å¼ºç±»å‹ï¼Œé¿å…ä½¿ç”¨ dynamicï¼Œä½¿ç”¨æšä¸¾è¡¨ç¤ºèœå•é¡¹ç±»å‹",
        location: "æ‰€æœ‰ç›¸å…³æ–‡ä»¶",
        example: "ä½¿ç”¨ MenuItemKey æšä¸¾è¡¨ç¤ºèœå•é¡¹ keyï¼Œä½¿ç”¨ TaskStatus æšä¸¾è¡¨ç¤ºä»»åŠ¡çŠ¶æ€",
        note: "ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯",
      },
    },
    
    // æ€§èƒ½è€ƒè™‘
    performance: {
      optimization: [
        "èœå•æ›´æ–°ä½¿ç”¨é˜²æŠ–ï¼ˆdebounceï¼‰ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„æ›´æ–°",
        "ä»»åŠ¡åˆ—è¡¨ç›‘å¬ä½¿ç”¨ StreamProviderï¼Œåªåœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°",
        "è®¡æ—¶å™¨æ—¶é—´ä¸å†ä½¿ç”¨åå°å®šæ—¶å™¨ï¼Œåªåœ¨æ‰“å¼€æ‰˜ç›˜èœå•æ—¶å³æ—¶è®¡ç®— HH:MM",
        "èœå•æ„å»ºæ—¶ç¼“å­˜ç»“æœï¼Œåªåœ¨æ•°æ®å˜åŒ–æ—¶é‡æ–°æ„å»º",
      ],
      monitoring: [
        "è®°å½•èœå•æ›´æ–°é¢‘ç‡ï¼Œç›‘æ§æ€§èƒ½",
        "è®°å½•èœå•æ„å»ºè€—æ—¶ï¼Œä¼˜åŒ–æ…¢é€Ÿæ“ä½œ",
        "è®°å½•äº‹ä»¶å¤„ç†è€—æ—¶ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ",
      ],
    },
    
    // å®‰å…¨è€ƒè™‘
    security: {
      concerns: [
        "ç³»ç»Ÿæ‰˜ç›˜èœå•é¡¹ç‚¹å‡»äº‹ä»¶éœ€è¦éªŒè¯å‚æ•°ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»",
        "ä»»åŠ¡ ID éœ€è¦éªŒè¯ï¼Œç¡®ä¿æ˜¯æœ‰æ•ˆçš„ UUID",
        "é€€å‡ºåº”ç”¨æ—¶éœ€è¦æ¸…ç†æ•æ„Ÿæ•°æ®",
      ],
    },
  },

  // ===========================================
  // 6. ä¾èµ–å…³ç³»å›¾ï¼ˆå¯é€‰ï¼‰
  // ===========================================
  dependencies: {
    // å¤–éƒ¨ä¾èµ–
    externalDependencies: [
      "package:tray_manager (^0.2.0)",
      "package:window_manager (^0.5.1)",
      "package:flutter_riverpod (çŠ¶æ€ç®¡ç†)",
      "package:go_router (è·¯ç”±å¯¼èˆª)",
    ],
    
    // æœåŠ¡å±‚ä¾èµ–
    serviceLayer: [
      "lib/core/services/system_tray_service.dart",
      "lib/core/services/task_service.dart",
    ],
    
    // Provider å±‚ä¾èµ–
    providerLayer: [
      "lib/core/providers/system_tray_provider.dart",
      "lib/core/providers/task_query_providers.dart",
      "lib/core/providers/pinned_task_provider.dart",
      "lib/core/providers/focus_providers.dart",
      "lib/core/providers/service_providers.dart",
    ],
    
    // UI ç»„ä»¶å±‚ä¾èµ–
    uiLayer: [
      "lib/presentation/widgets/utils/task_bottom_sheet_helper.dart",
      "lib/presentation/tasks/quick_tasks/quick_add_sheet.dart",
      "lib/presentation/navigation/app_router.dart",
      "lib/presentation/tasks/task_list_page.dart",
    ],
    
    // å·¥å…·å±‚ä¾èµ–
    utilLayer: [
      "lib/core/utils/tray_menu_builder.dart",
    ],
  },

  // ===========================================
  // 7. æµ‹è¯•ç­–ç•¥å’Œè¯¦ç»†æµ‹è¯•ç”¨ä¾‹ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  testing: {
    // å•å…ƒæµ‹è¯•
    unitTests: [
      {
        file: "test/core/utils/tray_menu_builder_test.dart",
        description: "æµ‹è¯•èœå•æ„å»ºå™¨çš„å„ç§æ–¹æ³•",
        testCases: [
          {
            group: "ä»»åŠ¡çŠ¶æ€å›¾æ ‡æ˜ å°„",
            cases: [
              {
                name: "æ´»è·ƒä»»åŠ¡è¿”å›ç©ºæ¡†å›¾æ ‡",
                test: "æµ‹è¯• getStatusIcon() æ–¹æ³•ï¼Œä¼ å…¥ pending çŠ¶æ€ï¼Œè¿”å› â˜",
              },
              {
                name: "å·²å®Œæˆä»»åŠ¡è¿”å›å‹¾é€‰å›¾æ ‡",
                test: "æµ‹è¯• getStatusIcon() æ–¹æ³•ï¼Œä¼ å…¥ completedActive çŠ¶æ€ï¼Œè¿”å› â˜‘",
              },
              {
                name: "å·²åˆ é™¤ä»»åŠ¡è¿”å›å‰å·å›¾æ ‡",
                test: "æµ‹è¯• getStatusIcon() æ–¹æ³•ï¼Œä¼ å…¥ trashed çŠ¶æ€ï¼Œè¿”å› â˜’",
              },
            ],
          },
          {
            group: "æ—¶é—´æ ¼å¼åŒ–",
            cases: [
              {
                name: "æ ¼å¼åŒ–å°äº1å°æ—¶çš„æ—¶é—´",
                test: "æµ‹è¯• formatElapsedTime() æ–¹æ³•ï¼Œä¼ å…¥ 15 åˆ†é’Ÿï¼Œè¿”å› '15:30'",
              },
              {
                name: "æ ¼å¼åŒ–å¤§äº1å°æ—¶çš„æ—¶é—´",
                test: "æµ‹è¯• formatElapsedTime() æ–¹æ³•ï¼Œä¼ å…¥ 1 å°æ—¶ 15 åˆ†é’Ÿï¼Œè¿”å› '01:15:30'",
              },
            ],
          },
          {
            group: "ä»»åŠ¡æ ‡é¢˜æ ¼å¼åŒ–",
            cases: [
              {
                name: "æˆªæ–­è¿‡é•¿æ ‡é¢˜",
                test: "æµ‹è¯• formatTaskTitle() æ–¹æ³•ï¼Œä¼ å…¥è¶…è¿‡ 50 å­—ç¬¦çš„æ ‡é¢˜ï¼Œè¿”å›æˆªæ–­åçš„æ ‡é¢˜åŠ çœç•¥å·",
              },
              {
                name: "ä¿ç•™æ­£å¸¸é•¿åº¦æ ‡é¢˜",
                test: "æµ‹è¯• formatTaskTitle() æ–¹æ³•ï¼Œä¼ å…¥æ­£å¸¸é•¿åº¦çš„æ ‡é¢˜ï¼Œè¿”å›åŸæ ‡é¢˜",
              },
            ],
          },
        ],
      },
    ],
    
    // Widget æµ‹è¯•
    widgetTests: [
      {
        file: "test/core/services/system_tray_service_test.dart",
        description: "æµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡çš„åŠŸèƒ½ï¼ˆéœ€è¦ mock tray_manager å’Œ window_managerï¼‰",
        testCases: [
          {
            group: "èœå•æ„å»º",
            cases: [
              {
                name: "æ„å»ºåŒ…å«è®¡æ—¶å™¨çŠ¶æ€çš„èœå•",
                test: "æµ‹è¯• buildMenu() æ–¹æ³•ï¼Œå½“æœ‰æ´»è·ƒè®¡æ—¶å™¨æ—¶ï¼Œèœå•åŒ…å«è®¡æ—¶å™¨çŠ¶æ€é¡¹",
              },
              {
                name: "æ„å»ºåŒ…å«ä»»åŠ¡åˆ—è¡¨çš„èœå•",
                test: "æµ‹è¯• buildMenu() æ–¹æ³•ï¼Œå½“æœ‰ä»»åŠ¡æ—¶ï¼Œèœå•åŒ…å«ä»»åŠ¡åˆ—è¡¨é¡¹",
              },
            ],
          },
          {
            group: "äº‹ä»¶å¤„ç†",
            cases: [
              {
                name: "å¤„ç†ä»»åŠ¡çŠ¶æ€åˆ‡æ¢",
                test: "æµ‹è¯• handleTaskClick() æ–¹æ³•ï¼Œç‚¹å‡»ä»»åŠ¡é¡¹åï¼Œä»»åŠ¡çŠ¶æ€æ­£ç¡®åˆ‡æ¢",
              },
              {
                name: "å¤„ç†å¼€å§‹è®¡æ—¶",
                test: "æµ‹è¯• handleTaskSubmenuClick() æ–¹æ³•ï¼Œç‚¹å‡»'å¼€å§‹è®¡æ—¶'åï¼Œä»»åŠ¡çŠ¶æ€åˆ‡æ¢åˆ° doing å¹¶ç½®é¡¶",
              },
            ],
          },
        ],
      },
    ],
    
    // é›†æˆæµ‹è¯•ï¼ˆå¯é€‰ï¼Œå› ä¸ºç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½éœ€è¦çœŸå®çš„ç³»ç»Ÿç¯å¢ƒï¼‰
    integrationTests: [
      {
        file: "integration_test/desktop/system_tray_test.dart",
        description: "é›†æˆæµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼ˆéœ€è¦åœ¨çœŸå®çš„æ¡Œé¢ç¯å¢ƒä¸­è¿è¡Œï¼‰",
        testCases: [
          {
            group: "ç³»ç»Ÿæ‰˜ç›˜åˆå§‹åŒ–",
            cases: [
              {
                name: "ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡æ­£å¸¸æ˜¾ç¤º",
                test: "åœ¨ Windows/Linux/macOS ä¸Šè¿è¡Œåº”ç”¨ï¼ŒéªŒè¯ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡æ˜¯å¦æ­£å¸¸æ˜¾ç¤º",
              },
              {
                name: "èœå•æ­£å¸¸æ˜¾ç¤º",
                test: "å³é”®ç‚¹å‡»ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ï¼ŒéªŒè¯èœå•æ˜¯å¦æ­£å¸¸æ˜¾ç¤º",
              },
            ],
          },
          {
            group: "èœå•é¡¹åŠŸèƒ½",
            cases: [
              {
                name: "ç‚¹å‡»ä»»åŠ¡é¡¹åˆ‡æ¢çŠ¶æ€",
                test: "ç‚¹å‡»ä»»åŠ¡èœå•é¡¹ï¼ŒéªŒè¯ä»»åŠ¡çŠ¶æ€æ˜¯å¦æ­£ç¡®åˆ‡æ¢",
              },
              {
                name: "ç‚¹å‡»å¼€å§‹è®¡æ—¶",
                test: "ç‚¹å‡»ä»»åŠ¡å­èœå•ä¸­çš„'å¼€å§‹è®¡æ—¶'ï¼ŒéªŒè¯ä»»åŠ¡æ˜¯å¦å¼€å§‹è®¡æ—¶å¹¶ç½®é¡¶",
              },
              {
                name: "ç‚¹å‡»æ‰“å¼€ä»»åŠ¡",
                test: "ç‚¹å‡»ä»»åŠ¡å­èœå•ä¸­çš„'æ‰“å¼€'ï¼ŒéªŒè¯çª—å£æ˜¯å¦æ‰“å¼€å¹¶æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…",
              },
            ],
          },
        ],
      },
    ],
  },

  // ===========================================
  // 8. é£é™©ç‚¹å’Œæ³¨æ„äº‹é¡¹ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  risks: [
    {
      risk: "å¹³å°å…¼å®¹æ€§é—®é¢˜ï¼šä¸åŒå¹³å°å¯¹ç³»ç»Ÿæ‰˜ç›˜èœå•çš„æ”¯æŒå¯èƒ½ä¸åŒ",
      description: "tray_manager æ”¯æŒ Windowsã€macOS å’Œ Linuxï¼Œä½†ä¸åŒå¹³å°çš„å®ç°æ–¹å¼å­˜åœ¨å·®å¼‚ã€‚Linux å¯èƒ½éœ€è¦å®‰è£…é¢å¤–çš„ä¾èµ–åº“ï¼ˆå¦‚ libappindicator3-1ï¼‰æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºæ‰˜ç›˜å›¾æ ‡ã€‚ä¸åŒå¹³å°çš„èœå•è¡Œä¸ºå¯èƒ½ä¸ä¸€è‡´ã€‚",
      mitigation: [
        "åœ¨å®ç°æ—¶æ£€æµ‹å¹³å°ï¼Œå¯¹ä¸åŒå¹³å°ä½¿ç”¨ä¸åŒçš„å®ç°æ–¹å¼ï¼Œæä¾›é™çº§æ–¹æ¡ˆ",
        "Linux å¹³å°ï¼šç¡®ä¿å®‰è£… libappindicator3-1 ä¾èµ–åº“",
        "åœ¨ Windows/Linux/macOS ä¸Šåˆ†åˆ«è¿›è¡Œå……åˆ†æµ‹è¯•",
        "æä¾›å¹³å°ç‰¹å®šçš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•",
      ],
      priority: "high",
      check: "åœ¨ Windows/Linux/macOS ä¸Šåˆ†åˆ«æµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼ŒéªŒè¯å›¾æ ‡æ˜¾ç¤ºã€èœå•åŠŸèƒ½æ˜¯å¦æ­£å¸¸",
      enforcement: "åœ¨ä»£ç ä¸­æ·»åŠ å¹³å°æ£€æµ‹ï¼Œå¯¹ä¸åŒå¹³å°ä½¿ç”¨ä¸åŒçš„èœå•æ„å»ºé€»è¾‘ï¼Œæ·»åŠ å¹³å°ç‰¹å®šçš„é”™è¯¯å¤„ç†",
      verified: true,
      source: "ç½‘ç»œæœç´¢ç¡®è®¤ï¼šä¸åŒå¹³å°çš„ç³»ç»Ÿæ‰˜ç›˜å®ç°æ–¹å¼å­˜åœ¨å·®å¼‚ï¼ŒLinux éœ€è¦é¢å¤–ä¾èµ–",
    },
    {
      risk: "èœå•é¡¹é¢œè‰²ä¸æ”¯æŒï¼šç³»ç»Ÿæ‰˜ç›˜èœå•çš„å¤–è§‚é€šå¸¸ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ï¼Œæ— æ³•è‡ªå®šä¹‰é¢œè‰²",
      description: "tray_manager çš„æ–‡æ¡£æœªæ˜ç¡®æåŠå¯¹èœå•é¡¹é¢œè‰²è‡ªå®šä¹‰çš„æ”¯æŒã€‚ç³»ç»Ÿæ‰˜ç›˜èœå•çš„å¤–è§‚é€šå¸¸ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ï¼Œå¼€å‘è€…å¯¹å…¶å®šåˆ¶èƒ½åŠ›æœ‰é™ã€‚macOS çš„æ‰˜ç›˜å›¾æ ‡é€šå¸¸æ˜¯é»‘ç™½çš„ï¼Œå½©è‰²å›¾æ ‡å¯èƒ½æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚",
      mitigation: [
        "ä½¿ç”¨å›¾æ ‡å’Œå‰ç¼€ç¬¦å·æ¥æ ‡è¯†é€¾æœŸä»»åŠ¡ï¼ˆå¦‚ âš ï¸ï¼‰ï¼Œä¸ä¾èµ–é¢œè‰²",
        "åœ¨èœå•æ„å»ºæ—¶ï¼Œå¦‚æœå¹³å°ä¸æ”¯æŒé¢œè‰²ï¼Œä½¿ç”¨å›¾æ ‡æ›¿ä»£",
        "é€šè¿‡å›¾æ ‡å’Œæ–‡æœ¬å†…å®¹æ¥ä¼ è¾¾ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä¾èµ–é¢œè‰²",
      ],
      priority: "medium",
      check: "åœ¨ä¸åŒå¹³å°ä¸Šæµ‹è¯•èœå•é¡¹æ˜¾ç¤ºï¼ŒéªŒè¯é¢œè‰²æ˜¯å¦ç”Ÿæ•ˆï¼Œå¦‚æœä¸æ”¯æŒåˆ™ä½¿ç”¨å›¾æ ‡æ›¿ä»£",
      enforcement: "åœ¨èœå•æ„å»ºæ—¶ï¼Œä¸ä¾èµ–é¢œè‰²ï¼Œå§‹ç»ˆä½¿ç”¨å›¾æ ‡å’Œç¬¦å·æ¥æ ‡è¯†ä¸åŒçŠ¶æ€",
      verified: true,
      source: "ç½‘ç»œæœç´¢ç¡®è®¤ï¼šç³»ç»Ÿæ‰˜ç›˜èœå•çš„å¤–è§‚ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ï¼Œæ— æ³•è‡ªå®šä¹‰é¢œè‰²",
    },
    {
      risk: "å­èœå•æ”¯æŒä¸ç¡®å®šï¼štray_manager å¯èƒ½æ”¯æŒå­èœå•ï¼Œä½†åœ¨ä¸åŒå¹³å°ä¸Šçš„è¡¨ç°å¯èƒ½å­˜åœ¨å·®å¼‚",
      description: "æœç´¢ç»“æœæœ‰çŸ›ç›¾ï¼šæœ‰äº›èµ„æ–™æ˜¾ç¤º tray_manager æ”¯æŒåˆ›å»ºå­èœå•ï¼Œä½†åœ¨ä¸åŒå¹³å°ä¸Šçš„è¡¨ç°å¯èƒ½å­˜åœ¨å·®å¼‚ã€‚æŸäº›å¹³å°å¯èƒ½ä¸æ”¯æŒå­èœå•æˆ–æ”¯æŒä¸å®Œæ•´ã€‚",
      mitigation: [
        "åœ¨å®é™…å®ç°æ—¶å…ˆæµ‹è¯•å­èœå•åŠŸèƒ½æ˜¯å¦æ”¯æŒ",
        "å¦‚æœæ”¯æŒï¼Œä½¿ç”¨å­èœå•ï¼›å¦‚æœä¸æ”¯æŒï¼Œä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆï¼ˆå¦‚å°†å­èœå•é¡¹ä½œä¸ºä¸»èœå•é¡¹ï¼Œä½¿ç”¨ç‰¹æ®Šæ ‡è¯†ï¼‰",
        "æ£€æµ‹å¹³å°æ”¯æŒæƒ…å†µï¼Œå¦‚æœä¸æ”¯æŒå­èœå•ï¼Œä½¿ç”¨å…¶ä»–äº¤äº’æ–¹å¼",
        "æä¾›é™çº§æ–¹æ¡ˆï¼šå°†å­èœå•é¡¹ï¼ˆå¼€å§‹è®¡æ—¶ã€æ‰“å¼€ï¼‰ä½œä¸ºä¸»èœå•é¡¹æ˜¾ç¤ºï¼Œä½¿ç”¨ä¸åŒçš„ key åŒºåˆ†",
      ],
      priority: "medium",
      check: "åœ¨ä¸åŒå¹³å°ä¸Šæµ‹è¯•å­èœå•åŠŸèƒ½ï¼ŒéªŒè¯æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚å¦‚æœä¸æ”¯æŒï¼Œä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆ",
      enforcement: "åœ¨èœå•æ„å»ºæ—¶ï¼Œæ£€æµ‹å¹³å°æ˜¯å¦æ”¯æŒå­èœå•ï¼Œå¦‚æœä¸æ”¯æŒï¼Œä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆï¼ˆå°†å­èœå•é¡¹ä½œä¸ºä¸»èœå•é¡¹ï¼‰",
      verified: true,
      source: "ç½‘ç»œæœç´¢ç¡®è®¤ï¼šå­èœå•æ”¯æŒæƒ…å†µä¸ç¡®å®šï¼Œéœ€è¦å®é™…æµ‹è¯•éªŒè¯",
      note: "å¦‚æœå­èœå•ä¸æ”¯æŒï¼Œå¯ä»¥è€ƒè™‘å°†'å¼€å§‹è®¡æ—¶'å’Œ'æ‰“å¼€'ä½œä¸ºä¸»èœå•é¡¹æ˜¾ç¤ºï¼Œä½¿ç”¨ä¸åŒçš„ keyï¼ˆå¦‚ task_{taskId}_start_timerã€task_{taskId}_openï¼‰",
    },
    {
      risk: "çª—å£ç®¡ç†å¤±è´¥ï¼šwindow_manager å¯èƒ½åœ¨æŸäº›å¹³å°ä¸Šæ— æ³•æ­£å¸¸å·¥ä½œ",
      description: "tray_manager ä¸»è¦ç”¨äºæ‰˜ç›˜ç®¡ç†ï¼Œä¸æä¾›çª—å£ç®¡ç†åŠŸèƒ½ã€‚éœ€è¦ç»“åˆ window_manager æ¥å®ç°çª—å£çš„æ‰“å¼€ã€éšè—å’Œæ¢å¤ç­‰åŠŸèƒ½ã€‚window_manager åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ— æ³•æ­£ç¡®ç®¡ç†çª—å£çš„æ‰“å¼€ã€å…³é—­æˆ–æœ€å°åŒ–ç­‰æ“ä½œã€‚",
      mitigation: [
        "æ·»åŠ é”™è¯¯å¤„ç†ï¼Œå¦‚æœçª—å£ç®¡ç†å¤±è´¥ï¼Œè®°å½•æ—¥å¿—ä½†ä¸ä¸­æ–­åº”ç”¨è¿è¡Œ",
        "ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ window_manager",
        "åœ¨æ‰€æœ‰ç›®æ ‡å¹³å°ä¸Šè¿›è¡Œå……åˆ†æµ‹è¯•",
        "æä¾›é™çº§æ–¹æ¡ˆï¼šå¦‚æœçª—å£ç®¡ç†å¤±è´¥ï¼Œè‡³å°‘å°è¯•æ‰“å¼€çª—å£ï¼ˆä¸ä¿è¯ç½®é¡¶ï¼‰",
      ],
      priority: "medium",
      check: "åœ¨ä¸åŒå¹³å°ä¸Šæµ‹è¯•çª—å£æ‰“å¼€/æ¢å¤åŠŸèƒ½ï¼ŒéªŒè¯æ˜¯å¦æ­£å¸¸å·¥ä½œ",
      enforcement: "æ‰€æœ‰çª—å£ç®¡ç†æ“ä½œéƒ½åŒ…å« try-catchï¼Œç¡®ä¿é”™è¯¯ä¸å½±å“åº”ç”¨è¿è¡Œ",
      verified: true,
      source: "ç½‘ç»œæœç´¢ç¡®è®¤ï¼šwindow_manager åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ— æ³•æ­£ç¡®ç®¡ç†çª—å£",
    },
    {
      risk: "æ€§èƒ½é—®é¢˜ï¼šé¢‘ç¹æ›´æ–°æ‰˜ç›˜å›¾æ ‡æˆ–èœå•é¡¹å¯èƒ½å½±å“æ€§èƒ½",
      description: "tray_manager çš„æ€§èƒ½é€šå¸¸æ»¡è¶³ä¸€èˆ¬åº”ç”¨éœ€æ±‚ã€‚ä½†åœ¨é«˜é¢‘ç‡æ›´æ–°æ‰˜ç›˜å›¾æ ‡æˆ–èœå•é¡¹çš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚è¯¯ç”¨åå°å®šæ—¶å™¨æ¯ç§’åˆ·æ–°è®¡æ—¶å™¨æ˜¾ç¤ºï¼‰ï¼Œå¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ã€‚",
      mitigation: [
        "ä½¿ç”¨é˜²æŠ–ï¼ˆdebounceï¼‰ä¼˜åŒ–èœå•æ›´æ–°é¢‘ç‡ï¼Œé™åˆ¶æ›´æ–°é¢‘ç‡ï¼ˆæœ€å¤šæ¯ 500ms æ›´æ–°ä¸€æ¬¡ï¼‰",
        "å–æ¶ˆåå°ç§’çº§è®¡æ—¶å™¨æ›´æ–°ï¼Œæ”¹ä¸ºåœ¨ç”¨æˆ·ç‚¹å‡»æ‰˜ç›˜æ—¶å³æ—¶è®¡ç®— HH:MMï¼Œé¿å…æŒç»­é‡ç»˜",
        "ç¼“å­˜èœå•æ„å»ºç»“æœï¼Œåªåœ¨æ•°æ®å˜åŒ–æˆ–ç”¨æˆ·ç‚¹å‡»æ‰˜ç›˜æ—¶é‡æ–°æ„å»º",
        "é¿å…ä¸å¿…è¦çš„èœå•é‡å»º",
      ],
      priority: "low",
      check: "ç›‘æ§èœå•æ›´æ–°é¢‘ç‡å’Œæ„å»ºè€—æ—¶ï¼Œç¡®ä¿æ€§èƒ½åœ¨å¯æ¥å—èŒƒå›´å†…",
      enforcement: "å®ç°é˜²æŠ–æœºåˆ¶ï¼Œé™åˆ¶èœå•æ›´æ–°é¢‘ç‡ï¼ˆå¦‚æœ€å¤šæ¯ 500ms æ›´æ–°ä¸€æ¬¡ï¼‰ï¼Œè®¡æ—¶å™¨æ—¶é—´åªåœ¨èœå•é‡å»ºæ—¶è®¡ç®—",
      verified: true,
      source: "ç½‘ç»œæœç´¢ç¡®è®¤ï¼šé¢‘ç¹æ›´æ–°å¯èƒ½å½±å“æ€§èƒ½ï¼Œå»ºè®®ä½¿ç”¨èŠ‚æµæˆ–é˜²æŠ–æŠ€æœ¯",
    },
    {
      risk: "èµ„æºæ³„æ¼ï¼šæœªæ­£ç¡®é‡Šæ”¾èµ„æºå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼",
      description: "å¦‚æœåœ¨ä½¿ç”¨ tray_manager æ—¶æœªæ­£ç¡®é‡Šæ”¾èµ„æºï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼ŒæœªåŠæ—¶é”€æ¯ä¸å†ä½¿ç”¨çš„èœå•é¡¹æˆ–å›¾æ ‡ï¼Œæœªå–æ¶ˆå®šæ—¶å™¨ï¼Œæœªç§»é™¤äº‹ä»¶ç›‘å¬å™¨ç­‰ã€‚",
      mitigation: [
        "ç¡®ä¿ dispose() æ–¹æ³•æ­£ç¡®æ¸…ç†æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å®šæ—¶å™¨ã€ç›‘å¬å™¨ç­‰",
        "åœ¨åº”ç”¨é€€å‡ºæ—¶è°ƒç”¨ dispose() æ–¹æ³•",
        "å–æ¶ˆæ‰€æœ‰å®šæ—¶å™¨ï¼š_menuUpdateDebounceTimer?.cancel()",
        "ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼štrayManager.removeListener(...)",
        "ç§»é™¤æ‰˜ç›˜å›¾æ ‡ï¼šawait trayManager.destroy()",
        "è®¾ç½® _disposed æ ‡å¿—ï¼Œé˜²æ­¢åœ¨å·²é”€æ¯åç»§ç»­æ“ä½œ",
      ],
      priority: "high",
      check: "åœ¨åº”ç”¨é€€å‡ºæ—¶æ£€æŸ¥èµ„æºæ˜¯å¦æ­£ç¡®æ¸…ç†ï¼Œä½¿ç”¨å†…å­˜åˆ†æå·¥å…·æ£€æµ‹æ³„æ¼",
      enforcement: "åœ¨ dispose() æ–¹æ³•ä¸­æ¸…ç†æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å–æ¶ˆå®šæ—¶å™¨ã€ç§»é™¤ç›‘å¬å™¨ç­‰ï¼Œç¡®ä¿æ²¡æœ‰èµ„æºæ³„æ¼",
      verified: true,
      source: "ç½‘ç»œæœç´¢ç¡®è®¤ï¼šæœªæ­£ç¡®é‡Šæ”¾èµ„æºå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œéœ€è¦æ­£ç¡®ç®¡ç†èµ„æº",
    },
    {
      risk: "Context è®¿é—®å¤±è´¥ï¼šnavigatorKey.currentContext å¯èƒ½ä¸º null",
      mitigation: "åœ¨è®¿é—® context å‰æ£€æŸ¥æ˜¯å¦ä¸º nullï¼Œå¦‚æœä¸º null åˆ™ä½¿ç”¨é»˜è®¤å€¼æˆ–è®°å½•é”™è¯¯",
      priority: "high",
      check: "åœ¨æ˜¾ç¤ºå¼¹çª—å’Œè·å–æœ¬åœ°åŒ–å­—ç¬¦ä¸²æ—¶æ£€æŸ¥ context æ˜¯å¦ä¸º null",
      enforcement: "æ‰€æœ‰éœ€è¦ context çš„æ“ä½œéƒ½æ·»åŠ  null æ£€æŸ¥ï¼Œæä¾›é™çº§æ–¹æ¡ˆ",
    },
    {
      risk: "èœå•æ›´æ–°è¿‡äºé¢‘ç¹ï¼šä»»åŠ¡åˆ—è¡¨æˆ–è®¡æ—¶å™¨çŠ¶æ€é¢‘ç¹å˜åŒ–å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜",
      mitigation: "å®ç°é˜²æŠ–æœºåˆ¶ï¼Œé™åˆ¶èœå•æ›´æ–°é¢‘ç‡ï¼ˆæœ€å¤šæ¯ 500ms æ›´æ–°ä¸€æ¬¡ï¼‰",
      priority: "medium",
      check: "ç›‘æ§èœå•æ›´æ–°é¢‘ç‡ï¼Œç¡®ä¿ä¸è¶…è¿‡æ¯ 500ms ä¸€æ¬¡",
      enforcement: "åœ¨ updateMenu() æ–¹æ³•ä¸­å®ç°é˜²æŠ–é€»è¾‘ï¼Œä½¿ç”¨ Timer å»¶è¿Ÿæ‰§è¡Œ",
    },
    {
      risk: "ä»»åŠ¡çŠ¶æ€åˆ‡æ¢å¤±è´¥ï¼šä» trashed æ¢å¤åˆ° pending å¯èƒ½å¤±è´¥",
      mitigation: "ä½¿ç”¨ taskService.updateDetails() æ–¹æ³•ï¼Œä¼ å…¥ TaskUpdate(status: TaskStatus.pending)",
      priority: "medium",
      check: "æµ‹è¯•ä» trashed çŠ¶æ€æ¢å¤åˆ° pending çŠ¶æ€çš„åŠŸèƒ½",
      enforcement: "åœ¨ toggleTaskStatus() æ–¹æ³•ä¸­æ­£ç¡®å¤„ç† trashed çŠ¶æ€çš„æ¢å¤",
    },
  ],

  // ===========================================
  // 9. éªŒè¯æ¸…å•ï¼ˆå¿…å¡«ï¼‰
  // ===========================================
  verification: {
    // ä»£ç è´¨é‡æ£€æŸ¥
    codeQuality: [
      "è¿è¡Œ flutter analyzeï¼Œç¡®ä¿æ²¡æœ‰ lint é”™è¯¯",
      "è¿è¡Œ flutter testï¼Œç¡®ä¿æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡",
      "ä»£ç å®¡æŸ¥ï¼Œç¡®ä¿ç¬¦åˆä»£ç è§„èŒƒ",
      "æ£€æŸ¥æ‰€æœ‰æ–¹æ³•éƒ½åŒ…å«é”™è¯¯å¤„ç†",
    ],
    
    // åŠŸèƒ½éªŒè¯
    functionality: [
      "éªŒè¯ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡åœ¨ Windows/Linux/macOS ä¸Šæ­£å¸¸æ˜¾ç¤º",
      "éªŒè¯èœå•æ­£å¸¸æ˜¾ç¤ºï¼ŒåŒ…å«æ‰€æœ‰é¢„æœŸçš„èœå•é¡¹",
      "éªŒè¯è®¡æ—¶å™¨çŠ¶æ€æ­£ç¡®æ˜¾ç¤ºï¼Œæ—¶é—´å®æ—¶æ›´æ–°",
      "éªŒè¯ä»»åŠ¡åˆ—è¡¨æ­£ç¡®æ˜¾ç¤ºï¼ŒåŒ…å«é€¾æœŸå’Œä»Šæ—¥ä»»åŠ¡",
      "éªŒè¯ä»»åŠ¡çŠ¶æ€åˆ‡æ¢æ­£å¸¸å·¥ä½œï¼ˆâ˜â†’â˜‘â†’â˜’â†’â˜ï¼‰",
      "éªŒè¯ä»»åŠ¡å­èœå•æ­£å¸¸å·¥ä½œï¼ˆå¼€å§‹è®¡æ—¶ã€æ‰“å¼€ï¼‰",
      "éªŒè¯ç‚¹å‡»èœå•é¡¹åçª—å£æ­£ç¡®æ‰“å¼€/æ¢å¤",
      "éªŒè¯å¯¼èˆªæ­£ç¡®è·³è½¬åˆ°å¯¹åº”é¡µé¢",
      "éªŒè¯ä»»åŠ¡è¯¦æƒ…å¼¹çª—æ­£ç¡®æ˜¾ç¤º",
      "éªŒè¯å¿«é€Ÿæ·»åŠ ä»»åŠ¡å¼¹çª—æ­£ç¡®æ˜¾ç¤º",
      "éªŒè¯è®¾ç½®é¡µé¢æ­£ç¡®æ‰“å¼€",
      "éªŒè¯é€€å‡ºåº”ç”¨åŠŸèƒ½æ­£å¸¸å·¥ä½œ",
    ],
    
    // æ€§èƒ½éªŒè¯
    performance: [
      "éªŒè¯èœå•æ›´æ–°é¢‘ç‡åœ¨å¯æ¥å—èŒƒå›´å†…ï¼ˆä¸è¶…è¿‡æ¯ 500ms ä¸€æ¬¡ï¼‰",
      "éªŒè¯èœå•æ„å»ºè€—æ—¶åœ¨å¯æ¥å—èŒƒå›´å†…ï¼ˆä¸è¶…è¿‡ 100msï¼‰",
      "éªŒè¯äº‹ä»¶å¤„ç†è€—æ—¶åœ¨å¯æ¥å—èŒƒå›´å†…ï¼ˆä¸è¶…è¿‡ 200msï¼‰",
    ],
    
    // å…¼å®¹æ€§éªŒè¯
    compatibility: [
      "åœ¨ Windows 10/11 ä¸Šæµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½",
      "åœ¨ Linuxï¼ˆUbuntuã€Fedoraï¼‰ä¸Šæµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½",
      "åœ¨ macOS ä¸Šæµ‹è¯•ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½",
      "éªŒè¯ä¸åŒæ¡Œé¢ç¯å¢ƒï¼ˆGNOMEã€KDEã€XFCEï¼‰çš„å…¼å®¹æ€§",
    ],
  },

  // ===========================================
  // 10. æ•°æ®ä¸çŠ¶æ€ï¼ˆå¯é€‰ï¼Œä½†å»ºè®®åŒ…å«ï¼‰
  // ===========================================
  dataAndState: {
    // æ•°æ®æ¨¡å‹å˜æ›´
    modelChanges: [
      "æ— éœ€ä¿®æ”¹æ•°æ®æ¨¡å‹ï¼Œå¤ç”¨ç°æœ‰çš„ Taskã€FocusSession ç­‰æ¨¡å‹",
    ],
    
    // æŒä¹…åŒ–ç»“æ„å˜æ›´
    persistenceChanges: [
      "æ— éœ€ä¿®æ”¹æŒä¹…åŒ–ç»“æ„ï¼Œç³»ç»Ÿæ‰˜ç›˜çŠ¶æ€ä¸æŒä¹…åŒ–ï¼ˆæ¯æ¬¡å¯åŠ¨æ—¶é‡æ–°åˆå§‹åŒ–ï¼‰",
    ],
    
    // çŠ¶æ€ç®¡ç†å˜æ›´
    stateManagementChanges: [
      "æ–°å¢ systemTrayServiceProvider - æä¾›ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡å®ä¾‹",
      "æ–°å¢ systemTrayInitializedProvider - è·Ÿè¸ªç³»ç»Ÿæ‰˜ç›˜åˆå§‹åŒ–çŠ¶æ€",
      "å¤ç”¨ taskSectionsProvider - ç›‘å¬ä»»åŠ¡åˆ—è¡¨å˜åŒ–",
      "å¤ç”¨ pinnedTaskIdProvider - ç›‘å¬ç½®é¡¶ä»»åŠ¡å˜åŒ–",
      "å¤ç”¨ focusSessionProvider - ç›‘å¬è®¡æ—¶å™¨çŠ¶æ€å˜åŒ–",
    ],
  },
}

