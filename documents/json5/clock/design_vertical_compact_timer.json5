{
  // 番茄时钟 - 竖屏紧凑布局设计文档
  // 聚焦手机与平板竖屏的空间效率，并评估 sleek_circular_slider 方案

  // ===========================================
  // 1. 整体设计理念
  // ===========================================
  designPhilosophy: {
    goal: "在竖屏场景下保持沉浸式主题与高信息密度，确保计时器与任务信息同时可见",

    themeIntegration: {
      consistency: [
        "延续 Ocean Breeze 颜色体系与半透明卡片语汇",
        "保留海浪分层渐变背景与柔和波浪动效",
        "沿用番茄时钟的状态色（normal / paused / complete）"
      ],
      innovation: [
        "引入 sleek_circular_slider 的渐变环形组件，提升视觉精致度",
        "为竖屏引入自适应滚动与信息分段，强化内容可达性",
        "在手机与平板竖屏之间建立分级响应式尺寸规则"
      ]
    },

    trends: [
      "Compact Mode：减少上下留白，突出关键任务信息",
      "Motion for Focus：圆环环形动画与轻量滑移暗示状态变化",
      "Responsive Prioritization：根据设备尺寸调整按钮排布与信息折叠"
    ]
  },

  // ===========================================
  // 2. 配色方案
  // ===========================================
  colorScheme: {
    backgroundGradients: {
      light: {
        normal: {
          reference: "PomodoroGradients.getWaveGradient(light.normal)",
          note: "复用海浪分层渐变，竖屏仅调整视口裁剪，无需新增颜色"
        },
        paused: {
          reference: "PomodoroGradients.getWaveGradient(light.paused)"
        },
        complete: {
          reference: "PomodoroGradients.getWaveGradient(light.complete)"
        }
      },
      dark: {
        normal: {
          reference: "PomodoroGradients.getWaveGradient(dark.normal)"
        },
        paused: {
          reference: "PomodoroGradients.getWaveGradient(dark.paused)"
        },
        complete: {
          reference: "PomodoroGradients.getWaveGradient(dark.complete)"
        }
      }
    },

    specificColors: {
      compactTimer: {
        gradient: [
          "OceanBreezeColorSchemes.seaSaltBlue",
          "OceanBreezeColorSchemes.mintCyan",
          "OceanBreezeColorSchemes.pomodoroVibrantOrange"
        ],
        glow: "OceanBreezeColorSchemes.lightSeaSalt.withOpacity(0.45)",
        text: {
          light: "Colors.white",
          dark: "Colors.white"
        }
      },
      controlStrip: {
        background: "Colors.black.withOpacity(0.25)",
        border: "Colors.white.withOpacity(0.28)"
      }
    }
  },

  // ===========================================
  // 3. 布局结构
  // ===========================================
  layout: {
    fullScreen: true,
    hideNavigation: true,

    topBar: {
      showBackButton: true,
      background: "transparent",
      position: "topLeft"
    },

    // 手机竖屏（≤600px）与平板竖屏（>600px）的差异化策略
    contentLayout: {
      direction: "vertical",
      mainAxisAlignment: "start",
      crossAxisAlignment: "stretch",
      safeArea: true,
      padding: {
        phone: { horizontal: 20, vertical: 12 },
        tablet: { horizontal: 28, vertical: 16 }
      },
      scrollable: true
    },

    sections: [
      {
        name: "heroCluster",
        position: "top",
        weight: "fixed",
        children: ["compactTimer", "controlStrip"]
      },
      {
        name: "infoStack",
        position: "middle",
        weight: "flexible",
        children: ["taskInfoCard", "taskAnalysis"]
      },
      {
        name: "subtaskSection",
        position: "bottom",
        weight: "flexible",
        children: ["PomodoroSubtaskSection"]
      }
    ],

    sizeRules: {
      phone: {
        timerDiameter: {
          min: 200,
          max: 235,
          note: "使用 sleek_circular_slider，自适应宽度 72% 但 clamp 至 235"
        },
        verticalSpacing: {
          timerTop: 16,
          betweenTimerAndControls: 16,
          sectionSpacing: 20
        }
      },
      tablet: {
        timerDiameter: {
          min: 240,
          max: 300,
          note: "平板竖屏保留视觉存在感，同时限制高度占比 <40%"
        },
        verticalSpacing: {
          timerTop: 24,
          betweenTimerAndControls: 20,
          sectionSpacing: 24
        }
      }
    }
  },

  // ===========================================
  // 4. UI 组件设计
  // ===========================================
  components: {
    compactTimer: {
      baseWidget: "sleek_circular_slider",
      appearance: {
        customColors: {
          trackColor: "Colors.white.withOpacity(0.16)",
          progressGradient: [
            "OceanBreezeColorSchemes.seaSaltBlue",
            "OceanBreezeColorSchemes.mintCyan",
            "OceanBreezeColorSchemes.pomodoroVibrantOrange"
          ],
          shadowColor: "Colors.black.withOpacity(0.35)"
        },
        width: {
          trackWidth: 12,
          progressBarWidth: 14
        },
        startAngle: 150,
        sweepAngle: 240,
        infoProperties: {
          mainLabelStyle: {
            fontFamily: "monospace",
            fontWeight: "semiBold",
            fontSize: { phone: 32, tablet: 36 }
          },
          modifier: "HH:MM"
        },
        innerWidget: "自定义 Widget，显示 HH:MM + 状态小标签"
      },
      layering: {
        // 在圆环下方叠加柔和光晕，呼应海浪主题
        halo: {
          color: "OceanBreezeColorSchemes.lightSeaSalt.withOpacity(0.35)",
          blurRadius: 60
        },
        overlay: {
          type: "AnimatedGlow",
          intensityRange: [0.45, 0.75],
          duration: "3.2s"
        }
      }
    },

    controlStrip: {
      layout: "Wrap",
      phone: {
        arrangement: "两列自动换行",
        primaryButtons: {
          diameter: 56,
          background: "Colors.white.withOpacity(0.14)",
          border: "Colors.white.withOpacity(0.28)"
        }
      },
      tablet: {
        arrangement: "单行居中",
        primaryButtons: {
          diameter: 64
        }
      },
      integration: {
        anchor: "紧贴计时器底部，通过半透明胶囊背景与圆环连接",
        background: {
          color: "Colors.black.withOpacity(0.22)",
          borderRadius: 20,
          padding: { horizontal: 18, vertical: 10 }
        }
      }
    },

    taskInfoCard: {
      typography: {
        title: { fontSize: { phone: 20, tablet: 22 }, fontWeight: "bold" },
        meta: { fontSize: 14, color: "Colors.white.withOpacity(0.78)" }
      },
      layout: {
        phone: { maxLines: 2 },
        tablet: { maxLines: 3 }
      },
      background: {
        type: "semi_transparent_card",
        color: "Colors.white.withOpacity(0.12)",
        borderRadius: 18,
        padding: { horizontal: 20, vertical: 18 }
      }
    },

    taskAnalysis: {
      collapsedHeight: { phone: 120, tablet: 140 },
      overlayHint: "从下到上渐隐的透明到深色渐层，暗示可滚动",
      pauseBehavior: "维持自动暂停，当输入获得焦点时确保计时器停留"
    },

    subtaskSection: {
      card: {
        padding: { phone: 16, tablet: 20 },
        maxHeight: { phone: 320, tablet: 420 },
        scrollable: true
      },
      item: {
        background: "Colors.white.withOpacity(0.08)",
        borderRadius: 14,
        buttonStyle: {
          background: "Colors.white.withOpacity(0.14)",
          icon: "Icons.timer_outlined"
        }
      }
    }
  },

  // ===========================================
  // 5. 交互与动画
  // ===========================================
  interactions: {
    timer: {
      source: "sleek_circular_slider",
      customizations: [
        "禁用滑动交互，仅用作进度可视化",
        "使用 controller 动态更新 value，实现平滑线性动画",
        "根据状态切换进度渐变与外部光晕颜色"
      ]
    },
    controlButtons: {
      states: {
        idle: "半透明背景 + 白色描边",
        pressed: "增加发光 + 缩放 0.94",
        disabled: "降低不透明度至 0.4"
      },
      haptics: "保持轻度震动反馈（移动端）"
    },
    scrolling: {
      behavior: "Hero 集群固定高度，以下内容可滚动；平板竖屏增加顶部吸附效果",
      overscroll: "使用 GlowColor 与背景渐变保持一致"
    },
    animations: {
      background: "保持既有波浪动画，速度在竖屏下略调慢 10%",
      timerGlow: "抛物线缓入缓出，3.2 秒周期",
      cardEntrance: "淡入 + 8px 向上位移，延迟 80ms 级联"
    }
  },

  // ===========================================
  // 6. 关键场景与边界
  // ===========================================
  scenarios: {
    focusWithLongTitle: {
      behavior: "标题超过两行自动滚动，提供渐隐提示，平板允许第三行",
      impact: "保持任务名称完整可读"
    },
    noSubtasks: {
      placeholder: "展示半透明提示卡，尺寸不超过 120px 高"
    },
    orientationChange: {
      transition: "竖屏 -> 横屏 时钟缩放 + 控制条重新布局，无需动画延迟",
      note: "sleek_circular_slider 需要监听 MediaQuery 变化并更新 diameter"
    },
    accessibility: {
      fontScale: "在 1.3x 内保持布局稳定，超过时允许计时器与控制条堆叠",
      contrast: "按钮/文本对背景对比度 ≥ 4.5"
    }
  },

  // ===========================================
  // 7. 依赖与风险
  // ===========================================
  dependencies: {
    packages: [
      {
        name: "sleek_circular_slider",
        version: "^2.0.1",
        note: "MIT 许可，需评估包大小（~70KB）与后续维护"
      }
    ],
    integrationNotes: [
      "需封装 wrapper 提供 value 与主题定制，避免直接散落在 UI 层",
      "确保与 Riverpod 状态同步，防止 slider 动画与计时状态不一致",
      "评估性能：波浪动画 + slider 动画在低端机的 GPU 占用"
    ],
    risks: [
      "第三方包的动画曲线无法完全匹配现有风格时，需要自定义 painter 备选",
      "竖屏滚动结构需谨慎处理 nested scroll，避免手势冲突"
    ]
  },

  // ===========================================
  // 8. 待确认问题
  // ===========================================
  openQuestions: [
    "是否保留现有自绘圆环作为 Fallback（用于离线/包体敏感场景）？",
    "控制条按钮是否需要在竖屏手机上固定到底部吸附（便于单手操作）？",
    "sleek_circular_slider 是否允许在状态切换时自定义 easing（默认 easeOutCubic）？"
  ]
}

