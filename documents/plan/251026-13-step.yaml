title: "Inbox日期选择器优化 - 执行计划"
date: "2025-10-26"
version: "1.0"

overview:
  description: "重新设计inbox页面中的日期选择器，调整位置到底部，改为OutlinedButton.icon样式，使用简洁文案"
  based_on: "documents/plan/251026-13-preview.yaml"

phases:
  phase_1:
    title: "更新本地化文案"
    description: "修改三种语言的按钮文案为最简洁版本"
    tasks:
      - id: "update_simplified_chinese"
        description: "更新简体中文文案为'截止日期'"
        files: ["lib/l10n/app_zh_CN.arb"]
        changes:
          - "inboxPlanButtonLabel: '移至任务列表' → '截止日期'"
        expected_result: "简体中文显示'截止日期'"
      
      - id: "update_traditional_chinese_hk"
        description: "更新繁体中文(香港)文案为'截止日期'"
        files: ["lib/l10n/app_zh_HK.arb"]
        changes:
          - "inboxPlanButtonLabel: '移至任務清單' → '截止日期'"
        expected_result: "繁体中文(香港)显示'截止日期'"
      
      - id: "update_english"
        description: "更新英文文案为'Due'"
        files: ["lib/l10n/app_en.arb"]
        changes:
          - "inboxPlanButtonLabel: 'Schedule' → 'Due'"
        expected_result: "英文显示'Due'"
    
  phase_2:
    title: "调整布局结构"
    description: "将日期选择器移动到底部，重新排列组件顺序"
    tasks:
      - id: "reorder_components"
        description: "重新排列Column中的子组件顺序"
        files: ["lib/presentation/inbox/inbox_page.dart"]
        changes:
          - "将日期选择器Row移动到底部"
          - "调整SizedBox间距"
          - "确保布局逻辑合理"
        expected_result: "日期选择器位于展开任务视图的底部"
    
  phase_3:
    title: "重新设计按钮样式"
    description: "从IconButton改为OutlinedButton.icon，使用更直观的样式"
    tasks:
      - id: "replace_icon_button"
        description: "替换IconButton为OutlinedButton.icon"
        files: ["lib/presentation/inbox/inbox_page.dart"]
        changes:
          - "移除IconButton和tooltip"
          - "添加OutlinedButton.icon"
          - "使用Icons.calendar_today图标"
          - "设置合适的padding和样式"
        expected_result: "按钮显示为带图标的文字按钮"

implementation_details:
  current_structure: |
    Column(
      children: [
        Row(日期选择器), // 当前在顶部
        SizedBox(height: 12),
        TagPanel(标签面板),
        Text(提示文字),
      ],
    )
  
  target_structure: |
    Column(
      children: [
        TagPanel(标签面板),
        Text(提示文字),
        SizedBox(height: 12),
        OutlinedButton.icon(日期选择器), // 移动到底部
      ],
    )
  
  button_redesign:
    current: |
      IconButton(
        tooltip: l10n.inboxPlanButtonLabel,
        icon: const Icon(Icons.upload),
        onPressed: _isPlanning ? null : () => _planTask(context, task),
      )
    
    target: |
      OutlinedButton.icon(
        onPressed: _isPlanning ? null : () => _planTask(context, task),
        icon: const Icon(Icons.calendar_today, size: 16),
        label: Text(l10n.inboxPlanButtonLabel),
        style: OutlinedButton.styleFrom(
          padding: EdgeInsets.symmetric(horizontal: 12, vertical: 8),
        ),
      )

testing_plan:
  manual_tests:
    - "展开任务，确认日期选择器在底部"
    - "点击'截止日期'按钮，确认日期选择器正常打开"
    - "选择日期，确认任务移动到正确的任务栏"
    - "检查三种语言的文案显示"
    - "验证按钮样式和布局"
  
  edge_cases:
    - "快速连续点击按钮"
    - "取消日期选择"
    - "选择过去的日期"
    - "选择很远的未来日期"

rollback_plan:
  description: "如果出现问题，可以快速回滚到当前实现"
  steps:
    - "恢复IconButton样式"
    - "恢复原来的布局顺序"
    - "恢复原来的文案"

success_criteria:
  functional:
    - "日期选择器位于展开任务视图的底部"
    - "按钮显示为OutlinedButton.icon样式"
    - "按钮文字为'截止日期'/'Due'"
    - "点击按钮正常打开日期选择器"
    - "选择日期后任务正确移动到任务栏"
  
  visual:
    - "按钮样式与整体设计一致"
    - "布局层次清晰，逻辑合理"
    - "文字大小和间距合适"
    - "图标和文字对齐良好"
  
  localization:
    - "简体中文显示'截止日期'"
    - "繁体中文(香港)显示'截止日期'"
    - "英文显示'Due'"
    - "所有语言文案简洁明了"

notes:
  - "保持现有的日期选择逻辑不变"
  - "确保按钮在加载状态时正确禁用"
  - "保持与整体设计风格的一致性"
  - "优化用户体验和操作流程"
