title: "移除展开任务条目中的删除按钮 - 执行计划"
description: "基于preview制定的详细执行步骤"
date: "2025-10-26"
version: "1.0"

steps:
  - id: "step_1"
    title: "定位删除按钮代码"
    description: "在lib/presentation/inbox/inbox_page.dart中找到_ExpandedInboxControlsState中的删除按钮代码"
    action: "read_file"
    target: "lib/presentation/inbox/inbox_page.dart"
    line_range: "610-620"
    expected_result: "确认删除IconButton的位置和代码结构"

  - id: "step_2"
    title: "移除删除按钮"
    description: "从Row中移除删除IconButton，保留编辑和计划按钮"
    action: "search_replace"
    target: "lib/presentation/inbox/inbox_page.dart"
    old_string: |
      IconButton(
        tooltip: l10n.inboxDeleteAction,
        icon: const Icon(Icons.delete_outline),
        onPressed: _isDeleting ? null : () => _deleteTask(context, task),
      ),
    new_string: ""
    expected_result: "删除按钮从界面中移除"

  - id: "step_3"
    title: "验证代码语法"
    description: "检查修改后的代码是否有语法错误"
    action: "read_lints"
    target: "lib/presentation/inbox/inbox_page.dart"
    expected_result: "无语法错误"

  - id: "step_4"
    title: "运行测试"
    description: "运行所有测试确保修改没有破坏现有功能"
    action: "run_terminal_cmd"
    command: "flutter test"
    expected_result: "所有测试通过"

  - id: "step_5"
    title: "启动应用验证"
    description: "启动应用验证删除按钮已移除，滑动删除功能正常"
    action: "run_terminal_cmd"
    command: "flutter run -d macos --debug"
    expected_result: "应用正常启动，展开任务条目时只显示编辑和计划按钮"

verification:
  - "展开任务条目时只显示编辑和计划两个按钮"
  - "删除按钮完全消失"
  - "滑动删除功能仍然有效"
  - "编辑和计划按钮功能正常"
  - "界面布局美观一致"

rollback:
  - "如果出现问题，可以恢复删除按钮代码"
  - "恢复命令：重新添加删除IconButton到Row中"
