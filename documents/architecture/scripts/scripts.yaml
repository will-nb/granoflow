meta:
  name: "Scripts Architecture"
  type: "architecture"
  file_path: "documents/architecture/scripts/"
  description: "GranoFlow 项目脚本架构文档"
  version: "1.0"
  created_date: "251026"
  last_updated: "251026"

scripts_overview:
  name: "Scripts Architecture"
  description: "项目脚本和构建工具的架构文档"
  purpose: "管理项目构建、部署和资源生成"
  
scripts_categories:
  build_tools:
    - name: "anz"
      description: "项目管理脚本"
      file: "anz_command.yaml"
      type: "bash_script"
      purpose: "项目清理、构建和图标生成"
      
  asset_generation:
    - name: "icon_generator"
      description: "图标生成脚本"
      file: "icon_generator.yaml"
      type: "python_script"
      purpose: "生成全平台应用图标"
      
scripts_structure:
  directory: "scripts/"
  subdirectories:
    - name: "icons/"
      description: "图标生成相关脚本"
      files: ["generate.py", "README.md"]
      
  main_files:
    - name: "anz"
      description: "主项目管理脚本"
      type: "bash"
      executable: true
      
scripts_dependencies:
  external:
    - name: "flutter"
      type: "sdk"
      description: "Flutter SDK"
      required: true
      
    - name: "python3"
      type: "runtime"
      description: "Python 3 运行时"
      required: true
      
    - name: "PIL"
      type: "library"
      description: "Python Imaging Library"
      required: true
      
  internal:
    - name: "assets/logo/"
      type: "resources"
      description: "Logo 资源文件"
      required: true
      
scripts_workflow:
  - phase: "initialization"
    description: "初始化阶段"
    operations: ["检查依赖", "验证环境", "准备资源"]
    
  - phase: "execution"
    description: "执行阶段"
    operations: ["执行命令", "处理资源", "生成输出"]
    
  - phase: "cleanup"
    description: "清理阶段"
    operations: ["清理临时文件", "验证输出", "报告结果"]
    
scripts_commands:
  project_management:
    - name: "clean"
      description: "清理项目并重建"
      usage: "./scripts/anz clean"
      operations: ["清空数据库", "flutter clean", "删除构建文件夹", "gen-l10n", "pub get", "analyze"]
      
    - name: "build:aab"
      description: "构建 Android App Bundle"
      usage: "./scripts/anz build:aab"
      operations: ["flutter build appbundle --release"]
      
  asset_generation:
    - name: "icons:generate"
      description: "生成所有平台图标"
      usage: "./scripts/anz icons:generate"
      operations: ["生成 macOS 图标", "生成 iOS 图标", "生成 Android 图标"]
      
scripts_quality:
  testing:
    - name: "unit_tests"
      description: "单元测试"
      coverage: "100%"
      tools: ["pytest", "unittest"]
      
    - name: "integration_tests"
      description: "集成测试"
      coverage: "100%"
      tools: ["bash test", "python test"]
      
  validation:
    - name: "syntax_check"
      description: "语法检查"
      tools: ["bash -n", "python -m py_compile"]
      
    - name: "lint_check"
      description: "代码检查"
      tools: ["shellcheck", "pylint"]
      
scripts_security:
  - name: "input_validation"
    description: "输入验证"
    implementation: "验证所有输入参数"
    testing: "输入验证测试"
    
  - name: "file_permissions"
    description: "文件权限"
    implementation: "检查文件权限"
    testing: "权限测试"
    
scripts_performance:
  - name: "execution_time"
    description: "执行时间"
    optimization: "优化长时间操作"
    monitoring: "执行时间监控"
    
  - name: "resource_usage"
    description: "资源使用"
    optimization: "优化内存和CPU使用"
    monitoring: "资源使用监控"
    
scripts_maintenance:
  - name: "documentation"
    description: "文档维护"
    update_frequency: "每次修改后"
    review_frequency: "每月"
    
  - name: "testing"
    description: "测试维护"
    update_frequency: "每次修改后"
    review_frequency: "每周"
    
  - name: "dependencies"
    description: "依赖维护"
    update_frequency: "每月"
    review_frequency: "每季度"
