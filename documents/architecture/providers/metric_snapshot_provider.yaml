meta:
  name: metricSnapshotProvider
  version: 1.0
  created_date: 251024
  last_updated: 251024
  description: >
    指标快照提供者 - 为主页卡片提供最新聚合数据。

provider_definition:
  name: metricSnapshotProvider
  type: StreamProvider<MetricSnapshot?>
  scope: home_dashboard
  depends_on: [MetricOrchestrator]

responsibility: 为主页卡片提供最新聚合数据

implementation:
  - 监听 MetricOrchestrator 的指标变更
  - 提供缓存的指标快照
  - 支持实时指标更新

metric_fields:
  - totalCompletedTasks: 总完成任务数
  - totalFocusMinutes: 总专注分钟数
  - pendingTasks: 待处理任务数
  - pendingTodayTasks: 今日待处理任务数

usage:
  - 主页仪表板
  - 指标卡片显示
  - 统计概览

dependencies:
  - MetricOrchestrator.latest()
  - MetricSnapshot 模型

error_handling:
  - 指标加载失败时返回 null
  - 指标计算错误时显示默认值

performance_considerations:
  - 使用缓存快照避免重复计算
  - 优化指标查询性能
  - 减少不必要的重建