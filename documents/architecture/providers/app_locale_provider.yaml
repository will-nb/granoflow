meta:
  name: appLocaleProvider
  version: 1.0
  created_date: 251024
  last_updated: 251024
  description: >
    应用语言环境提供者 - 为 MaterialApp 反映当前语言环境偏好设置。

provider_definition:
  name: appLocaleProvider
  type: StreamProvider<Locale>
  scope: global
  depends_on: [PreferenceService]

responsibility: 为 MaterialApp 反映当前语言环境偏好设置

implementation:
  - 监听 PreferenceService 的语言环境变更
  - 将语言环境代码转换为 Locale 对象
  - 提供实时语言环境更新

usage:
  - MaterialApp.locale
  - 本地化文本显示
  - 语言切换功能

dependencies:
  - PreferenceService.watch()
  - AppLocalizations

error_handling:
  - 无效语言环境代码时回退到默认语言
  - 语言环境加载失败时使用系统默认

performance_considerations:
  - 使用 StreamProvider 避免不必要的重建
  - 缓存语言环境对象
  - 延迟加载语言环境资源