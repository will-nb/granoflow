meta:
  name: "TaskTemplate Model"
  type: "model"
  file_path: "lib/data/models/task_template.dart"
  description: "任务模板模型，用于快速创建相似任务"
  version: "1.0"
  created_date: "251025"
  last_updated: "251025"

model_definition:
  name: "TaskTemplate"
  storage: "isar_collection"
  immutable: true
  annotation: "@immutable"
  
fields:
  - name: "id"
    type: "int"
    required: true
    nullable: false
    final: true
    description: "Isar 数据库主键"
    
  - name: "title"
    type: "String"
    required: true
    nullable: false
    final: true
    description: "模板标题"
    
  - name: "parentTaskId"
    type: "int?"
    required: false
    nullable: true
    final: true
    description: "父任务 ID"
    
  - name: "defaultTags"
    type: "List<String>"
    required: false
    nullable: false
    default: "const <String>[]"
    final: true
    description: "默认标签列表"
    
  - name: "createdAt"
    type: "DateTime"
    required: true
    nullable: false
    final: true
    description: "创建时间"
    
  - name: "updatedAt"
    type: "DateTime"
    required: true
    nullable: false
    final: true
    description: "最后更新时间"
    
  - name: "lastUsedAt"
    type: "DateTime?"
    required: false
    nullable: true
    final: true
    description: "最后使用时间"
    
  - name: "seedSlug"
    type: "String?"
    required: false
    nullable: true
    final: true
    description: "种子数据标识符"
    
  - name: "suggestedEstimateMinutes"
    type: "int?"
    required: false
    nullable: true
    final: true
    description: "建议的预估分钟数"
    
constructors:
  - type: "const"
    name: "TaskTemplate"
    parameters:
      - name: "id"
        type: "int"
        required: true
      - name: "title"
        type: "String"
        required: true
      - name: "createdAt"
        type: "DateTime"
        required: true
      - name: "updatedAt"
        type: "DateTime"
        required: true
      - name: "parentTaskId"
        type: "int?"
        required: false
      - name: "defaultTags"
        type: "List<String>"
        required: false
        default: "const <String>[]"
      - name: "lastUsedAt"
        type: "DateTime?"
        required: false
      - name: "seedSlug"
        type: "String?"
        required: false
      - name: "suggestedEstimateMinutes"
        type: "int?"
        required: false
    description: "主构造函数"
    
methods:
  - name: "copyWith"
    return_type: "TaskTemplate"
    parameters:
      - name: "id"
        type: "int?"
        required: false
      - name: "title"
        type: "String?"
        required: false
      - name: "parentTaskId"
        type: "int?"
        required: false
      - name: "defaultTags"
        type: "List<String>?"
        required: false
      - name: "createdAt"
        type: "DateTime?"
        required: false
      - name: "updatedAt"
        type: "DateTime?"
        required: false
      - name: "lastUsedAt"
        type: "DateTime?"
        required: false
      - name: "seedSlug"
        type: "String?"
        required: false
      - name: "suggestedEstimateMinutes"
        type: "int?"
        required: false
    visibility: "public"
    description: "创建任务模板副本"
    
imports:
  - "package:flutter/foundation.dart"
  
dependencies: []
  
relationships:
  - type: "many_to_one"
    target: "Task"
    field: "parentTaskId"
    description: "关联父任务"
    
validation_rules:
  - field: "title"
    rule: "not_empty"
    description: "模板标题不能为空"
  - field: "suggestedEstimateMinutes"
    rule: "positive"
    description: "建议预估分钟数必须为正数"
    
business_rules:
  - name: "template_usage_tracking"
    description: "跟踪模板使用情况"
    implementation: "更新 lastUsedAt 字段"
    
storage_config:
  indexes:
    - field: "parentTaskId"
    - field: "lastUsedAt"
    - field: "createdAt"