meta:
  name: "TagData Model"
  type: "model"
  file_path: "lib/presentation/widgets/tag_data.dart"
  description: "标签数据模型，用于 UI 展示的标签信息封装"
  version: "1.0"
  created_date: "251026"
  last_updated: "251026"

model_definition:
  name: "TagData"
  storage: "memory_only"
  immutable: true
  annotation: "@immutable"
  
fields:
  - name: "slug"
    type: "String"
    required: true
    nullable: false
    final: true
    description: "标签标识符，包含前缀（@ 或 #）"
    
  - name: "label"
    type: "String"
    required: true
    nullable: false
    final: true
    description: "本地化标签文本，已包含前缀"
    
  - name: "color"
    type: "Color"
    required: true
    nullable: false
    final: true
    description: "标签颜色，基于 OceanBreezeColorSchemes"
    
  - name: "icon"
    type: "IconData?"
    required: false
    nullable: true
    final: true
    description: "标签图标，可选"
    
  - name: "prefix"
    type: "String?"
    required: false
    nullable: true
    final: true
    description: "标签前缀，现在为 null（ARB 文件中已包含）"
    
  - name: "kind"
    type: "TagKind"
    required: true
    nullable: false
    final: true
    description: "标签类型"
    
constructors:
  - type: "const"
    name: "TagData"
    parameters:
      - name: "slug"
        type: "String"
        required: true
      - name: "label"
        type: "String"
        required: true
      - name: "color"
        type: "Color"
        required: true
      - name: "icon"
        type: "IconData?"
        required: false
      - name: "prefix"
        type: "String?"
        required: false
      - name: "kind"
        type: "TagKind"
        required: true
    description: "主构造函数"
    
  - type: "factory"
    name: "fromTag"
    parameters:
      - name: "tag"
        type: "Tag"
        required: true
      - name: "locale"
        type: "String"
        required: true
    return_type: "TagData"
    description: "从 Tag 模型创建 TagData"
    implementation: "根据标签类型和 slug 分配颜色、图标和前缀"
    
methods:
  - name: "fromTag"
    return_type: "TagData"
    parameters:
      - name: "tag"
        type: "Tag"
        required: true
      - name: "locale"
        type: "String"
        required: true
    visibility: "public"
    description: "从 Tag 模型创建 TagData 实例"
    implementation: "根据标签类型和 slug 分配颜色、图标和前缀"
    static: true
    
  - name: "_getTagStyle"
    return_type: "(Color, IconData?, String?)"
    parameters:
      - name: "slug"
        type: "String"
        required: true
      - name: "kind"
        type: "TagKind"
        required: true
    visibility: "private"
    description: "根据 slug 和 kind 获取标签样式"
    implementation: "返回颜色、图标和前缀的元组"
    static: true
    
imports:
  - "package:flutter/material.dart"
  - "../data/models/tag.dart"
  - "../../core/theme/ocean_breeze_color_schemes.dart"
  
dependencies:
  - "Tag"
  - "TagKind"
  - "OceanBreezeColorSchemes"
  
relationships: []
  
validation_rules:
  - field: "slug"
    rule: "not_empty"
    description: "标签标识符不能为空"
  - field: "label"
    rule: "not_empty"
    description: "标签文本不能为空"
  - field: "color"
    rule: "not_null"
    description: "标签颜色不能为 null"
    
business_rules:
  - name: "color_assignment"
    description: "标签颜色分配规则"
    implementation: "根据标签类型和 slug 分配特定颜色"
    context_tags: "使用 lakeCyan 颜色和 place_outlined 图标"
    urgency_tags: "根据紧急程度分配不同颜色（urgent: softPink, not_urgent: lightBlueGray）"
    importance_tags: "根据重要程度分配不同颜色（important: warmYellow, not_important: silverGray）"
    special_tags: "使用特定颜色（waiting: disabledGray, wasted: secondaryText）"
    
  - name: "prefix_handling"
    description: "前缀处理规则"
    implementation: "ARB 文件中已包含前缀，不再单独返回"
    note: "prefix 字段现在始终为 null"
    
  - name: "icon_assignment"
    description: "图标分配规则"
    implementation: "根据标签类型和 slug 分配相应图标"
    context_tags: "使用 place_outlined 图标"
    urgency_tags: "使用 priority_high 或 schedule 图标"
    importance_tags: "使用 star_outline 或 star_border 图标"
    special_tags: "使用 hourglass_empty 或 delete_outline 图标"
    
color_mapping:
  context_tags:
    color: "OceanBreezeColorSchemes.lakeCyan"
    icon: "Icons.place_outlined"
    description: "上下文标签使用湖光青色"
    
  urgency_tags:
    urgent:
      color: "OceanBreezeColorSchemes.softPink"
      icon: "Icons.priority_high"
      description: "紧急标签使用柔粉红色"
    not_urgent:
      color: "OceanBreezeColorSchemes.lightBlueGray"
      icon: "Icons.schedule"
      description: "非紧急标签使用浅蓝灰色"
      
  importance_tags:
    important:
      color: "OceanBreezeColorSchemes.warmYellow"
      icon: "Icons.star_outline"
      description: "重要标签使用暖黄色"
    not_important:
      color: "OceanBreezeColorSchemes.silverGray"
      icon: "Icons.star_border"
      description: "不重要标签使用银灰色"
      
  special_tags:
    waiting:
      color: "OceanBreezeColorSchemes.disabledGray"
      icon: "Icons.hourglass_empty"
      description: "等待标签使用禁用灰色"
    wasted:
      color: "OceanBreezeColorSchemes.secondaryText"
      icon: "Icons.delete_outline"
      description: "浪费标签使用次要文字色"
      
  default:
    color: "OceanBreezeColorSchemes.seaSaltBlue"
    icon: "Icons.tag"
    description: "未知标签使用默认海盐蓝色"
