meta:
  name: "MetricSnapshot Model"
  type: "model"
  file_path: "lib/data/models/metric_snapshot.dart"
  description: "指标快照模型，记录应用性能指标"
  version: "1.0"
  created_date: "251025"
  last_updated: "251025"

model_definition:
  name: "MetricSnapshot"
  storage: "isar_collection"
  immutable: true
  annotation: "@immutable"
  
fields:
  - name: "id"
    type: "int"
    required: true
    nullable: false
    final: true
    description: "Isar 数据库主键"
    
  - name: "totalCompletedTasks"
    type: "int"
    required: true
    nullable: false
    final: true
    description: "总完成任务数"
    
  - name: "totalFocusMinutes"
    type: "int"
    required: true
    nullable: false
    final: true
    description: "总专注分钟数"
    
  - name: "pendingTasks"
    type: "int"
    required: true
    nullable: false
    final: true
    description: "待处理任务数"
    
  - name: "pendingTodayTasks"
    type: "int"
    required: true
    nullable: false
    final: true
    description: "今日待处理任务数"
    
  - name: "calculatedAt"
    type: "DateTime"
    required: true
    nullable: false
    final: true
    description: "计算时间"
    
constructors:
  - type: "const"
    name: "MetricSnapshot"
    parameters:
      - name: "id"
        type: "int"
        required: true
      - name: "totalCompletedTasks"
        type: "int"
        required: true
      - name: "totalFocusMinutes"
        type: "int"
        required: true
      - name: "pendingTasks"
        type: "int"
        required: true
      - name: "pendingTodayTasks"
        type: "int"
        required: true
      - name: "calculatedAt"
        type: "DateTime"
        required: true
    description: "主构造函数"
    
imports:
  - "package:flutter/foundation.dart"
  
dependencies: []
  
relationships: []
  
validation_rules:
  - field: "totalCompletedTasks"
    rule: "non_negative"
    description: "总完成任务数不能为负数"
  - field: "totalFocusMinutes"
    rule: "non_negative"
    description: "总专注分钟数不能为负数"
  - field: "pendingTasks"
    rule: "non_negative"
    description: "待处理任务数不能为负数"
  - field: "pendingTodayTasks"
    rule: "non_negative"
    description: "今日待处理任务数不能为负数"
    
business_rules:
  - name: "metric_calculation"
    description: "指标计算规则"
    implementation: "定期计算并存储指标快照"
    
storage_config:
  indexes:
    - field: "calculatedAt"