meta:
  name: "Preference Model"
  type: "model"
  file_path: "lib/data/models/preference.dart"
  description: "用户偏好设置模型"
  version: "1.0"
  created_date: "251025"
  last_updated: "251025"

model_definition:
  name: "Preference"
  storage: "isar_collection"
  immutable: true
  annotation: "@immutable"
  
fields:
  - name: "id"
    type: "int"
    required: true
    nullable: false
    final: true
    description: "Isar 数据库主键"
    
  - name: "localeCode"
    type: "String"
    required: true
    nullable: false
    final: true
    description: "语言代码"
    
  - name: "themeMode"
    type: "ThemeMode"
    required: true
    nullable: false
    final: true
    description: "主题模式"
    
  - name: "fontScale"
    type: "double"
    required: true
    nullable: false
    final: true
    description: "字体缩放比例"
    
  - name: "updatedAt"
    type: "DateTime"
    required: true
    nullable: false
    final: true
    description: "最后更新时间"
    
constructors:
  - type: "const"
    name: "Preference"
    parameters:
      - name: "id"
        type: "int"
        required: true
      - name: "localeCode"
        type: "String"
        required: true
      - name: "themeMode"
        type: "ThemeMode"
        required: true
      - name: "fontScale"
        type: "double"
        required: true
      - name: "updatedAt"
        type: "DateTime"
        required: true
    description: "主构造函数"
    
methods:
  - name: "copyWith"
    return_type: "Preference"
    parameters:
      - name: "localeCode"
        type: "String?"
        required: false
      - name: "themeMode"
        type: "ThemeMode?"
        required: false
      - name: "fontScale"
        type: "double?"
        required: false
      - name: "updatedAt"
        type: "DateTime?"
        required: false
    visibility: "public"
    description: "创建偏好设置副本"
    
imports:
  - "package:flutter/material.dart"
  
dependencies:
  - "ThemeMode"
  
relationships: []
  
validation_rules:
  - field: "localeCode"
    rule: "not_empty"
    description: "语言代码不能为空"
  - field: "fontScale"
    rule: "positive"
    description: "字体缩放比例必须为正数"
    
business_rules:
  - name: "single_preference"
    description: "每个用户只能有一个偏好设置"
    implementation: "单例模式或唯一约束"
    
storage_config:
  indexes:
    - field: "updatedAt"
  constraints:
    - field: "id"
      constraint: "unique"