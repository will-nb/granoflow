name: "DrawerMenu"
type: "StatelessWidget"
file_path: "lib/presentation/navigation/drawer_menu.dart"
description: "增强抽屉菜单组件，支持三种显示模式：隐藏/图标/完整，横屏时底部导航变侧边栏，使用主题色显示选中状态"

enums:
  - name: "DrawerDisplayMode"
    values: ["hidden", "iconOnly", "full"]
    description: "抽屉显示模式枚举"

properties:
  - name: "displayMode"
    type: "DrawerDisplayMode"
    description: "当前显示模式"
    required: true

  - name: "selectedIndex"
    type: "int"
    description: "当前选中的导航索引，用于显示主题色选中状态"
    required: true

  - name: "onDestinationSelected"
    type: "ValueChanged<NavigationDestinations>?"
    description: "菜单项选择回调"
    required: false
    default: "null"

  - name: "onClose"
    type: "VoidCallback?"
    description: "抽屉关闭回调"
    required: false
    default: "null"

children:
  - name: "Material"
    type: "Material"
    description: "提供Material Design上下文"
    children:
      - name: "Container"
        type: "Container"
        properties:
          width: "根据displayMode动态设置 (0/80/280)"
          decoration: "BoxDecoration with custom border radius (直角)"
          boxShadow: "右侧阴影效果"
        children:
          - name: "DrawerHeader"
            type: "Container"
            condition: "displayMode == DrawerDisplayMode.full"
            properties:
              height: "120"
              decoration: "BoxDecoration with primary color"
              child: "Center with app name text"

          - name: "MenuItems"
            type: "ListView"
            children:
              - name: "IconOnlyLayout"
                condition: "displayMode == DrawerDisplayMode.iconOnly"
                type: "InkWell + Container + Center"
                properties:
                  height: "56"
                  width: "double.infinity"
                  child: "Center(Icon with theme color based on selectedIndex)"
                  onTap: "Navigate and close drawer"
                styling:
                  icon_color: "selectedIndex == index ? primary : onSurfaceVariant"
                  icon_size: "24"

              - name: "FullLayout"
                condition: "displayMode == DrawerDisplayMode.full"
                type: "ListTile"
                properties:
                  leading: "Icon with theme color based on selectedIndex"
                  title: "Text with theme color and font weight based on selectedIndex"
                  onTap: "Navigate and close drawer"
                styling:
                  icon_color: "selectedIndex == index ? primary : onSurfaceVariant"
                  text_color: "selectedIndex == index ? primary : onSurfaceVariant"
                  font_weight: "selectedIndex == index ? FontWeight.w600 : FontWeight.normal"
                  icon_size: "24"

methods:
  - name: "_getDrawerWidth"
    return_type: "double"
    description: "根据显示模式获取抽屉宽度"
    implementation: |
      double _getDrawerWidth() {
        switch (displayMode) {
          case DrawerDisplayMode.hidden:
            return 0;
          case DrawerDisplayMode.iconOnly:
            return 80;
          case DrawerDisplayMode.full:
            return 280;
        }
      }

features:
  - name: "主题色选中状态"
    description: "使用主题色显示选中状态，与底部导航栏保持一致"
    implementation: |
      - 选中状态：图标和文字使用 colorScheme.primary
      - 未选中状态：图标和文字使用 colorScheme.onSurfaceVariant
      - 字体粗细：选中时 FontWeight.w600，未选中时 FontWeight.normal
      - 图标大小：统一使用 24px

  - name: "响应式布局"
    description: "根据屏幕方向自动切换显示模式"
    implementation: |
      - 横屏：显示侧边栏 DrawerMenu
      - 竖屏：显示底部导航栏 AppNavigationBar
      - 两种模式使用相同的主题色风格

dependencies:
  - "package:flutter/material.dart"
  - "navigation_destinations.dart"

tests:
  widget_tests:
    - name: "test_drawer_menu_creation"
      description: "验证抽屉菜单组件的创建"
    - name: "test_drawer_menu_callback"
      description: "验证抽屉菜单回调功能"
    - name: "test_drawer_menu_selected_state"
      description: "验证选中状态的主题色显示"
    - name: "test_drawer_menu_display_modes"
      description: "验证三种显示模式的正确切换"
    - name: "test_drawer_menu_theme_consistency"
      description: "验证与底部导航栏的主题色一致性"