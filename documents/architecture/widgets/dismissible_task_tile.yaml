meta:
  name: "DismissibleTaskTile"
  type: "widget"
  file_path: "lib/presentation/widgets/dismissible_task_tile.dart"
  description: "可滑动任务瓦片组件，支持左滑右滑操作，提供统一的滑动交互体验"
  version: "1.0"
  created_date: "251026"
  last_updated: "251026"

widget_definition:
  name: "DismissibleTaskTile"
  layer: "presentation"
  pattern: "stateless"
  category: "ui_component"
  reusable: true
  
widget_types:
  - name: "StatelessWidget"
    description: "无状态 Widget，用于静态 UI 组件"
    usage: "任务列表项、滑动操作"
    
widget_properties:
  - name: "task"
    type: "Task"
    required: true
    description: "任务数据对象"
    validation: "不能为 null"
    
  - name: "child"
    type: "Widget"
    required: true
    description: "子组件（通常是任务瓦片内容）"
    validation: "不能为 null"
    
  - name: "onLeftAction"
    type: "VoidCallback?"
    required: false
    default_value: "null"
    description: "左滑操作回调"
    validation: "可选回调"
    
  - name: "onRightAction"
    type: "VoidCallback?"
    required: false
    default_value: "null"
    description: "右滑操作回调"
    validation: "可选回调"
    
  - name: "leftHintKey"
    type: "String"
    required: false
    default_value: "''"
    description: "左滑提示文本键"
    validation: "本地化键"
    
  - name: "rightHintKey"
    type: "String"
    required: false
    default_value: "''"
    description: "右滑提示文本键"
    validation: "本地化键"
    
  - name: "leftIcon"
    type: "IconData"
    required: false
    default_value: "Icons.arrow_back"
    description: "左滑图标"
    validation: "图标数据"
    
  - name: "rightIcon"
    type: "IconData"
    required: false
    default_value: "Icons.arrow_forward"
    description: "右滑图标"
    validation: "图标数据"
    
  - name: "leftColor"
    type: "Color"
    required: false
    default_value: "Colors.red"
    description: "左滑背景颜色"
    validation: "颜色值"
    
  - name: "rightColor"
    type: "Color"
    required: false
    default_value: "Colors.blue"
    description: "右滑背景颜色"
    validation: "颜色值"
    
  - name: "dismissThreshold"
    type: "double"
    required: false
    default_value: "0.3"
    description: "滑动阈值（0.0-1.0）"
    validation: "0.0-1.0 之间"
    
widget_methods:
  - name: "build"
    return_type: "Widget"
    parameters:
      - name: "context"
        type: "BuildContext"
        required: true
        description: "构建上下文"
    description: "构建 Widget"
    visibility: "public"
    async: false
    
  - name: "_buildLeftBackground"
    return_type: "Widget"
    parameters:
      - name: "context"
        type: "BuildContext"
        required: true
    description: "构建左滑背景"
    visibility: "private"
    async: false
    
  - name: "_buildRightBackground"
    return_type: "Widget"
    parameters:
      - name: "context"
        type: "BuildContext"
        required: true
    description: "构建右滑背景"
    visibility: "private"
    async: false
    
  - name: "_getLocalizedText"
    return_type: "String"
    parameters:
      - name: "context"
        type: "BuildContext"
        required: true
      - name: "key"
        type: "String"
        required: true
    description: "获取本地化文本"
    visibility: "private"
    async: false
    
  - name: "confirmDismiss"
    return_type: "Future<bool>"
    parameters:
      - name: "direction"
        type: "DismissDirection"
        required: true
        description: "滑动方向"
    description: "确认滑动操作"
    visibility: "public"
    async: true
    
widget_state:
  - name: "isDismissing"
    type: "bool"
    description: "是否正在滑动"
    initial_value: "false"
    validation: "布尔值"
    
widget_lifecycle:
  - phase: "initialization"
    description: "初始化阶段"
    operations: ["属性验证", "状态初始化"]
  - phase: "build"
    description: "构建阶段"
    operations: ["UI 构建", "状态渲染", "事件绑定"]
  - phase: "disposal"
    description: "清理阶段"
    operations: ["资源释放", "状态重置"]
    
widget_events:
  - name: "onLeftAction"
    description: "左滑操作事件"
    trigger: "用户左滑任务瓦片"
    handler: "onLeftAction 回调"
    parameters: "无参数"
    
  - name: "onRightAction"
    description: "右滑操作事件"
    trigger: "用户右滑任务瓦片"
    handler: "onRightAction 回调"
    parameters: "无参数"
    
widget_styling:
  - name: "leftBackgroundStyle"
    description: "左滑背景样式"
    properties:
      - name: "color"
        type: "Color"
        value: "leftColor"
        description: "背景颜色"
      - name: "alignment"
        type: "Alignment"
        value: "Alignment.centerLeft"
        description: "内容对齐"
      - name: "padding"
        type: "EdgeInsets"
        value: "EdgeInsets.symmetric(horizontal: 16, vertical: 8)"
        description: "内边距"
    responsive: true
    theme_aware: true
    
  - name: "rightBackgroundStyle"
    description: "右滑背景样式"
    properties:
      - name: "color"
        type: "Color"
        value: "rightColor"
        description: "背景颜色"
      - name: "alignment"
        type: "Alignment"
        value: "Alignment.centerRight"
        description: "内容对齐"
      - name: "padding"
        type: "EdgeInsets"
        value: "EdgeInsets.symmetric(horizontal: 16, vertical: 8)"
        description: "内边距"
    responsive: true
    theme_aware: true
    
widget_responsive:
  - breakpoint: "mobile"
    description: "移动端响应式"
    properties:
      - name: "dismissThreshold"
        value: "0.3"
        description: "滑动阈值"
      - name: "hintPadding"
        value: "EdgeInsets.symmetric(horizontal: 12, vertical: 6)"
        description: "提示内边距"
    layout: "全屏滑动"
    behavior: "触摸友好"
    
  - breakpoint: "tablet"
    description: "平板端响应式"
    properties:
      - name: "dismissThreshold"
        value: "0.25"
        description: "滑动阈值"
      - name: "hintPadding"
        value: "EdgeInsets.symmetric(horizontal: 16, vertical: 8)"
        description: "提示内边距"
    layout: "全屏滑动"
    behavior: "触摸友好"
    
  - breakpoint: "desktop"
    description: "桌面端响应式"
    properties:
      - name: "dismissThreshold"
        value: "0.2"
        description: "滑动阈值"
      - name: "hintPadding"
        value: "EdgeInsets.symmetric(horizontal: 20, vertical: 10)"
        description: "提示内边距"
    layout: "全屏滑动"
    behavior: "鼠标拖拽"
    
widget_accessibility:
  - name: "semanticLabel"
    description: "语义标签"
    implementation: "为滑动操作提供语义标签"
    testing: "无障碍测试"
    compliance: "WCAG 2.1"
    
  - name: "keyboardNavigation"
    description: "键盘导航"
    implementation: "支持键盘导航"
    testing: "键盘测试"
    compliance: "WCAG 2.1"
    
widget_performance:
  - operation: "build"
    optimization: "构建优化"
    description: "构建性能优化"
    caching: "状态缓存"
    rendering: "渲染优化"
    
  - operation: "dismiss"
    optimization: "滑动优化"
    description: "滑动性能优化"
    caching: "滑动状态缓存"
    rendering: "滑动渲染优化"
    
widget_testing:
  - name: "testDismissibleTaskTile"
    description: "测试可滑动任务瓦片"
    type: "widget"
    coverage: "100%"
    scenarios: "左滑、右滑、不同配置、响应式"
    
widget_dependencies:
  - name: "Task"
    type: "数据模型"
    description: "任务数据模型"
    required: true
    version: "1.0"
    
  - name: "AppLocalizations"
    type: "本地化"
    description: "应用本地化"
    required: true
    version: "1.0"
    
widget_imports:
  - "package:flutter/material.dart"
  - "package:flutter_gen/gen_l10n/app_localizations.dart"
  - "../../data/models/task.dart"
  
widget_categories:
  ui_components:
    - name: "DismissibleTaskTile"
      description: "可滑动任务瓦片组件"
      type: "StatelessWidget"
      category: "ui_component"
      
widget_interactions:
  - name: "swipeLeft"
    description: "左滑交互"
    type: "swipe"
    handler: "onLeftAction"
    feedback: "视觉反馈"
    accessibility: "支持无障碍"
    
  - name: "swipeRight"
    description: "右滑交互"
    type: "swipe"
    handler: "onRightAction"
    feedback: "视觉反馈"
    accessibility: "支持无障碍"
    
widget_animations:
  - name: "dismissAnimation"
    description: "滑动动画"
    type: "slide"
    duration: "300ms"
    curve: "easeInOut"
    trigger: "滑动操作"
    
  - name: "hintAnimation"
    description: "提示动画"
    type: "fade"
    duration: "200ms"
    curve: "easeInOut"
    trigger: "滑动开始"
    
widget_validation:
  - field: "task"
    rule: "not_null"
    description: "任务数据不能为 null"
    message: "任务数据不能为 null"
    required: true
    
  - field: "child"
    rule: "not_null"
    description: "子组件不能为 null"
    message: "子组件不能为 null"
    required: true
    
  - field: "dismissThreshold"
    rule: "range"
    description: "滑动阈值必须在 0.0-1.0 之间"
    message: "滑动阈值必须在 0.0-1.0 之间"
    required: false
    
widget_error_handling:
  - exception: "ArgumentError"
    description: "参数错误"
    handling: "验证参数并抛出描述性错误"
    recovery: "提供参数修正建议"
    user_feedback: "显示错误消息"
    
widget_internationalization:
  - name: "dismissibleTaskTile"
    description: "可滑动任务瓦片国际化"
    languages: "zh_CN, en_US"
    fallback: "en_US"
    context: "UI 组件"
    
widget_theme_integration:
  - name: "dismissibleTheme"
    description: "滑动主题"
    type: "color"
    default_value: "主题色"
    theme_aware: true
    
  - name: "thresholdTheme"
    description: "阈值主题"
    type: "double"
    default_value: "0.3"
    theme_aware: false
    
widget_state_management:
  - pattern: "外部状态管理"
    description: "通过回调管理状态"
    implementation: "使用 VoidCallback 回调"
    benefits: "解耦、可复用"
    considerations: "需要外部状态管理"
    
widget_testing_strategy:
  unit_tests:
    - name: "test_widget_creation"
      description: "测试 Widget 创建"
    - name: "test_widget_properties"
      description: "测试 Widget 属性"
    - name: "test_widget_state"
      description: "测试 Widget 状态"
    - name: "test_widget_lifecycle"
      description: "测试 Widget 生命周期"
    - name: "test_widget_interactions"
      description: "测试 Widget 交互"
    - name: "test_widget_events"
      description: "测试 Widget 事件"
    - name: "test_widget_styling"
      description: "测试 Widget 样式"
    - name: "test_widget_responsive"
      description: "测试 Widget 响应式"
    - name: "test_widget_accessibility"
      description: "测试 Widget 无障碍"
    - name: "test_widget_performance"
      description: "测试 Widget 性能"
      
  widget_tests:
    - name: "test_widget_rendering"
      description: "测试 Widget 渲染"
    - name: "test_widget_interactions"
      description: "测试 Widget 交互"
    - name: "test_widget_state_changes"
      description: "测试 Widget 状态变化"
    - name: "test_widget_animations"
      description: "测试 Widget 动画"
    - name: "test_widget_responsive_behavior"
      description: "测试 Widget 响应式行为"
    - name: "test_widget_accessibility"
      description: "测试 Widget 无障碍"
    - name: "test_widget_theme_integration"
      description: "测试 Widget 主题集成"
    - name: "test_widget_error_handling"
      description: "测试 Widget 错误处理"
    - name: "test_widget_validation"
      description: "测试 Widget 验证"
    - name: "test_widget_internationalization"
      description: "测试 Widget 国际化"
      
  integration_tests:
    - name: "test_widget_integration"
      description: "测试 Widget 集成"
    - name: "test_widget_coordination"
      description: "测试 Widget 协调"
    - name: "test_widget_data_flow"
      description: "测试 Widget 数据流"
    - name: "test_widget_navigation"
      description: "测试 Widget 导航"
    - name: "test_widget_state_management"
      description: "测试 Widget 状态管理"
    - name: "test_widget_performance"
      description: "测试 Widget 性能"
    - name: "test_widget_accessibility"
      description: "测试 Widget 无障碍"
    - name: "test_widget_responsive"
      description: "测试 Widget 响应式"
    - name: "test_widget_theme"
      description: "测试 Widget 主题"
    - name: "test_widget_internationalization"
      description: "测试 Widget 国际化"
      
  mock_strategy:
    - name: "MockDismissibleTaskTile"
      description: "Mock 实现用于测试"
    - name: "FakeDismissibleTaskTile"
      description: "Fake 实现用于测试"
    - name: "TestDismissibleTaskTile"
      description: "测试专用 Widget"
