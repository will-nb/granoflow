meta:
  name: "CreateTaskDialog"
  type: "widget"
  file_path: "lib/presentation/widgets/create_task_dialog.dart"
  description: "创建任务对话框组件，提供任务创建功能"
  version: "1.0"
  created_date: "251025"
  last_updated: "251025"

widget_definition:
  name: "CreateTaskDialog"
  layer: "presentation"
  pattern: "consumer_stateful"
  category: "dialog"
  reusable: true
  
widget_types:
  - name: "ConsumerStatefulWidget"
    description: "有状态消费者 Widget，用于 Riverpod 状态管理"
    usage: "状态管理、数据绑定、复杂交互"
    
widget_properties:
  - name: "key"
    type: "Key?"
    required: false
    description: "Widget 键"
    validation: "可选"
    
widget_methods:
  - name: "createState"
    return_type: "ConsumerState<CreateTaskDialog>"
    parameters: []
    description: "创建状态"
    visibility: "public"
    async: false
    
  - name: "build"
    return_type: "Widget"
    parameters:
      - name: "context"
        type: "BuildContext"
        required: true
        description: "构建上下文"
    description: "构建 Widget"
    visibility: "public"
    async: false
    
  - name: "dispose"
    return_type: "void"
    parameters: []
    description: "清理资源"
    visibility: "public"
    async: false
    
widget_state:
  - name: "_titleController"
    type: "TextEditingController"
    description: "标题输入控制器"
    initial_value: "TextEditingController()"
    validation: "不能为 null"
    
  - name: "_selectedTag"
    type: "String"
    description: "选中的标签"
    initial_value: "'工作'"
    validation: "不能为空"
    
  - name: "_selectedParent"
    type: "String"
    description: "选中的父任务"
    initial_value: "'根任务'"
    validation: "不能为空"
    
  - name: "_availableTags"
    type: "List<String>"
    description: "可用标签列表"
    initial_value: "['工作', '学习', '生活', '娱乐']"
    validation: "不能为空"
    
  - name: "_availableParents"
    type: "List<String>"
    description: "可用父任务列表"
    initial_value: "['根任务', '项目A', '项目B']"
    validation: "不能为空"
    
widget_lifecycle:
  - phase: "initialization"
    description: "初始化阶段"
    operations: ["状态初始化", "控制器创建", "依赖注入"]
  - phase: "build"
    description: "构建阶段"
    operations: ["UI 构建", "状态渲染", "事件绑定"]
  - phase: "disposal"
    description: "清理阶段"
    operations: ["资源释放", "控制器清理", "状态重置"]
    
widget_events:
  - name: "onCreateTask"
    description: "创建任务事件"
    trigger: "用户点击创建按钮"
    handler: "创建任务处理函数"
    parameters: "任务数据"
    
  - name: "onCancel"
    description: "取消事件"
    trigger: "用户点击取消按钮"
    handler: "取消处理函数"
    parameters: "无"
    
widget_styling:
  - name: "dialogStyle"
    description: "对话框样式"
    properties:
      - name: "borderRadius"
        type: "BorderRadius"
        value: "BorderRadius.circular(12)"
        description: "圆角半径"
      - name: "padding"
        type: "EdgeInsets"
        value: "EdgeInsets.symmetric(vertical: 32, horizontal: 16)"
        description: "内边距"
      - name: "backgroundColor"
        type: "Color"
        value: "Theme.of(context).colorScheme.surface"
        description: "背景色，使用主题的 surface 色"
      - name: "maxWidth"
        type: "double"
        value: "400"
        description: "表单元素的最大宽度"
    responsive: true
    theme_aware: true
    
widget_responsive:
  - breakpoint: "mobile"
    description: "移动端响应式"
    properties:
      - name: "width"
        value: "100%"
        description: "移动端宽度"
      - name: "height"
        value: "auto"
        description: "移动端高度"
    layout: "Column 布局"
    behavior: "垂直排列"
    
  - breakpoint: "tablet"
    description: "平板端响应式"
    properties:
      - name: "width"
        value: "80%"
        description: "平板端宽度"
      - name: "height"
        value: "auto"
        description: "平板端高度"
    layout: "Column 布局"
    behavior: "垂直排列"
    
  - breakpoint: "desktop"
    description: "桌面端响应式"
    properties:
      - name: "width"
        value: "60%"
        description: "桌面端宽度"
      - name: "height"
        value: "auto"
        description: "桌面端高度"
    layout: "Column 布局"
    behavior: "垂直排列"
    
widget_accessibility:
  - name: "semanticLabel"
    description: "语义标签"
    implementation: "为对话框提供语义标签"
    testing: "无障碍测试"
    compliance: "WCAG 2.1"
    
  - name: "keyboardNavigation"
    description: "键盘导航"
    implementation: "支持键盘导航"
    testing: "键盘测试"
    compliance: "WCAG 2.1"
    
widget_performance:
  - operation: "build"
    optimization: "构建优化"
    description: "构建性能优化"
    caching: "状态缓存"
    rendering: "渲染优化"
    
  - operation: "formSubmission"
    optimization: "表单提交优化"
    description: "表单提交性能优化"
    caching: "表单状态缓存"
    rendering: "提交渲染优化"
    
widget_testing:
  - name: "testCreateTaskDialog"
    description: "测试创建任务对话框"
    type: "widget"
    coverage: "100%"
    scenarios: "表单输入、提交、取消、验证"
    
widget_dependencies:
  - name: "Riverpod"
    type: "状态管理"
    description: "Riverpod 状态管理"
    required: true
    version: "2.0"
    
widget_imports:
  - "package:flutter/material.dart"
  - "package:flutter_riverpod/flutter_riverpod.dart"
  
widget_categories:
  dialogs:
    - name: "CreateTaskDialog"
      description: "创建任务对话框"
      type: "ConsumerStatefulWidget"
      category: "dialog"
      
widget_interactions:
  - name: "formInput"
    description: "表单输入交互"
    type: "tap"
    handler: "输入处理函数"
    feedback: "视觉反馈"
    accessibility: "支持无障碍"
    
  - name: "formSubmission"
    description: "表单提交交互"
    type: "tap"
    handler: "提交处理函数"
    feedback: "视觉反馈"
    accessibility: "支持无障碍"
    
widget_animations:
  - name: "dialogAnimation"
    description: "对话框动画"
    type: "slide"
    duration: "300ms"
    curve: "easeInOut"
    trigger: "对话框显示"
    
widget_validation:
  - field: "title"
    rule: "not_empty"
    description: "任务标题不能为空"
    message: "任务标题不能为空"
    required: true
    
  - field: "tag"
    rule: "valid_option"
    description: "标签必须是有效选项"
    message: "标签必须是有效选项"
    required: true
    
  - field: "parent"
    rule: "valid_option"
    description: "父任务必须是有效选项"
    message: "父任务必须是有效选项"
    required: true
    
widget_error_handling:
  - exception: "ValidationException"
    description: "验证异常"
    handling: "验证表单并显示错误消息"
    recovery: "提供修正建议"
    user_feedback: "显示错误消息"
    
  - exception: "SubmissionException"
    description: "提交异常"
    handling: "处理提交错误并显示错误消息"
    recovery: "重试机制"
    user_feedback: "显示错误消息"
    
widget_internationalization:
  - name: "createTaskDialog"
    description: "创建任务对话框国际化"
    languages: "zh_CN, en_US"
    fallback: "en_US"
    context: "对话框"
    
widget_theme_integration:
  - name: "dialogTheme"
    description: "对话框主题"
    type: "color"
    default_value: "主题色"
    theme_aware: true
    
  - name: "formTheme"
    description: "表单主题"
    type: "color"
    default_value: "主题色"
    theme_aware: true
    
widget_state_management:
  - pattern: "Riverpod 状态管理"
    description: "使用 Riverpod 管理状态"
    implementation: "使用 ConsumerStatefulWidget"
    benefits: "响应式、可测试"
    considerations: "需要 Provider 配置"
    
widget_testing_strategy:
  unit_tests:
    - name: "test_widget_creation"
      description: "测试 Widget 创建"
    - name: "test_widget_properties"
      description: "测试 Widget 属性"
    - name: "test_widget_state"
      description: "测试 Widget 状态"
    - name: "test_widget_lifecycle"
      description: "测试 Widget 生命周期"
    - name: "test_widget_interactions"
      description: "测试 Widget 交互"
    - name: "test_widget_events"
      description: "测试 Widget 事件"
    - name: "test_widget_styling"
      description: "测试 Widget 样式"
    - name: "test_widget_responsive"
      description: "测试 Widget 响应式"
    - name: "test_widget_accessibility"
      description: "测试 Widget 无障碍"
    - name: "test_widget_performance"
      description: "测试 Widget 性能"
      
  widget_tests:
    - name: "test_widget_rendering"
      description: "测试 Widget 渲染"
    - name: "test_widget_interactions"
      description: "测试 Widget 交互"
    - name: "test_widget_state_changes"
      description: "测试 Widget 状态变化"
    - name: "test_widget_animations"
      description: "测试 Widget 动画"
    - name: "test_widget_responsive_behavior"
      description: "测试 Widget 响应式行为"
    - name: "test_widget_accessibility"
      description: "测试 Widget 无障碍"
    - name: "test_widget_theme_integration"
      description: "测试 Widget 主题集成"
    - name: "test_widget_error_handling"
      description: "测试 Widget 错误处理"
    - name: "test_widget_validation"
      description: "测试 Widget 验证"
    - name: "test_widget_internationalization"
      description: "测试 Widget 国际化"
      
  integration_tests:
    - name: "test_widget_integration"
      description: "测试 Widget 集成"
    - name: "test_widget_coordination"
      description: "测试 Widget 协调"
    - name: "test_widget_data_flow"
      description: "测试 Widget 数据流"
    - name: "test_widget_navigation"
      description: "测试 Widget 导航"
    - name: "test_widget_state_management"
      description: "测试 Widget 状态管理"
    - name: "test_widget_performance"
      description: "测试 Widget 性能"
    - name: "test_widget_accessibility"
      description: "测试 Widget 无障碍"
    - name: "test_widget_responsive"
      description: "测试 Widget 响应式"
    - name: "test_widget_theme"
      description: "测试 Widget 主题"
    - name: "test_widget_internationalization"
      description: "测试 Widget 国际化"
      
  mock_strategy:
    - name: "MockCreateTaskDialog"
      description: "Mock 实现用于测试"
    - name: "FakeCreateTaskDialog"
      description: "Fake 实现用于测试"
    - name: "TestCreateTaskDialog"
      description: "测试专用 Widget"